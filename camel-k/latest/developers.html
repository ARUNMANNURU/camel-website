<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Contributing to Camel K :: Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/latest/developers.html"> <meta name="generator" content="Antora 2.3.0"> <link rel="stylesheet" href="../../_/css/site-bd91b83a08.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item navbar-topics" href="../../blog/">Blog</a> <a class="navbar-item navbar-topics" href="../../projects/">Projects</a> <a class="navbar-item navbar-topics" href="../../docs/">Documentation</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="../../manual/latest/contributing.html">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item navbar-topics" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div id="social-media" class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active"> <nav class="nav-menu" data-panel="menu"> <h3 class="title"><a href="index.html">Apache Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="installation/installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/minikube.html">Minikube</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/minishift.html">Minishift</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/gke.html">Google Kubernetes Engine (GKE)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/openshift.html">OpenShift</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle"></button> <a class="nav-link" href="installation/registry/registry.html">Configuring Registry</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="installation/registry/dockerhub.html">Docker Hub</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="installation/registry/github.html">Github Packages</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="installation/registry/gcr.html">Gcr.io</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="running/running.html">Running</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="running/dev-mode.html">Dev Mode</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="tutorials/tutorials.html">Tutorials</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="tutorials/tekton/tekton.html">Tekton Pipelines</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="cli/cli.html">CLI</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="cli/modeline.html">Modeline</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/configmap-secret.html">ConfigMap/Secret</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="traits/traits.html">Traits</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/3scale.html">3scale</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/affinity.html">Affinity</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/builder.html">Builder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/camel.html">Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/container.html">Container</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/cron.html">Cron</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/deployer.html">Deployer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/deployment.html">Deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/environment.html">Environment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/gc.html">Gc</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/ingress.html">Ingress</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/istio.html">Istio</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/jolokia.html">Jolokia</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/jvm.html">Jvm</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/knative-service.html">Knative Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/knative.html">Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/master.html">Master</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/openapi.html">Openapi</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/owner.html">Owner</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/platform.html">Platform</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/prometheus.html">Prometheus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/pull-secret.html">Pull Secret</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/quarkus.html">Quarkus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/route.html">Route</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/service.html">Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="traits/tracing.html">Tracing</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/kotlin.html">Kotlin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/javascript.html">JavaScript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/xml.html">XML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/yaml.html">YAML</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <a class="nav-link" href="uninstalling.html">Uninstalling</a> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="developers.html">Contributing to Camel K</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel K</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component is-current"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel Karaf</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-karaf/latest/index.html">latest</a> </li> <li class="version"> <a href="../../camel-karaf/3.4.x/index.html">3.4.x</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Components</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/3.4.x/index.html">3.4.x</a> </li> <li class="version"> <a href="../../components/3.3.x/index.html">3.3.x</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-kafka-connector/latest/index.html">latest</a> </li> <li class="version"> <a href="../../camel-kafka-connector/0.3.x/index.html">0.3.x</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Spring Boot Starters</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-spring-boot/latest/index.html">latest</a> </li> <li class="version"> <a href="../../camel-spring-boot/3.4.x/index.html">3.4.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main class="article"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Apache Camel K</a></li> <li><a href="developers.html">Contributing to Camel K</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/master/docs/modules/ROOT/pages/developers.adoc">Edit this Page</a></div> </div> <div class="content"> <article class="doc"> <h1 class="page">Contributing to Camel K</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>We love contributions!</p> </div> <div class="paragraph"> <p>The project is written in <a href="https://golang.org/">go</a> and contains some parts written in Java for the <a href="https://github.com/apache/camel-k-runtime/">integration runtime</a> Camel K is built on top of Kubernetes through <strong>Custom Resource Definitions</strong>. The <a href="https://github.com/operator-framework/operator-sdk">Operator SDK</a> is used to manage the lifecycle of those custom resources.</p> </div> </div> </div> <div class="sect1"> <h2 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h2> <div class="sectionbody"> <div class="paragraph"> <p>In order to build the project, you need to comply with the following requirements:</p> </div> <div class="ulist"> <ul> <li> <p><strong>Go version 1.13+</strong>: needed to compile and test the project. Refer to the <a href="https://golang.org/">Go website</a> for the installation.</p> </li> <li> <p><strong>Operator SDK v0.9.0+</strong>: used to build the operator and the Docker images. Instructions in the <a href="https://github.com/operator-framework/operator-sdk">Operator SDK website</a> (binary downloads available in the release page).</p> </li> <li> <p><strong>GNU Make</strong>: used to define composite build actions. This should be already installed or available as package if you have a good OS (<a href="https://www.gnu.org/software/make/" class="bare">https://www.gnu.org/software/make/</a>).</p> </li> </ul> </div> <div class="paragraph"> <p>The Camel K Java runtime (camel-k-runtime) requires:</p> </div> <div class="ulist"> <ul> <li> <p><strong>Java 11</strong>: needed for compilation.</p> </li> <li> <p><strong>Maven</strong>: needed for building</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="checks"><a class="anchor" href="#checks"></a>Running checks</h2> <div class="sectionbody"> <div class="paragraph"> <p>Checks rely on <code>golangci-lint</code> being installed, to install it look at the <a href="https://github.com/golangci/golangci-lint#local-installation">Local Installation</a> instructions.</p> </div> <div class="paragraph"> <p>You can run checks via <code>make lint</code> or you can install a GIT pre-commit hook and have the checks run via <a href="https://pre-commit.com">pre-commit</a>; then make sure to install the pre-commit hooks after installing pre-commit by running</p> </div> <div class="literalblock"> <div class="content"> <pre>$ pre-commit install</pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="checking-out"><a class="anchor" href="#checking-out"></a>Checking Out the Sources</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can create a fork of this project from GitHub, then clone your fork with the <code>git</code> command line tool.</p> </div> </div> </div> <div class="sect1"> <h2 id="structure"><a class="anchor" href="#structure"></a>Structure</h2> <div class="sectionbody"> <div class="paragraph"> <p>This is a high-level overview of the project structure:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 1. Structure</caption> <colgroup> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Path</th> <th class="tableblock halign-left valign-top">Content</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/build">/build</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Contains the Docker and Maven build configuration.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/cmd">/cmd</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Contains the entry points (the <strong>main</strong> functions) for the <strong>camel-k</strong> binary (manager) and the <strong>kamel</strong> client tool.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/deploy">/deploy</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Contains Kubernetes resource files that are used by the <strong>kamel</strong> client during installation. The <code>/deploy/resources.go</code> file is kept in sync with the content of the directory (<code>make build-embed-resources</code>), so that resources can be used from within the go code.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/docs">/docs</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Contains the documentation website based on <a href="https://antora.org/">Antora</a>.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/e2e">/e2e</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Include integration tests to ensure that the software interacts correctly with Kubernetes and OpenShift.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/examples">/examples</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Various examples of Camel K usage.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/pkg">/pkg</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This is where the code resides. The code is divided in multiple subpackages.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/apache/camel-k/tree/master/script">/script</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Contains scripts used during make operations for building the project.</p></td> </tr> </tbody> </table></div> </div> </div> <div class="sect1"> <h2 id="building"><a class="anchor" href="#building"></a>Building</h2> <div class="sectionbody"> <div class="paragraph"> <p>To build the whole project you now need to run:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>make</code></pre> </div> </div> <div class="paragraph"> <p>This execute a full build of both the Java and Go code. If you need to build the components separately you can execute:</p> </div> <div class="ulist"> <ul> <li> <p><code>make build-operator</code>: to build the operator binary only.</p> </li> <li> <p><code>make build-kamel</code>: to build the <code>kamel</code> client tool only.</p> </li> <li> <p><code>make build-runtime</code>: to build the Java-based runtime code only.</p> </li> </ul> </div> <div class="paragraph"> <p>After a successful build, if you&#8217;re connected to a Docker daemon, you can build the operator Docker image by running:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>make images</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="push-snapshot"><a class="anchor" href="#push-snapshot"></a>Push runtime snapshot</h2> <div class="sectionbody"> <div class="paragraph"> <p>For the Java bits in runtime you can push to the Apache Snapshot repository with:</p> </div> <div class="ulist"> <ul> <li> <p><code>make push-runtime-snapshot</code>: to push the Java-based runtime snapshot JARs.</p> </li> </ul> </div> <div class="paragraph"> <p>In your settings.xml you&#8217;ll need to have the correct ASF credentials to push.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;server&gt;
      &lt;id&gt;apache.snapshots.https&lt;/id&gt;
      &lt;username&gt;username&lt;/username&gt;
      &lt;password&gt;password&lt;/password&gt;
    &lt;/server&gt;
    &lt;server&gt;
      &lt;id&gt;apache.releases.https&lt;/id&gt;
      &lt;username&gt;username&lt;/username&gt;
      &lt;password&gt;password&lt;/password&gt;
    &lt;/server&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Don&#8217;t forget to first run a <code>make build-runtime</code> before pushing the snapshot.</p> </div> <div class="paragraph"> <p>The above command produces a <code>camel-k</code> image with name <code>docker.io/apache/camel-k</code>. Sometimes you might need to produce camel-k images that need to be pushed to the custom repository e.g. <code>docker.io/myrepo/camel-k</code>, to do that you can pass a parameter <code>imgDestination</code> to the make as shown below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>make imgDestination='docker.io/myrepo' images</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="testing"><a class="anchor" href="#testing"></a>Testing</h2> <div class="sectionbody"> <div class="paragraph"> <p>Unit tests are executed automatically as part of the build. They use the standard go testing framework.</p> </div> <div class="paragraph"> <p>Integration tests (aimed at ensuring that the code integrates correctly with Kubernetes and OpenShift), need special care.</p> </div> <div class="paragraph"> <p>The <strong>convention</strong> used in this repo is to name unit tests <code>xxx_test.go</code>, and name integration tests <code>yyy_integration_test.go</code>. Integration tests are all in the <a href="https://github.com/apache/camel-k/tree/master/e2e">/e2e</a> dir.</p> </div> <div class="paragraph"> <p>Since both names end with <code>_test.go</code>, both would be executed by go during build, so you need to put a special <strong>build tag</strong> to mark integration tests. A integration test should start with the following line:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>// +build integration</code></pre> </div> </div> <div class="paragraph"> <p>Look into the <a href="https://github.com/apache/camel-k/tree/master/e2e">/e2e</a> directory for examples of integration tests.</p> </div> <div class="paragraph"> <p>Before running a integration test, you need to be connected to a Kubernetes/OpenShift namespace. After you log in into your cluster, you can run the following command to execute <strong>all</strong> integration tests:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>make test-integration</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="running"><a class="anchor" href="#running"></a>Running</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you want to install everything you have in your source code and see it running on Kubernetes, you need to run the following command:</p> </div> <div class="sect2"> <h3 id="_for_minishift"><a class="anchor" href="#_for_minishift"></a>For Minishift</h3> <div class="ulist"> <ul> <li> <p>Run <code>make install-minishift</code> (or just <code>make install</code>): to build the project and install it in the current namespace on Minishift</p> </li> <li> <p>You can specify a different namespace with <code>make install-minishift project=myawesomeproject</code></p> </li> </ul> </div> <div class="paragraph"> <p>This command assumes you have an already running Minishift instance.</p> </div> </div> <div class="sect2"> <h3 id="_for_minikube"><a class="anchor" href="#_for_minikube"></a>For Minikube</h3> <div class="ulist"> <ul> <li> <p>Run <code>make install-minikube</code>: to build the project and install it in the current namespace on Minikube</p> </li> </ul> </div> <div class="paragraph"> <p>This command assumes you have an already running Minikube instance.</p> </div> </div> <div class="sect2"> <h3 id="_use"><a class="anchor" href="#_use"></a>Use</h3> <div class="paragraph"> <p>Now you can play with Camel K:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>./kamel run examples/Sample.java</code></pre> </div> </div> <div class="paragraph"> <p>To add additional dependencies to your routes:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>./kamel run -d camel:dns examples/dns.js</code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="debugging"><a class="anchor" href="#debugging"></a>Debugging and Running from IDE</h2> <div class="sectionbody"> <div class="paragraph"> <p>Sometimes it&#8217;s useful to debug the code from the IDE when troubleshooting.</p> </div> <div class="paragraph"> <div class="title"><strong>Debugging the <code>kamel</code> binary</strong></div> <p>It should be straightforward: just execute the <a href="https://github.com/apache/camel-k/tree/master/cmd/kamel/main.go">/cmd/kamel/main.go</a> file from the IDE (e.g. Goland) in debug mode.</p> </div> <div class="paragraph"> <div class="title"><strong>Debugging the operator</strong></div> <p>It is a bit more complex (but not so much).</p> </div> <div class="paragraph"> <p>You are going to run the operator code <strong>outside</strong> OpenShift in your IDE so, first of all, you need to <strong>stop the operator running inside</strong>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>// use kubectl in plain Kubernetes
oc scale deployment/camel-k-operator --replicas 0</code></pre> </div> </div> <div class="paragraph"> <p>You can scale it back to 1 when you&#8217;re done and you have updated the operator image.</p> </div> <div class="paragraph"> <p>You can setup the IDE (e.g. Goland) to execute the <a href="https://github.com/apache/camel-k/blob/master/cmd/manager/main.go">/cmd/manager/main.go</a> file in debug mode.</p> </div> <div class="paragraph"> <p>When configuring the IDE task, make sure to add all required environment variables in the <strong>IDE task configuration screen</strong>:</p> </div> <div class="ulist"> <ul> <li> <p>Set the <code>KUBERNETES_CONFIG</code> environment variable to point to your Kubernetes configuration file (usually <code>&lt;homedir&gt;/.kube/config</code>).</p> </li> <li> <p>Set the <code>WATCH_NAMESPACE</code> environment variable to a Kubernetes namespace you have access to.</p> </li> <li> <p>Set the <code>OPERATOR_NAME</code> environment variable to <code>camel-k</code>.</p> </li> </ul> </div> <div class="paragraph"> <p>After you setup the IDE task, you can run and debug the operator process.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The operator can be fully debugged in Minishift, because it uses OpenShift S2I binary builds under the hood. The build phase cannot be (currently) debugged in Minikube because the Kaniko builder requires that the operator and the publisher pod share a common persistent volume. </td> </tr> </table></div> </div> </div> </div> </article> <aside class="toc sidebar" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> </div> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="../../manual/latest/faq/index.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="https://www.apache.org/foundation/policies/conduct">Code of conduct</a> </dd><dd><a href="../../community/support/">Support</a></dd> <dd><a href="../../manual/latest/contributing.html">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2020 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/vendor/algoliasearch-1c1c4d8ac7.js"></script> <script src="../../_/js/site-ef8905e1f8.js"></script> <script async src="../../_/js/vendor/highlight-a988c6fdd9.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel K",
        "item": "https://camel.apache.org/camel-k/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "latest",
        "item": "https://camel.apache.org/camel-k/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 4,
        "name": "Contributing to Camel K","item": "https://camel.apache.org/camel-k/latest/developers.html"}
        ]
    } </script> </body> </html> 