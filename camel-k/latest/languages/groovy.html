<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Writing Integrations in Groovy - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/latest/languages/groovy.html"> <meta name="generator" content="Antora 2.0.0"> <link rel="stylesheet" href="../../../_/css/site-e4b6a6bc80.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../../news/">News</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../../manual/latest/">User manual</a> <a class="navbar-item" href="../../../components/latest/">Component reference</a> <a class="navbar-item" href="../../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../../camel-quarkus/latest/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../../community/articles/">Articles</a> <a class="navbar-item" href="../../../community/books/">Books</a> <a class="navbar-item" href="../../../community/team/">Team</a> <a class="navbar-item" href="../../../community/camel-extra/">Camel extra</a> </div> </div> <a class="navbar-item" href="../../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="../index.html">Apache Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../installation/installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/minikube.html">Minikube</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/minishift.html">Minishift</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/gke.html">Google Kubernetes Engine (GKE)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/openshift.html">OpenShift</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../running/running.html">Running</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/dev-mode.html">Dev Mode</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/configmap-secret.html">ConfigMap/Secret</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="kotlin.html">Kotlin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="javascript.html">JavaScript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="xml.html">XML</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../traits.html">Traits</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../developers.html">Contributing to Camel K</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel K</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="../index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../components/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../index.html">Apache Camel K</a></li> <li><a href="languages.html">Languages</a></li> <li><a href="groovy.html">Groovy</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/master/docs/modules/ROOT/pages/languages/groovy.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">Writing Integrations in Groovy</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>An integration written in Groovy looks very similar to a Java one except it can leverages Groovy&#8217;s language enhancements over Java:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">from('timer:tick')
    .process { it.in.body = 'Hello Camel K!' }
    .to('log:info')</code></pre> </div> </div> <div class="paragraph"> <p>Camel K extends the Camel Java DSL making it easier to configure the context in which the integration runs using the top level <em>context</em> block</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">context {
  // configure the context here
}</code></pre> </div> </div> <div class="paragraph"> <p>At the moment the enhanced DSL provides a way to bind items to the registry, to configure the components the context creates and some improvements over the REST DSL.</p> </div> </div> </div> <div class="sect1"> <h2 id="_registry_configuration"><a class="anchor" href="#_registry_configuration"></a>Registry Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>The registry is accessible using the <em>registry</em> block inside the <em>context</em> one:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">context {
    registry {
      bind "my-cache", Caffeine.newBuilder().build() <i class="conum" data-value="1"></i><b>(1)</b>
      bind "my-processor", processor { <i class="conum" data-value="2"></i><b>(2)</b>
         it.in.body = 'Hello Camel K!'
      }
      bind "my-predicate", predicate { <i class="conum" data-value="3"></i><b>(3)</b>
         it.in.body != null
      }
    }
}</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>bind a bean to the context</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>define a custom processor to be used later in the routes by ref</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>define a custom predicate to be used later in the routes by ref</td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_components_configuration"><a class="anchor" href="#_components_configuration"></a>Components Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>Components can be configured within the <em>components</em> block inside the <em>context</em> one:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">context {
    components {
        'seda' { <i class="conum" data-value="1"></i><b>(1)</b>
            queueSize = 1234
            concurrentConsumers = 12
        }

        'log' { <i class="conum" data-value="2"></i><b>(2)</b>
            exchangeFormatter = {
                'body ==&gt; ' + it.in.body
            } as org.apache.camel.spi.ExchangeFormatter
        }
    }
}</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>configure the properties of the component whit name <em>seda</em></td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>configure the properties of the component whit name <em>log</em></td> </tr> </table></div> </div> <div class="paragraph"> <p>Setting the property <em>exchangeFormatter</em> looks a little ugly as you have to declare the type of your closure. For demonstration purpose we have created a Groovy extension module that simplify configuring the <em>exchangeFormatter</em> so you can rewrite your DSL as</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">context {
    components {
        ...

        'log' {
            formatter {
                'body ==&gt; ' + it.in.body
            }
        }
    }
}</code></pre> </div> </div> <div class="paragraph"> <p>which is much better.</p> </div> <div class="admonitionblock tip"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>You can provide your custom extensions by packaging them in a dependency you declare for your integration.</p> </div> </td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_rest_endpoints"><a class="anchor" href="#_rest_endpoints"></a>Rest Endpoints</h2> <div class="sectionbody"> <div class="paragraph"> <p>Integrations&#8217;s REST endpoints can be configured using the top level <em>rest</em> block:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">rest {
    configuration { <i class="conum" data-value="1"></i><b>(1)</b>
        host = 'my-host'
        port '9192'
    }

    path('/my/path') { <i class="conum" data-value="2"></i><b>(2)</b>
        // standard Rest DSL
    }
}</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Configure the rest engine</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Configure the rest endpoint for the base path '/my/path'</td> </tr> </table></div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../../news/">News</a></dd> <dd><a href="../../../components/latest/">Components</a></dd> <dd><a href="../../../download/">Download</a></dd> <dd><a href="../../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../community/articles/">Articles</a></dd> <dd><a href="../../../community/books/">Books</a></dd> <dd><a href="../../../community/team/">Team</a></dd> <dd><a href="../../../community/camel-extra/">Camel extra</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../../_/js/site-f4f4dbc142.js"></script> <script async src="../../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel K",
        "item": "https://camel.apache.org/camel-k/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Languages","item": "https://camel.apache.org/camel-k/latest/languages/languages.html"}
        ,
        {
        "@type": "ListItem",
        "position": 4,
        "name": "Groovy","item": "https://camel.apache.org/camel-k/latest/languages/groovy.html"}
        ]
    } </script> </body> </html> 