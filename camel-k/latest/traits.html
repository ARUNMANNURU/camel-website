<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Traits - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/latest/traits.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-3b6614a8d7.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 3 Migration Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> <a class="navbar-item" href="../../community/camel-extra/">Camel extra</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">Apache Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="installation/installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/minikube.html">Minikube</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/minishift.html">Minishift</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/gke.html">Google Kubernetes Engine (GKE)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="installation/openshift.html">OpenShift</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="running/running.html">Running</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="running/dev-mode.html">Dev Mode</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuration/configmap-secret.html">ConfigMap/Secret</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/kotlin.html">Kotlin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/javascript.html">JavaScript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages/xml.html">XML</a> </li> </ul> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="traits.html">Traits</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="developers.html">Contributing to Camel K</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel K</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Apache Camel K</a></li> <li><a href="traits.html">Traits</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/master/docs/modules/ROOT/pages/traits.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">Traits</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Traits are high level named features of Camel K that can be enabled/disabled or configured to customize the behavior of the final integration.</p> </div> <div class="paragraph"> <p>Camel K provide sensible defaults for all such traits, taking into account the details of the target platform where the integration is going to run into. However, it&#8217;s possible for a <strong>expert user</strong> to configure them in order to obtain a different behavior.</p> </div> </div> </div> <div class="sect1"> <h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>Each trait has a unique ID that can be used to configure it using the command line tool.</p> </div> <div class="paragraph"> <p>E.g. in order to disable the creation of a Service for a integration, a user can execute:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>kamel run --trait service.enabled=false file.groovy</code></pre> </div> </div> <div class="paragraph"> <p>The flag <code>--trait</code> can be also abbreviated with <code>-t</code>.</p> </div> <div class="paragraph"> <p>The <code>enabled</code> property is available on all traits and can be used to enable/disable them. All traits have their own internal logic to determine if they need to be enabled when the user does not activate them explicitly.</p> </div> <div class="paragraph"> <p>All traits share also a <code>auto</code> property that can be used to enable/disable auto-configuration of the trait based on the environment. The auto-configuration mechanism is able to enable/disable the trait when the <code>enabled</code> property is not explicitly set by the user and also change the trait configuration. The <code>auto</code> property is enabled by default.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Some traits are applicable only to specific platforms (see "profiles" in the table). </td> </tr> </table></div> </div> <div class="paragraph"> <p>A trait may have additional properties that can be configured by the end user.</p> </div> <div class="paragraph"> <p>E.g. the following command configures the container <code>port</code> that should be exposed by the service:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>kamel run --trait service.enabled=true --trait container.service-port=8081 file.groovy</code></pre> </div> </div> <div class="paragraph"> <p>Or the equivalent command (assuming that the service trait is enabled by auto-detection):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>kamel run -t container.service-port=8081 file.groovy</code></pre> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Enabling a trait does not force the trait to be activated, especially if the trait specific preconditions do not hold. E.g. enabling the <code>route</code> trait while the <code>service</code> trait is disabled does not produce automatically a route, since a service is needed for the <code>route</code> trait to work. </td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_common_traits"><a class="anchor" href="#_common_traits"></a>Common Traits</h2> <div class="sectionbody"> <div class="paragraph"> <p>The following is a list of common traits that can be configured by the end users:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Trait</th> <th class="tableblock halign-left valign-top">Profiles</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>dependencies</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Automatically adds dependencies required by the Camel routes by inspecting the user code. <br> <br> It&#8217;s enabled by default.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>deployer</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Configure deployer behavior. <br> <br> It&#8217;s enabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>deployer.kind</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Allows to explicitly select the desired deployment kind between <code>deployment</code> or <code>knative-service</code> when creating the resources for running the integration.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>deployment</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Creates a standard Kubernetes deployment for running the integration. <br> <br> It&#8217;s enabled by default on vanilla Kubernetes/Openshift profiles.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Allows to constrain which nodes the integration pod(s) are eligible to be scheduled on, based on labels on the node, or with inter-pod affinity and anti-affinity, based on labels on pods that are already running on the nodes. <br> <br> It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.pod-affinity</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Always co-locates multiple replicas of the integration in the same node (default <code>false</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.pod-affinity-labels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Defines a set of pods (namely those matching the label selector, relative to the given namespace) that the integration pod(s) should be co-located with.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.pod-anti-affinity</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Never co-locates multiple replicas of the integration in the same node (default <code>false</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.pod-anti-affinity-labels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Defines a set of pods (namely those matching the label selector, relative to the given namespace) that the integration pod(s) should not be co-located with.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>affinity.node-affinity-labels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Defines a set of nodes the integration pod(s) are eligible to be scheduled on, based on labels on the node.</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Examples:</p> </div> <div class="ulist"> <ul> <li> <p>To schedule the integration pod(s) on a specific node using the <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#interlude-built-in-node-labels">built-in node label</a> <code>kubernetes.io/hostname</code>:</p> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kamel run -t affinity.node-affinity-labels="kubernetes.io/hostname in(node-66-50.hosted.k8s.tld)" ...</code></pre> </div> </div> </li> <li> <p>To schedule a single integration pod per node (using the <code>Exists</code> operator):</p> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kamel run -t affinity.node-anti-affinity-labels="camel.apache.org/integration" ...</code></pre> </div> </div> </li> <li> <p>To co-locate the integration pod(s) with other integration pod(s):</p> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kamel run -t affinity.node-affinity-labels="camel.apache.org/integration in(it1, it2)" ...</code></pre> </div> </div> </li> </ul> </div> <div class="paragraph"> <p>The labels options follow the requirements from <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors">Label selectors</a>. They can be multi-valuated, then the requirements list is ANDed, e.g., to schedule a single integration pod per node AND not co-located with the Camel K operator pod(s):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kamel run -t affinity.node-anti-affinity-labels="camel.apache.org/integration" -t affinity.node-anti-affinity-labels="camel.apache.org/component=operator" ...</code></pre> </div> </div> <div class="paragraph"> <p>More information can be found in the official Kubernetes documentation about <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/">Assigning Pods to Nodes</a>.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Knative (Kubernetes, OpenShift)</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Creates Knative resources to run the integration instead of the standard Kubernetes resources. <br> <br> It&#8217;s enabled by default when the Knative profile is active.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative.channel-sources</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures a (comma-separated) list of channels to which the Knative service must be subscribed (to receive cloudevents from a channel).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative.channel-sinks</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures a (comma-separated) list of channels to which the Knative service publishes.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative.endpoint-sources</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures a (comma-separated) list of endpoints the Knative service exposes (the name is).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative.endpoint-sinks</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures a (comma-separated) list of endpoints the Knative consumes.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>knative.filter-source-channels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Force the knative endpoint to filter messages based on the <code>ce-knativehistory</code> header (Knative experimental feature). It&#8217;s enabled automatically when there are more than 2 source channels. It&#8217;s optional (default to false) when there&#8217;s a single source channel.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>istio</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Allows to configure outbound traffic for Istio. <br> <br> It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>istio.allow</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures a (comma-separated) list of CIDR subnets that should not be intercepted by the Istio proxy (<code>10.0.0.0/8,172.16.0.0/12,192.168.0.0/16</code> by default).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>istio.inject</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Forces the value for labels <code>sidecar.istio.io/inject</code>. By default the label is set to <code>true</code> on deployment and not set on Knative Service.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>service</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All (Knative in deployment mode)</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Exposes the integration with a Service resource so that it can be accessed by other applications (or integrations) in the same namespace. <br> <br> It&#8217;s enabled by default if the integration depends on a Camel component that can expose a HTTP endpoint.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>route</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Exposes the service associated with the integration to the outside world with a OpenShift Route. <br> <br> It&#8217;s enabled by default whenever a Service is added to the integration (through the <code>service</code> trait).</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>route.host</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure the host exposed by the route.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ingress</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Exposes the service associated with the integration to the outside world with a Kubernetes Ingress. <br> <br> It&#8217;s enabled by default whenever a Service is added to the integration (through the <code>service</code> trait).</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ingress.host</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong>. To configure the host exposed by the ingress.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>debug</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Run the integration in debug mode (you can port-forward to port 5005 to connect) <br> <br> It&#8217;s disabled by default.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Activate and configures the Jolokia Java agent. <br> <br> It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.protocol</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The protocol to use, either <code>http</code> or <code>https</code> (default <code>https</code> for OpenShift)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.host</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Host address to which the Jolokia agent should bind to. If <code>"*"</code> or <code>"0.0.0.0"</code> is given, the servers binds to every network interface (default <code>"*"</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.port</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Jolokia endpoint port (default <code>8778</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.user</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The user to be used for authentication</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.password</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The password used for authentication, applicable when the <code>user</code> option is set</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.discovery-enabled</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Listen for multicast requests (default <code>false</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.use-ssl-client-authentication</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether client certificates should be used for authentication (default <code>true</code> for OpenShift)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.ca-cert</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The PEM encoded CA certification file path, used to verify client certificates, applicable when <code>protocol</code> is <code>https</code> and <code>use-ssl-client-authentication</code> is <code>true</code> (default <code>/var/run/secrets/kubernetes.io/serviceaccount/ca.crt</code> for OpenShift).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.client-principal</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The principal which must be given in a client certificate to allow access to the Jolokia endpoint, applicable when <code>protocol</code> is <code>https</code> and <code>use-ssl-client-authentication</code> is <code>true</code> (default <code>clientPrincipal=cn=system:master-proxy</code> for OpenShift).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.extended-client-check</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Mandate the client certificate contains a client flag in the extended key usage section, applicable when <code>protocol</code> is <code>https</code> and <code>use-ssl-client-authentication</code> is <code>true</code> (default <code>true</code> for OpenShift).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>jolokia.options</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A comma-separated list of additional Jolokia options as defined in <a href="https://jolokia.org/reference/html/agents.html#agent-jvm-config">JVM agent configuration options</a>, e.g.: <code>keystore=&#8230;&#8203;,executor=&#8230;&#8203;</code></p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Exposes the integration with a <code>Service</code> and a <code>ServiceMonitor</code> resources so that the Prometheus endpoint can be scraped.</p> </div> <div class="admonitionblock warning"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Creating the <code>ServiceMonitor</code> resource requires the <a href="https://github.com/coreos/prometheus-operator">Prometheus Operator</a> custom resource definition to be installed. You can set <code>service-monitor</code> to <code>false</code> for the Prometheus trait to work without the Prometheus operator. </td> </tr> </table></div> </div> <div class="paragraph"> <p>It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus.port</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Prometheus endpoint port (default <code>9778</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus.service-monitor</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether a <code>ServiceMonitor</code> resource is created (default <code>true</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>prometheus.service-monitor-labels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The <code>ServiceMonitor</code> resource labels, applicable when <code>service-monitor</code> is <code>true</code>.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>camel</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Resolve Camel version <br> <br> It&#8217;s enabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>camel.version</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The camel version to use for the integration, it overrides the default version set in the Integration Platform</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes, OpenShift</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Configure Liveness and Readiness probes. <br> <br> It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.bind-host</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures the host on which the probe is exposed (default <code>0.0.0.0</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.bind-port</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Configures the port on which the probe is exposed (default <code>8080</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.path</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Path to access on the probe ( default <code>/health</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.liveness-initial-delay</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds after the container has started before liveness probes are initiated.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.liveness-timeout</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds after which the probe times out.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.liveness-period</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">How often to perform the probe.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.liveness-success-threshold</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Minimum consecutive successes for the probe to be considered successful after having failed.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.liveness-failure-threshold</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Minimum consecutive failures for the probe to be considered failed after having succeeded.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.readiness-initial-delay</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds after the container has started before liveness probes are initiated.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.readiness-timeout</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds after which the probe times out.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.readiness-period</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">How often to perform the probe.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.readiness-success-threshold</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Minimum consecutive successes for the probe to be considered successful after having failed.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>probes.readiness-failure-threshold</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Minimum consecutive failures for the probe to be considered failed after having succeeded.</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Configure integration contianer. <br> <br> It&#8217;s disabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.request-cpu</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The minimum amount of CPU required.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.request-memory</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The minimum amount of memory required.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.limit-cpu</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The maximum amount of CPU required.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.limit-memory</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The maximum amount of memory required.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.service-port</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure under which service port the container port is to be exposed (default <code>80</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.service-port-name</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure under which service port name the container port is to be exposed (default <code>http</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.port</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure a different port exposed by the container (default <code>8080</code>).</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>container.port-name</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure a different port name for the port exposed by the container (default <code>http</code>).</p></td> </tr> </tbody> </table></div></div></td> </tr> </tbody> </table></div> </div> </div> <div class="sect1"> <h2 id="_platform_traits_advanced"><a class="anchor" href="#_platform_traits_advanced"></a>Platform Traits (Advanced)</h2> <div class="sectionbody"> <div class="paragraph"> <p>There are also platform traits that <strong>normally should not be configured</strong> by the end user. So change them <strong>only if you know what you&#8217;re doing</strong>.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Trait</th> <th class="tableblock halign-left valign-top">Profiles</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>owner</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Ensures that all created resources belong to the integration being created (so they are deleted when the integration is deleted) and transfers annotations and labels on the integration onto these owned resources. <br> <br> It&#8217;s enabled by default.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>owner.target-annotations</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The annotations to be transferred (A comma-separated list of label keys)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>owner.target-labels</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The labels to be transferred (A comma-separated list of label keys)</p></td> </tr> </tbody> </table></div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>gc</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Garbage collect resources that are no longer necessary upon integration updates. <br> <br> It&#8217;s enabled by default.</p> </div></div></td> </tr> </tbody> </table></div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> <dd><a href="../../community/camel-extra/">Camel extra</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel K",
        "item": "https://camel.apache.org/camel-k/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Traits","item": "https://camel.apache.org/camel-k/latest/traits.html"}
        ]
    } </script> </body> </html> 