<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Master Trait - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/latest/traits/master.html"> <meta name="generator" content="Antora 2.3.0-beta.2"> <link rel="stylesheet" href="../../../_/css/site-b9ce9dcf2e.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../../.."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item navbar-topics" href="../../../blog/">Blog</a> <a class="navbar-item navbar-topics" href="../../../projects/">Projects</a> <a class="navbar-item navbar-topics" href="../../../docs/">Documentation</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../../community/support/">Support</a> <a class="navbar-item" href="../../../manual/latest/contributing.html">Contributing</a> <a class="navbar-item" href="../../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../../community/articles/">Articles</a> <a class="navbar-item" href="../../../community/books/">Books</a> <a class="navbar-item" href="../../../community/team/">Team</a> </div> </div> <a class="navbar-item navbar-topics" href="../../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div id="social-media" class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#gitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="../index.html">Apache Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../installation/installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/minikube.html">Minikube</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/minishift.html">Minishift</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/gke.html">Google Kubernetes Engine (GKE)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/openshift.html">OpenShift</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../installation/registry/registry.html">Configuring Registry</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/registry/dockerhub.html">Docker Hub</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/registry/github.html">Github Packages</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/registry/gcr.html">Gcr.io</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../running/running.html">Running</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/dev-mode.html">Dev Mode</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/configmap-secret.html">ConfigMap/Secret</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="traits.html">Traits</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="3scale.html">3scale</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="affinity.html">Affinity</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="builder.html">Builder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel.html">Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="container.html">Container</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="cron.html">Cron</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="deployer.html">Deployer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="deployment.html">Deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="environment.html">Environment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="gc.html">Gc</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="ingress.html">Ingress</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="istio.html">Istio</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jolokia.html">Jolokia</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jvm.html">Jvm</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="knative-service.html">Knative Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="knative.html">Knative</a> </li> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="master.html">Master</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="openapi.html">Openapi</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="owner.html">Owner</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="platform.html">Platform</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="prometheus.html">Prometheus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pull-secret.html">Pull Secret</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="quarkus.html">Quarkus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route.html">Route</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="service.html">Service</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/kotlin.html">Kotlin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/javascript.html">JavaScript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/xml.html">XML</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="../tutorials/tutorials.html">Tutorials</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../tutorials/tekton/tekton.html">Tekton Pipelines</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../developers.html">Contributing to Camel K</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel K</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component is-current"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="../index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel Karaf</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../camel-karaf/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Components</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../../components/3.2.x/index.html">3.2.x</a> </li> <li class="version"> <a href="../../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../camel-kafka-connector/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Quarkus Extensions</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Spring Boot Starters</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../camel-spring-boot/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../index.html">Apache Camel K</a></li> <li><a href="traits.html">Traits</a></li> <li><a href="master.html">Master</a></li> </ul> </nav> <div> <label id="toggle-width-label" for="toggle-width">Wide / Narrow</label> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/master/docs/modules/ROOT/pages/traits/master.adoc">Edit this Page</a></div> </div> <input type="checkbox" id="toggle-width"> <article class="doc"> <h1 class="page">Master Trait</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>The Master trait allows to configure the integration to automatically leverage Kubernetes resources for doing leader election and starting <strong>master</strong> routes only on certain instances.</p> </div> <div class="paragraph"> <p>It&#8217;s activated automatically when using the master endpoint in a route, e.g. <code>from("master:lockname:telegram:bots")&#8230;&#8203;</code>.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this trait adds special permissions to the integration service account in order to read/write configmaps and read pods. It&#8217;s recommended to use a different service account than "default" when running the integration. </td> </tr> </table></div> </div> <div class="paragraph"> <p>This trait is available in the following profiles: <strong>Kubernetes, Knative, OpenShift</strong>.</p> </div> </div> </div> <div class="sect1"> <h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>Trait properties can be specified when running any integration with the CLI:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>kamel run --trait master.[key]=[value] --trait master.[key2]=[value2] integration.groovy</code></pre> </div> </div> <div class="paragraph"> <p>The following configuration options are available:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Property</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.enabled</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Can be used to enable or disable a trait. All traits share this common property.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.auto</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Enables automatic configuration of the trait.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.include-delegate-dependencies</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>When this flag is active, the operator analyzes the source code to add dependencies required by delegate endpoints. E.g. when using <code>master:lockname:timer</code>, then <code>camel:timer</code> is automatically added to the set of dependencies. It&#8217;s enabled by default.</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.configmap</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Name of the configmap that will be used to store the lock. Defaults to "&lt;integration-name&gt;-lock".</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.label-key</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Label that will be used to identify all pods contending the lock. Defaults to "camel.apache.org/integration".</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">master.label-value</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>Label value that will be used to identify all pods contending the lock. Defaults to the integration name.</p> </div></div></td> </tr> </tbody> </table></div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../../blog/">Blog</a></dd> <dd><a href="../../../components/latest/">Components</a></dd> <dd><a href="../../../download/">Download</a></dd> <dd><a href="../../../manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="../../../manual/latest/faq/index.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="https://www.apache.org/foundation/policies/conduct">Code of conduct</a> </dd><dd><a href="../../../community/support/">Support</a></dd> <dd><a href="../../../manual/latest/contributing.html">Contributing</a></dd> <dd><a href="../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../community/articles/">Articles</a></dd> <dd><a href="../../../community/books/">Books</a></dd> <dd><a href="../../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2020 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../../_/js/vendor/algoliasearch-1c1c4d8ac7.js"></script> <script src="../../../_/js/site-50cbbf152a.js"></script> <script async src="../../../_/js/vendor/highlight-bcd7ee9b3e.js"></script> <script async src="../../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel K",
        "item": "https://camel.apache.org/camel-k/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Traits","item": "https://camel.apache.org/camel-k/latest/traits/traits.html"}
        ,
        {
        "@type": "ListItem",
        "position": 4,
        "name": "Master","item": "https://camel.apache.org/camel-k/latest/traits/master.html"}
        ]
    } </script> </body> </html> 