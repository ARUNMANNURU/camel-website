<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>User guide - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-quarkus/latest/user-guide.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-7d9877dbe0.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../news/">News</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> <a class="navbar-item" href="../../community/camel-extra/">Camel extra</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-quarkus" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">Apache Camel extensions for Quarkus</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="user-guide.html">User guide</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="contributor-guide.html">Contributor guide</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="list-of-camel-quarkus-extensions.html">List of Camel Quarkus extensions</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel extensions for Quarkus</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component is-current"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Apache Camel extensions for Quarkus</a></li> <li><a href="user-guide.html">User guide</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel-quarkus/edit/master/docs/modules/ROOT/pages/user-guide.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">User guide</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This guide is for developers writing Camel applications on top of Quarkus.</p> </div> <div class="admonitionblock warning"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Camel extensions for Quarkus is a new project and this guide is a work in progress. <a href="https://github.com/apache/camel-quarkus/issues">Issue reports</a> and fixes are welcome. </td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_which_camel_components_are_supported_on_quarkus"><a class="anchor" href="#_which_camel_components_are_supported_on_quarkus"></a>Which Camel components are supported on Quarkus?</h2> <div class="sectionbody"> <div class="paragraph"> <p>The answer is very easy: those ones that have a Quarkus extension - see the <a href="list-of-camel-quarkus-extensions.html" class="page">complete list</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="_your_first_application"><a class="anchor" href="#_your_first_application"></a>Your first application</h2> <div class="sectionbody"> <div class="paragraph"> <p>As long as we do not have self-contained examples, we can only offer some of the Camel Quarkus integration tests as a replacement. Only a few manual steps are needed to turn e.g. the servlet integration test into a standalone application that can further serve as a base for your real world project.</p> </div> <div class="sect2"> <h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3> <div class="paragraph"> <p>To transform one of our integration tests to a standalone example, you need:</p> </div> <div class="ulist"> <ul> <li> <p>A <code>git</code> client</p> </li> <li> <p>An IDE</p> </li> <li> <p>JDK 1.8+ with JAVA_HOME configured appropriately</p> </li> <li> <p>Apache Maven 3.5.3+</p> </li> <li> <p>Docker or GraalVM with <code>native-image</code> installed for the native mode, see <a href="https://quarkus.io/guides/building-native-image-guide">Building a native executable</a> section of the Quarkus documentation.</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_turn_the_servlet_integration_test_into_a_standalone_application"><a class="anchor" href="#_turn_the_servlet_integration_test_into_a_standalone_application"></a>Turn the servlet integration test into a standalone application</h3> <div class="olist arabic"> <ol class="arabic"> <li> <p>Clone Camel Quarkus and checkout the latest release tag</p> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git clone https://github.com/apache/camel-quarkus.git
cd camel-quarkus
# checkout the latest tag
git checkout $(git describe --abbrev=0)</code></pre> </div> </div> </li> <li> <p>Copy the servlet integration test out of the Camel Quarkus source tree.</p> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">cd ..
cp -r camel-quarkus/integration-tests/servlet/ .
cd servlet</code></pre> </div> </div> </li> <li> <p>Open the <code>pom.xml</code> file in your IDE.</p> <div class="paragraph"> <p>Make sure that the parent is <code>org.apache.camel.quarkus:camel-quarkus-bom</code> and do the changes as sketched below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.apache.camel.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;camel-quarkus-bom&lt;/artifactId&gt;
        &lt;version&gt;0.1.0&lt;/version&gt;
        &lt;!-- &lt;relativePath&gt;../../bom/pom.xml&lt;/relativePath&gt; --&gt;<i class="conum" data-value="1"></i><b>(1)</b>
    &lt;/parent&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.my-org&lt;/groupId&gt;<i class="conum" data-value="2"></i><b>(2)</b>
    &lt;artifactId&gt;my-app&lt;/artifactId&gt;<i class="conum" data-value="3"></i><b>(3)</b>
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;<i class="conum" data-value="4"></i><b>(4)</b>

    ...

&lt;/project&gt;</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Remove the <code>&lt;relativePath&gt;</code> element.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Add a <code>groupId</code> of your choice.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>Change the <code>artifactId</code> to whatever you like</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>Add the <code>version</code></td> </tr> </table></div> </div> </li> </ol> </div> </div> <div class="sect2"> <h3 id="_explore_the_application_code"><a class="anchor" href="#_explore_the_application_code"></a>Explore the application code</h3> <div class="paragraph"> <p>The application has just two compile dependencies:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;camel-quarkus-servlet&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;camel-quarkus-rest&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>They are managed in <code>camel-quarkus-bom</code> that we use as the Maven parent. <code>camel-quarkus-bom</code> also manages plugins necessary for a typical Camel Quarkus application.</p> </div> <div class="paragraph"> <p>There are only two classes in the application: <code>CamelRoute</code> defining the Camel routes and <code>CustomServlet</code>.</p> </div> <div class="paragraph"> <p><code>src/main/resources/application.properties</code> configure the application. E.g. the <code>CustomServlet</code> is set there to serve the requests for the path <code>/my-named-folder/*</code>.</p> </div> <div class="paragraph"> <p>There are two test classes there: <code>CamelServletTest</code> is for the JVM mode while <code>CamelServletIT</code> is there for the native mode.</p> </div> <div class="paragraph"> <p>The JVM mode tests are run by <code>maven-surefire-plugin</code> in the <code>test</code> Maven phase:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn clean test</code></pre> </div> </div> <div class="paragraph"> <p>This should take about half a minute.</p> </div> <div class="paragraph"> <p>The native mode tests are verified by <code>maven-failsafe-plugin</code> in the <code>verify</code> phase. Pass the <code>native</code> property to activate the profile that runs them:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn clean verify -Dnative -Dnative-image.docker-build=true -Dnative-image.xmx=5g</code></pre> </div> </div> <div class="paragraph"> <p>This takes about three minutes.</p> </div> </div> <div class="sect2"> <h3 id="_run_the_application"><a class="anchor" href="#_run_the_application"></a>Run the application</h3> <div class="sect3"> <h4 id="_jvm_mode"><a class="anchor" href="#_jvm_mode"></a>JVM mode</h4> <div class="paragraph"> <p><code>mvn package</code> prepares a thin <code>jar</code> for running on a stock JVM:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn clean package
ls -lh target
...
-rw-r--r--. 1 ppalaga ppalaga 157K Aug  9 18:55  my-app-0.0.1-SNAPSHOT-runner.jar
...</code></pre> </div> </div> <div class="paragraph"> <p>You can run it as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -jar target/*-runner.jar
...
[io.quarkus] (main) Quarkus 0.20.0 started in 0.805s. Listening on: http://[::]:8080</code></pre> </div> </div> <div class="paragraph"> <p>Notice the boot time under a second.</p> </div> <div class="paragraph"> <p>The thin <code>jar</code> contains just the application code. To run it, the dependencies in <code>target/lib</code> are required too.</p> </div> </div> <div class="sect3"> <h4 id="_native_mode"><a class="anchor" href="#_native_mode"></a>Native mode</h4> <div class="paragraph"> <p>To prepare a native executable using GraalVM, run the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">mvn clean package -Dnative -Dnative-image.docker-build=true -Dnative-image.xmx=5g
ls -lh target
...
-rwxr-xr-x. 1 ppalaga ppalaga  32M Aug  9 18:57  my-app-0.0.1-SNAPSHOT-runner
...</code></pre> </div> </div> <div class="paragraph"> <p>Note that the <code>runner</code> in the listing above has no <code>.jar</code> extension and has the <code>x</code> (executable) permission set. Thus it can be run directly:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">./target/*-runner
...
[io.quarkus] (main) Quarkus 0.20.0 started in 0.017s. Listening on: http://[::]:8080
...</code></pre> </div> </div> <div class="paragraph"> <p>Check how fast it started and check how little memory it consumes:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">ps -o rss,command -p $(pgrep my-app)
  RSS COMMAND
21932 ./target/my-app-0.0.1-SNAPSHOT-runner</code></pre> </div> </div> <div class="paragraph"> <p>That&#8217;s under 22 MB of RAM!</p> </div> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../news/">News</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> <dd><a href="../../community/camel-extra/">Camel extra</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel extensions for Quarkus",
        "item": "https://camel.apache.org/camel-quarkus/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "User guide","item": "https://camel.apache.org/camel-quarkus/latest/user-guide.html"}
        ]
    } </script> </body> </html> 