<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>SIP Component - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/components/latest/sip-component.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-1c739ae396.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 3 Migration Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="components" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-explore is-active" data-panel="explore"> <div class="context"> <span class="title">Component reference</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> <li class="version"> <a href="../2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Component reference</a></li> <li><a href="sip-component.html">SIP Component</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" title="Show other versions of page" type="button">latest</button> <div class="version-menu"> <a class="version is-current" href="sip-component.html">latest</a> <a class="version" href="../2.x/sip-component.html">2.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/components/camel-sip/src/main/docs/sip-component.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">SIP Component</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel version 2.5</strong></p> </div> <div class="paragraph"> <p>The SIP component in Camel is a communication component, based on the Jain SIP implementation (available under the JCP license).</p> </div> <div class="paragraph"> <p>Session Initiation Protocol (SIP) is an IETF-defined signaling protocol, widely used for controlling multimedia communication sessions such as voice and video calls over Internet Protocol (IP).The SIP protocol is an Application Layer protocol designed to be independent of the underlying transport layer; it can run on Transmission Control Protocol (TCP), User Datagram Protocol (UDP) or Stream Control Transmission Protocol (SCTP).</p> </div> <div class="paragraph"> <p>The Jain SIP implementation supports TCP and UDP only.</p> </div> <div class="paragraph"> <p>The Camel SIP component <strong>only</strong> supports the SIP Publish and Subscribe capability as described in the <a href="http://www.ietf.org/rfc/rfc3903.txt">RFC3903 - Session Initiation Protocol (SIP) Extension for Event</a></p> </div> <div class="paragraph"> <p>This camel component supports both producer and consumer endpoints.</p> </div> <div class="paragraph"> <p>Camel SIP Producers (Event Publishers) and SIP Consumers (Event Subscribers) communicate event &amp; state information to each other using an intermediary entity called a SIP Presence Agent (a stateful brokering entity).</p> </div> <div class="paragraph"> <p>For SIP based communication, a SIP Stack with a listener <strong>must</strong> be instantiated on both the SIP Producer and Consumer (using separate ports if using localhost). This is necessary in order to support the handshakes &amp; acknowledgements exchanged between the SIP Stacks during communication.</p> </div> <div class="paragraph"> <p>Maven users will need to add the following dependency to their <code>pom.xml</code> for this component:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-sip&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_uri_format"><a class="anchor" href="#_uri_format"></a>URI format</h2> <div class="sectionbody"> <div class="paragraph"> <p>The URI scheme for a sip endpoint is as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sip://johndoe@localhost:99999[?options]
sips://johndoe@localhost:99999/[?options]</code></pre> </div> </div> <div class="paragraph"> <p>This component supports producer and consumer endpoints for both TCP and UDP.</p> </div> <div class="paragraph"> <p>You can append query options to the URI in the following format, <code>?option=value&amp;option=value&amp;&#8230;&#8203;</code></p> </div> </div> </div> <div class="sect1"> <h2 id="_options"><a class="anchor" href="#_options"></a>Options</h2> <div class="sectionbody"> <div class="paragraph"> <p>The SIP Component offers an extensive set of configuration options &amp; capability to create custom stateful headers needed to propagate state via the SIP protocol.</p> </div> <div class="paragraph"> <p>The SIP component supports 1 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>basicPropertyBinding</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the component should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>The SIP endpoint is configured using URI syntax:</p> </div> <div class="listingblock"> <div class="content"> <pre>sip:uri</pre> </div> </div> <div class="paragraph"> <p>with the following path and query parameters:</p> </div> <div class="sect2"> <h3 id="_path_parameters_1_parameters"><a class="anchor" href="#_path_parameters_1_parameters"></a>Path Parameters (1 parameters):</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> URI of the SIP server to connect to (the username and password can be included such as: john:secretmyserver:9999)</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">URI</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_query_parameters_46_parameters"><a class="anchor" href="#_query_parameters_46_parameters"></a>Query Parameters (46 parameters):</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cacheConnections</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Should connections be cached by the SipStack to reduce cost of connection creation. This is useful if the connection is used for long running conversations.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contentSubType</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for contentSubType can be set to any valid MimeSubType.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">plain</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contentType</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for contentType can be set to any valid MimeType.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">text</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eventHeaderName</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for a String based event type.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eventId</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for a String based event Id. Mandatory setting unless a registry based FromHeader is specified</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fromHost</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Hostname of the message originator. Mandatory setting unless a registry based FromHeader is specified</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fromPort</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Port of the message originator. Mandatory setting unless a registry based FromHeader is specified</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fromUser</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Username of the message originator. Mandatory setting unless a registry based custom FromHeader is specified.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>msgExpiration</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time a message received at an endpoint is considered valid</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">3600</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>receiveTimeoutMillis</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for specifying amount of time to wait for a Response and/or Acknowledgement can be received from another SIP stack</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">10000</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>stackName</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of the SIP Stack instance associated with an SIP Endpoint.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">NAME_NOT_SET</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>toHost</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Hostname of the message receiver. Mandatory setting unless a registry based ToHeader is specified</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>toPort</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Portname of the message receiver. Mandatory setting unless a registry based ToHeader is specified</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>toUser</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Username of the message receiver. Mandatory setting unless a registry based custom ToHeader is specified.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>transport</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for choice of transport protocol. Valid choices are tcp or udp.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">tcp</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bridgeErrorHandler</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>consumer</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This setting is used to determine whether the kind of header (FromHeader,ToHeader etc) that needs to be created for this endpoint</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>presenceAgent</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This setting is used to distinguish between a Presence Agent &amp; a consumer. This is due to the fact that the SIP Camel component ships with a basic Presence Agent (for testing purposes only). Consumers have to set this flag to true.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>exceptionHandler</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this option is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExceptionHandler</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>exchangePattern</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the exchange pattern when the consumer creates an exchange.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExchangePattern</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lazyStartProducer</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camel&#8217;s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>addressFactory</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom AddressFactory</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">AddressFactory</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>basicPropertyBinding</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the endpoint should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>callIdHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing call details. Must implement the type javax.sip.header.CallIdHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">CallIdHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contactHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">An optional custom Header object containing verbose contact details (email, phone number etc). Must implement the type javax.sip.header.ContactHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ContactHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contentTypeHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing message content details. Must implement the type javax.sip.header.ContentTypeHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ContentTypeHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eventHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing event details. Must implement the type javax.sip.header.EventHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">EventHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expiresHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing message expiration details. Must implement the type javax.sip.header.ExpiresHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExpiresHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extensionHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing user/application specific details. Must implement the type javax.sip.header.ExtensionHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExtensionHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fromHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing message originator settings. Must implement the type javax.sip.header.FromHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">FromHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>headerFactory</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom HeaderFactory</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">HeaderFactory</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>listeningPoint</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom ListeningPoint implementation</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ListeningPoint</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxForwardsHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing details on maximum proxy forwards. This header places a limit on the viaHeaders possible. Must implement the type javax.sip.header.MaxForwardsHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">MaxForwardsHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxMessageSize</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting for maximum allowed Message size in bytes.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">1048576</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>messageFactory</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom MessageFactory</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">MessageFactory</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sipFactory</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom SipFactory to create the SipStack to be used</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">SipFactory</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sipStack</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom SipStack</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">SipStack</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sipUri</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom SipURI. If none configured, then the SipUri fallback to use the options toUser toHost:toPort</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">SipURI</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>synchronous</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>toHeader</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A custom Header object containing message receiver settings. Must implement the type javax.sip.header.ToHeader</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ToHeader</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>viaHeaders</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">List of custom Header objects of the type javax.sip.header.ViaHeader. Each ViaHeader containing a proxy address for request forwarding. (Note this header is automatically updated by each proxy when the request arrives at its listener)</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>implementationDebugLogFile</strong> (logging)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of client debug log file to use for logging</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>implementationServerLogFile</strong> (logging)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of server log file to use for logging</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>implementationTraceLevel</strong> (logging)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Logging level for tracing</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxForwards</strong> (proxy)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of maximum proxy forwards</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>useRouterForAllUris</strong> (proxy)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">This setting is used when requests are sent to the Presence Agent via a proxy.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> </tbody> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_spring_boot_auto_configuration"><a class="anchor" href="#_spring_boot_auto_configuration"></a>Spring Boot Auto-Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>When using Spring Boot make sure to use the following Maven dependency to have support for auto configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-sip-starter&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
  &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The component supports 2 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.sip.basic-property-binding</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the component should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.sip.enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Enable sip component</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> </tbody> </table></div> </div> </div> <div class="sect1"> <h2 id="_sending_messages_tofrom_a_sip_endpoint"><a class="anchor" href="#_sending_messages_tofrom_a_sip_endpoint"></a>Sending Messages to/from a SIP endpoint</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_creating_a_camel_sip_publisher"><a class="anchor" href="#_creating_a_camel_sip_publisher"></a>Creating a Camel SIP Publisher</h3> <div class="paragraph"> <p>In the example below, a SIP Publisher is created to send SIP Event publications to <br> a user "agent@localhost:5152". This is the address of the SIP Presence Agent which acts as a broker between the SIP Publisher and Subscriber</p> </div> <div class="ulist"> <ul> <li> <p>using a SIP Stack named client</p> </li> <li> <p>using a registry based eventHeader called evtHdrName</p> </li> <li> <p>using a registry based eventId called evtId</p> </li> <li> <p>from a SIP Stack with Listener set up as user2@localhost:3534</p> </li> <li> <p>The Event being published is EVENT_A</p> </li> <li> <p>A Mandatory Header called REQUEST_METHOD is set to Request.Publish thereby setting up the endpoint as a Event publisher"</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">producerTemplate.sendBodyAndHeader(
    "sip://agent@localhost:5152?stackName=client&amp;eventHeaderName=evtHdrName&amp;eventId=evtid&amp;fromUser=user2&amp;fromHost=localhost&amp;fromPort=3534",
    "EVENT_A",
    "REQUEST_METHOD",
    Request.PUBLISH);</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_creating_a_camel_sip_subscriber"><a class="anchor" href="#_creating_a_camel_sip_subscriber"></a>Creating a Camel SIP Subscriber</h3> <div class="paragraph"> <p>In the example below, a SIP Subscriber is created to receive SIP Event publications sent to <br> a user "johndoe@localhost:5154"</p> </div> <div class="ulist"> <ul> <li> <p>using a SIP Stack named Subscriber</p> </li> <li> <p>registering with a Presence Agent user called agent@localhost:5152</p> </li> <li> <p>using a registry based eventHeader called evtHdrName. The evtHdrName contains the Event which is se to "Event_A"</p> </li> <li> <p>using a registry based eventId called evtId</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder() {
        @Override
        public void configure() throws Exception {
            // Create PresenceAgent
            from("sip://agent@localhost:5152?stackName=PresenceAgent&amp;presenceAgent=true&amp;eventHeaderName=evtHdrName&amp;eventId=evtid")
                .to("mock:neverland");

            // Create Sip Consumer(Event Subscriber)
            from("sip://johndoe@localhost:5154?stackName=Subscriber&amp;toUser=agent&amp;toHost=localhost&amp;toPort=5152&amp;eventHeaderName=evtHdrName&amp;eventId=evtid")
                .to("log:ReceivedEvent?level=DEBUG")
                .to("mock:notification");

        }
    };
}</code></pre> </div> </div> <div class="paragraph"> <p><strong>The Camel SIP component also ships with a Presence Agent that is meant to be used for Testing and Demo purposes only.</strong> An example of instantiating a Presence Agent is given above.</p> </div> <div class="paragraph"> <p>Note that the Presence Agent is set up as a user agent@localhost:5152 and is capable of communicating with both Publisher as well as Subscriber. It has a separate SIP stackName distinct from Publisher as well as Subscriber. While it is set up as a Camel Consumer, it does not actually send any messages along the route to the endpoint "mock:neverland".</p> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Component reference",
        "item": "https://camel.apache.org/components/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "SIP Component","item": "https://camel.apache.org/components/latest/sip-component.html"}
        ]
    } </script> </body> </html> 