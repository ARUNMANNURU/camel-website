<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/staging/manual/latest/annotation-based-expression-language.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="../.." title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="../../">Home</a><a class="navbar-item" href="../../news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="../../projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="../../docs/getting-started/">Getting started</a><a class="navbar-item" href="../../manual/latest/">User manual</a><a class="navbar-item" href="../../components/latest/">Component reference</a><a class="navbar-item" href="../../camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="../../community/support/">Support</a><a class="navbar-item" href="../..https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="../../community/user-stories/">User stories</a><a class="navbar-item" href="../../community/articles/">Articles</a><a class="navbar-item" href="../../community/books/">Books</a><a class="navbar-item" href="../../community/team/">Team</a><a class="navbar-item" href="../../community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="../../download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="../..https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="../..https://www.apache.org/licenses/">License</a><a class="navbar-item" href="../../security/">Security</a><a class="navbar-item" href="../..https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="../..https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/annotation-based-expression-language.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect2"><h3 id="AnnotationBasedExpressionLanguage-AnnotationBasedExpressionLanguage"><a class="anchor" href="#AnnotationBasedExpressionLanguage-AnnotationBasedExpressionLanguage"></a>Annotation Based Expression Language</h3><div class="paragraph"><p>You can also use any of the<a href="languages.adoc">Languages</a>supported in Camel to bind expressions to method parameters when using<a href="bean-integration.adoc">Bean Integration</a>. For example you can use any of these annotations:</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Annotation</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@Bean</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject a<a href="#bean-language">Bean</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@Constant</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject a<a href="#constant-language">Constant</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@EL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject an<a href="#el-language">EL</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@Groovy</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject a<a href="#groovy-language">Groovy</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@Header</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject a<a href="#header-language">Header</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@MVEL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject a<a href="#mvel-language">MVEL</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@OGNL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject an<a href="#ognl-language">OGNL</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@Simple</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject an<a href="#simple-language">Simple</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@XPath</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject an<a href="#xpath-language">XPath</a>expression</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">@XQuery</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Inject an<a href="#xquery-language">XQuery</a>expression</p></td></tr></tbody></table><div class="sect4"><h5 id="AnnotationBasedExpressionLanguage-Example"><a class="anchor" href="#AnnotationBasedExpressionLanguage-Example"></a>Example</h5><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Foo {

    @MessageDriven(uri = "activemq:my.queue")
    public void doSomething(@XPath("/foo/bar/text()") String correlationID, @Body String body) {
        // process the inbound message here
    }
}</code></pre></div></div></div><div class="sect4"><h5 id="AnnotationBasedExpressionLanguage-AdvancedexampleusingBean"><a class="anchor" href="#AnnotationBasedExpressionLanguage-AdvancedexampleusingBean"></a>Advanced example using @Bean</h5><div class="paragraph"><p>And an example of using the the @Bean binding annotation, where you can use a<a href="#bean-component">POJO</a>where you can do whatever java code you like:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Foo {

    @MessageDriven(uri = "activemq:my.queue")
    public void doSomething(@Bean("myCorrelationIdGenerator") String correlationID, @Body String body) {
        // process the inbound message here
    }
}</code></pre></div></div><div class="paragraph"><p>And then we can have a spring bean with the id<code>myCorrelationIdGenerator</code>where we can compute the id.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyIdGenerator {

    private UserManager userManager;

    public String generate(@Header(name = "user") String user, @Body String payload) throws Exception {
       User user = userManager.lookupUser(user);
       String userId = user.getPrimaryId();
       String id = userId + generateHashCodeForPayload(payload);
       return id;
   }
}</code></pre></div></div><div class="paragraph"><p>The<a href="#bean-component">POJO</a><code>MyIdGenerator</code>has one public method that accepts two parameters. However we have also annotated this one with the<code>@Header</code>and<code>@Body</code>annotation to help Camel know what to bind here from the Message from the Exchange being processed.</p></div><div class="paragraph"><p>Of course this could be simplified a lot if you for instance just have a simple id generator. But we wanted to demonstrate that you can use the<a href="bean-binding.adoc">Bean Binding</a>annotations anywhere.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MySimpleIdGenerator {

    public static int generate()  {
       // generate a unique id
       return 123;
   }
}</code></pre></div></div><div class="paragraph"><p>And finally we just need to remember to have our bean registered in the Spring<a href="registry.adoc">Registry</a>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">   &lt;bean id="myCorrelationIdGenerator" class="com.mycompany.MySimpleIdGenerator"/&gt;</code></pre></div></div></div><div class="sect4"><h5 id="AnnotationBasedExpressionLanguage-ExampleusingGroovy"><a class="anchor" href="#AnnotationBasedExpressionLanguage-ExampleusingGroovy"></a>Example using<a href="#groovy-language">Groovy</a></h5><div class="paragraph"><p>In this example we have an Exchange that has a User object stored in the in header. This User object has methods to get some user information. We want to use &lt;&lt;groovy.adoc[Groovy] to inject an expression that extracts and concats the fullname of the user into the fullName parameter.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    public void doSomething(@Groovy("$request.header['user'].firstName $request.header['user'].familyName) String fullName, @Body String body) {
        // process the inbound message here
    }</code></pre></div></div><div class="paragraph"><p>Groovy supports GStrings that is like a template where we can insert $ placeholders that will be evaluated by Groovy.</p></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>