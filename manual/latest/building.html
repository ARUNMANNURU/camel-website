<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/building.html"><meta name="generator" content="Antora 2.0.0-rc.1"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar"><div class="navbar-brand"><a class="navbar-item" href="https://camel.apache.org">Apache Camel</a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="#">Home</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Products</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Product A</a><a class="navbar-item" href="#">Product B</a><a class="navbar-item" href="#">Product C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Services</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Service A</a><a class="navbar-item" href="#">Service B</a><a class="navbar-item" href="#">Service C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Resources</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Resource A</a><a class="navbar-item" href="#">Resource B</a><a class="navbar-item" href="#">Resource C</a></div></div><div class="navbar-item"><span class="control"><a class="button is-primary" href="#">Download</a></span></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li><li class="nav-item" data-depth="2"><button class="nav-toggle"></button><span class="nav-text">Scala DSL</span><ul class="nav-list"><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl.html">About the Scala DSL</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-getting-started.html">Getting Started</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-eip.html">EIP</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-supported-languages.html">Supported languages</a></li></ul></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav></div><article class="doc"><div class="sect2"><h3 id="Building-BuildingCamelfromSource"><a class="anchor" href="#Building-BuildingCamelfromSource"></a>Building Camel from Source</h3><div class="paragraph"><p>Camel uses<a href="http://maven.apache.org/">Maven</a>as its build and management tool. If you don&#8217;t fancy using Maven you can use your IDE directly or Download a distribution or JAR.</p></div><div class="sect3"><h4 id="Building-Prequisites"><a class="anchor" href="#Building-Prequisites"></a>Prequisites</h4><div class="paragraph"><p><strong>Required:</strong></p></div><div class="ulist"><ul><li><p>Java</p><div class="ulist"><ul><li><p>1.7 or 1.8 to build Camel 2.14 onwards</p></li><li><p>1.8 to build Camel 2.18 onwards</p></li></ul></div></li><li><p><a href="https://github.com/takari/maven-wrapper">Maven Wrapper</a>is used and bundled with Camel 2.21 onwards.</p></li><li><p>Otherwise,<a href="http://maven.apache.org/download.html">download and install Maven</a></p><div class="ulist"><ul><li><p>Maven 3.1.1 or newer is required to build Camel 2.14 onwards</p></li><li><p>Maven 3.2.5 or newer is required to build Camel 2.18 onwards</p></li><li><p>Maven 3.3.3 or newer is required to build Camel 2.20 onwards</p></li></ul></div></li><li><p>Get the latest source from<a href="https://github.com/apache/camel/">Github</a></p></li></ul></div><div class="paragraph"><p><strong>Optional:</strong></p></div><div class="ulist"><ul><li><p><a href="http://www.princexml.com/download/">Prince</a>should be in the executable PATH to generate the PDF documentation</p></li></ul></div></div><div class="sect3"><h4 id="Building-Mavenoptions"><a class="anchor" href="#Building-Mavenoptions"></a>Maven options</h4><div class="paragraph"><p>To build camel maven has to be configured to use more memory</p></div><div id="Building-UnixLinuxMac" class="paragraph"><p>Unix/Linux/Mac</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">export MAVEN_OPTS="-Xms2048m -Xmx3584m"</code></pre></div></div><div id="Building-Windows" class="paragraph"><p>Windows</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">set MAVEN_OPTS="-Xms2048m -Xmx3584m"</code></pre></div></div></div><div class="sect3"><h4 id="Building-Anormalbuild"><a class="anchor" href="#Building-Anormalbuild"></a>A normal build</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn clean install</code></pre></div></div></div><div class="sect3"><h4 id="Building-Anormalbuildwithoutrunningtests"><a class="anchor" href="#Building-Anormalbuildwithoutrunningtests"></a>A quick build without running tests</h4><div class="paragraph"><p>The following skips building the manual, the distro and does not execute the unit tests.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn clean install -Pfastinstall</code></pre></div></div></div><div class="sect3"><h4 id="Building-Anormalbuildwithoutrunningtestsbutcheckstyleverificationenabled"><a class="anchor" href="#Building-Anormalbuildwithoutrunningtestsbutcheckstyleverificationenabled"></a>A normal build without running tests but checkstyle verification enabled</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn clean install -Pfastinstall,sourcecheck</code></pre></div></div></div><div class="sect3"><h4 id="Building-UsinganIDE"><a class="anchor" href="#Building-UsinganIDE"></a>Using an IDE</h4><div class="paragraph"><p>If you prefer to use an IDE then you can auto-generate the IDE&#8217;s project files using maven plugins. e.g.</p></div><div class="sect4"><h5 id="Building-IntelliJ"><a class="anchor" href="#Building-IntelliJ"></a>IntelliJ</h5><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn idea:idea</code></pre></div></div></div><div class="sect4"><h5 id="Building-Eclipse"><a class="anchor" href="#Building-Eclipse"></a>Eclipse</h5><div class="paragraph"><p>There are several ways to import the projects into Eclipse.</p></div><div id="Building-m2e" class="paragraph"><p>m2e</p></div><div class="paragraph"><p>Starting with Camel 2.14.0, Camel can be imported into Eclipse using m2e Maven integration.</p></div><div class="paragraph"><p>Before you start: It is important to run Eclipse with at least 4 GB of heap memory, otherwise the import process will fail. To increase the heap size, edit the "eclipse.ini" file and set the -Xmx parameter as follows:</p></div><div class="paragraph"><p><strong>eclipse.ini</strong></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">[...]
-Xms4G
-Xmx4G</code></pre></div></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">For a better experience some users set 8 GB when all projects are loaded and opened.</td></tr></table></div><div id="Building-CloningtheGitRepository" class="paragraph"><p>Cloning the Git Repository</p></div><div class="paragraph"><p>Either follow instructions about getting the latest source, or clone the Git repository with Eclipse by selecting<strong>File &#8594; Import &#8594; Git / Projects from Git</strong>and<strong>Clone URI</strong>. Provide all repository details in the import wizard and clone the repository into a directory outside of the Eclipse workspace. Once cloning has completed, exit the import project wizard (i.e. simply select cancel when asked to select "Wizard for project import").</p></div><div id="Building-ImportMavenProjects" class="paragraph"><p>Import Maven Projects</p></div><div class="paragraph"><p>Import Camel projects as Maven projects using m2e by selecting<strong>File &#8594; Import &#8594; Maven &#8594; Existing Maven Projects</strong>. Point the wizard to the root directory of the cloned repository. Eclipse will analyze all Camel projects and eventually present the following summary:</p></div><div class="paragraph"><p><span class="image"><img src="_images/building.data/camel-eclipse-m2e-import.png" alt="image"></span></p></div><div class="paragraph"><p>Simply confirm the import of all projects by clicking<strong>Finish</strong>. The import process will create Eclipse projects and automatically set up build paths using dependency details provided by the pom.xml files. Once completed, all Camel projects will be available in your workspace:</p></div><div class="paragraph"><p><span class="image"><img src="_images/building.data/camel-eclipse-m2e-import-completed.png" alt="image"></span></p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">As you can see main project is combined with multiple sub projects/modules (e.g. components, archetypes, tooling etc.). Many sub projects/modules are again categorized or packaged with another layer of sub modules and so on. Developers can import project/module which is relevant to them and work on it instead importing entire project which will consume memory and eventually slow down Eclipse. This approach is not only easy to import and work in eclipse as well as easy to test. Lets say you do some code changes in the camel-ftp component, then you can run the checks from within this directory.</td></tr></table></div><div id="Building-maven-eclipse-plugin" class="paragraph"><p>maven-eclipse-plugin</p></div><div class="paragraph"><p>The maven-eclipse-plugin can be used to generate the .classpath/.project/.settings file that Eclipse need. To do this, run:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn process-test-sources eclipse:eclipse</code></pre></div></div><div class="paragraph"><p>or</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn -Psetup.eclipse -Declipse.workspace.dir=/path/to/your/workspace</code></pre></div></div><div class="paragraph"><p>The latter is recommended as it would completely setup the workspace for you as well as provide options to wire in other projects also found in your workspace.</p></div><div class="paragraph"><p>After running the above command, from within Eclipse, do<strong>File &#8594; Import &#8594; Existing Projects into Workspace</strong>, select the root camel checkout location and Eclipse should find all the projects.</p></div><div id="Building-AddingCamelEclipsetemplatestoyourworkspace" class="paragraph"><p>Adding Camel Eclipse templates to your workspace</p></div><div class="paragraph"><p>The above mentioned setup.eclipse profile does a few additional things to your workspace:</p></div><div class="olist arabic"><ol class="arabic"><li><p>Adds the Camel code templates (see<a href="http://janstey.blogspot.com/2008/08/eclipse-templates-for-apache-camel.html">here</a>)</p></li><li><p>Sets the M2_REPO variable in the workspace that points to your local Maven repository (i.e.,<code>~/.m2/repository</code>on Unix and<code>c:\Documents and Settings\&lt;user&gt;\.m2\repository</code>on Windows) which allows the jars to be resolved.</p></li></ol></div><div class="paragraph"><p>[[Building-Hint:specifytheworkspacelocationinyour.m2/settings.xml]] Hint: specify the workspace location in your .m2/settings.xml</p></div><div class="paragraph"><p>You can add a profile to your .m2/settings.xml to specify your eclipse workspace location so you can avoid having to type that each time you need to update the projects.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;id&gt;setup.eclipse&lt;/id&gt;
        &lt;properties&gt;
            &lt;eclipse.workspace&gt;/path/to/your/workspace&lt;/eclipse.workspace&gt;
        &lt;/properties&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;</code></pre></div></div></div></div><div class="sect3"><h4 id="Building-Buildingwithcheckstyle"><a class="anchor" href="#Building-Buildingwithcheckstyle"></a>Building with checkstyle</h4><div class="paragraph"><p>To enable source style checking with checkstyle, build Camel with the -Psourcecheck parameter</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn -Psourcecheck clean install</code></pre></div></div></div><div class="sect3"><h4 id="Building-Buildingsourcejars"><a class="anchor" href="#Building-Buildingsourcejars"></a>Building source jars</h4><div class="paragraph"><p>If you want to build jar files with the source code, that for instance Eclipse can important so you can debug the Camel code as well. Then you can run this command from the camel root folder:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn clean source:jar install -Pfastinstall</code></pre></div></div></div><div class="sect3"><h4 id="Building-Workingwithkaraffeatures"><a class="anchor" href="#Building-Workingwithkaraffeatures"></a>Working with karaf features</h4><div class="paragraph"><p>If you change anything in the features.xml from<code>platform/karaf</code>you can run a validation step to ensure the generated features.xml file is correct. You can do this running the following maven goal from the<code>platform</code>directory.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn clean install -Pvalidate</code></pre></div></div></div><div class="sect3"><h4 id="Building-ExecutingunittestsusingEkstazi"><a class="anchor" href="#Building-ExecutingunittestsusingEkstazi"></a>Executing unit tests using Ekstazi</h4><div class="paragraph"><p>Normally, when you execute the unit tests during your development cycle for a particular component, you are executing all the tests each time. This may become inefficient, when you are changing one class and the effect of this change is limited within the component having many unit tests. Ekstazi is a regression testing tool that can keep track of the test results and the changed classes so that unaffected tests can be skipped during the subsequent testing. For more details of Ekstazi, please refer to the Ekstazi page at http://www.ekstazi.org[<a href="http://www.ekstazi.org" class="bare">http://www.ekstazi.org</a>].</p></div><div class="paragraph"><p>To use Ekstazi, you can run the tests with the maven profile ekstazi.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mvn test -Pekstazi</code></pre></div></div></div><div class="sect3"><h4 id="Building-SeeAlso"><a class="anchor" href="#Building-SeeAlso"></a>See Also</h4><div class="ulist"><ul><li><p>Running Unit Tests</p></li><li><p>Source</p></li><li><p>Examples</p></li></ul></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>