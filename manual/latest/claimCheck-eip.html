<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/staging/manual/latest/claimCheck-eip.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="../.." title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="../../">Home</a><a class="navbar-item" href="../../news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="../../projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="../../docs/getting-started/">Getting started</a><a class="navbar-item" href="../../manual/latest/">User manual</a><a class="navbar-item" href="../../components/latest/">Component reference</a><a class="navbar-item" href="../../camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="../../community/support/">Support</a><a class="navbar-item" href="../..https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="../../community/user-stories/">User stories</a><a class="navbar-item" href="../../community/articles/">Articles</a><a class="navbar-item" href="../../community/books/">Books</a><a class="navbar-item" href="../../community/team/">Team</a><a class="navbar-item" href="../../community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="../../download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="../..#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="../..https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="../..https://www.apache.org/licenses/">License</a><a class="navbar-item" href="../../security/">Security</a><a class="navbar-item" href="../..https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="../..https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="transformer.html">Transformer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="validator.html">Validator</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Supported expression languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="constant-language.html">Constant Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchangeProperty-language.html">ExchangeProperty Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="file-language.html">File Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="header-language.html">Header Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="ref-language.html">Ref Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="simple-language.html">Simple Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="tokenize-language.html">Tokenize Language</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="aggregate-eip.html">Aggregate EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-config-eip.html">Batch-config EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-eip.html">Bean EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="choice-eip.html">Choice EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="circuitBreaker-eip.html">Circuit Breaker EIP (deprecated)</a></li><li class="nav-item is-current-page" data-depth="2"><a class="nav-link" href="claimCheck-eip.html">Claim Check EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="content-based-router-eip.html">Content Based Router</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="content-filter-eip.html">Content Filter</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="convertBodyTo-eip.html">Convert Body To EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="customLoadBalancer-eip.html">Custom Load Balancer EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-eip.html">Delay EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dynamic-router.html">Dynamic Router</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dynamicRouter-eip.html">Dynamic Router EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="enrich-eip.html">Enrich EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="eventDrivenConsumer-eip.html">Event Driven Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="failover-eip.html">Failover EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="filter-eip.html">Filter EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="from-eip.html">From EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="hystrix-eip.html">Hystrix EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="hystrixConfiguration-eip.html">Hystrix Configuration EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="idempotentConsumer-eip.html">Idempotent Consumer EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inOnly-eip.html">In Only EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inOut-eip.html">In Out EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="loadBalance-eip.html">Load Balance EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="log-eip.html">Log EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="loop-eip.html">Loop EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="marshal-eip.html">Marshal EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="multicast-eip.html">Multicast EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="onFallback-eip.html">On Fallback EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="otherwise-eip.html">Otherwise EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="pipeline-eip.html">Pipeline EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="pollEnrich-eip.html">Poll Enrich EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="process-eip.html">Process EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="random-eip.html">Random EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="recipientList-eip.html">Recipient List EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="removeHeader-eip.html">Remove Header EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="removeHeaders-eip.html">Remove Headers EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="removeProperties-eip.html">Remove Properties EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="removeProperty-eip.html">Remove Property EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="requestReply-eip.html">Request Reply</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="resequence-eip.html">Resequence EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="rollback-eip.html">Rollback EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="roundRobin-eip.html">Round Robin EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routingSlip-eip.html">Routing Slip EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="saga-eip.html">Saga EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="sample-eip.html">Sample EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="script-eip.html">Script EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="serviceCall-eip.html">Service Call EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="setBody-eip.html">Set Body EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="setFaultBody-eip.html">Set Fault Body EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="setHeader-eip.html">Set Header EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="setOutHeader-eip.html">Set Out Header EIP (deprecated)</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="setProperty-eip.html">Set Property EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="sort-eip.html">Sort EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="split-eip.html">Split EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="step-eip.html">Step EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="sticky-eip.html">Sticky EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="stop-eip.html">Stop EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="stream-config-eip.html">Stream-config EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="threads-eip.html">Threads EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="throttle-eip.html">Throttle EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="to-eip.html">To EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="toD-eip.html">To D EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="topic-eip.html">Topic EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="transform-eip.html">Transform EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="unmarshal-eip.html">Unmarshal EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="validate-eip.html">Validate EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="weighted-eip.html">Weighted EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="when-eip.html">When EIP</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="wireTap-eip.html">Wire Tap EIP</a></li></ul></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"><ul><li class="crumb"><a href="index.html">User manual</a></li><li class="crumb"><a href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a></li><li class="crumb"><a href="claimCheck-eip.html">Claim Check EIP</a></li></ul></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/claimCheck-eip.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect1"><h2 id="claimCheck-eip"><a class="anchor" href="#claimCheck-eip"></a>Claim Check EIP</h2><div class="sectionbody"><div class="paragraph"><p><strong>Available as of Camel 2.21</strong></p></div><div class="paragraph"><p>The<a href="http://www.enterpriseintegrationpatterns.com/patterns/messaging/StoreInLibrary.html">Claim Check</a>from the<a href="../../../../readme-eip.adoc">EIP patterns</a>allows you to replace message content with a claim check (a unique key), which can be used to retrieve the message content at a later time.</p></div><div class="paragraph"><p><span class="image"><img src="http://www.enterpriseintegrationpatterns.com/img/StoreInLibrary.gif" alt="image"></span></p></div><div class="paragraph"><p>It can also be useful in situations where you cannot trust the information with an outside party; in this case, you can use the Claim Check to hide the sensitive portions of data.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The Camel implementation of this EIP pattern stores the message content temporarily in an internal memory store.</td></tr></table></div><div class="paragraph"><p>The Claim Check EIP supports 5 options which are listed below:</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 20%;"><col style="width: 50%;"><col style="width: 10%;"><col style="width: 20%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-center valign-top">Default</th><th class="tableblock halign-left valign-top">Type</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operation</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong>The claim check operation to use. The following operations is supported: Get - Gets (does not remove) the claim check by the given key. GetAndRemove - Gets and remove the claim check by the given key. Set - Sets a new (will override if key already exists) claim check with the given key. Push - Sets a new claim check on the stack (does not use key). Pop - Gets the latest claim check from the stack (does not use key).</p></td><td class="tableblock halign-center valign-top"></td><td class="tableblock halign-left valign-top"><p class="tableblock">ClaimCheckOperation</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>key</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">To use a specific key for claim check id.</p></td><td class="tableblock halign-center valign-top"></td><td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>filter</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Specified a filter to control what data gets merging data back from the claim check repository. The following syntax is supported: body - to aggregate the message body attachments - to aggregate all the message attachments headers - to aggregate all the message headers header:pattern - to aggregate all the message headers that matches the pattern. The pattern uses the following rules are applied in this order: exact match, returns true wildcard match (pattern ends with a and the name starts with the pattern), returns true regular expression match, returns true otherwise returns false You can specify multiple rules separated by comma. For example to include the message body and all headers starting with foo body,header:foo. The syntax supports the following prefixes which can be used to specify include,exclude, or remove - to include (which is the default mode) - - to exclude (exclude takes precedence over include)&#8201;&#8212;&#8201;- to remove (remove takes precedence) For example to exclude a header name foo, and remove all headers starting with bar -header:foo,--headers:bar Note you cannot have both include and exclude header:pattern at the same time.</p></td><td class="tableblock halign-center valign-top"></td><td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>strategyRef</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">To use a custom AggregationStrategy instead of the default implementation. Notice you cannot use both custom aggregation strategy and configure data at the same time.</p></td><td class="tableblock halign-center valign-top"></td><td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>strategyMethodName</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">This option can be used to explicit declare the method name to use, when using POJOs as the AggregationStrategy.</p></td><td class="tableblock halign-center valign-top"></td><td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td></tr></tbody></table><div class="sect2"><h3 id="_claim_check_operation"><a class="anchor" href="#_claim_check_operation"></a>Claim Check Operation</h3><div class="paragraph"><p>When using this EIP you must specify the operation to use which can be of the following:</p></div><div class="ulist"><ul><li><p>Get - Gets (does not remove) the claim check by the given key.</p></li><li><p>GetAndRemove - Gets and remove the claim check by the given key.</p></li><li><p>Set - Sets a new (will override if key already exists) claim check with the given key.</p></li><li><p>Push - Sets a new claim check on the stack (does not use key).</p></li><li><p>Pop - Gets the latest claim check from the stack (does not use key).</p></li></ul></div><div class="paragraph"><p>When using the<code>Get</code>,<code>GetAndRemove</code>, or<code>Set</code>operation you must specify a key. These operations will then store and retrieve the data using this key. You can use this to store multiple data in different keys.</p></div><div class="paragraph"><p>The<code>Push</code>and<code>Pop</code>operations do<strong>not</strong>use a key but stores the data in a stack structure.</p></div></div><div class="sect2"><h3 id="_filter_what_data_to_merge_back"><a class="anchor" href="#_filter_what_data_to_merge_back"></a>Filter what data to merge back</h3><div class="paragraph"><p>The<code>filter</code>option is used to define what data to merge back when using the<code>Get</code>or<code>Pop</code>operation. When data is merged back then its merged using a<code>AggregationStrategy</code>. The default strategy uses the<code>filter</code>option to easily specify what data to merge back.</p></div><div class="paragraph"><p>The<code>filter</code>option takes a<code>String</code>value with the following syntax:</p></div><div class="ulist"><ul><li><p><code>body</code>= to aggregate the message body</p></li><li><p><code>attachments</code>= to aggregate all the message attachments</p></li><li><p><code>headers</code>= to aggregate all the message headers</p></li><li><p><code>header:pattern</code>= to aggregate all the message headers that matches the pattern.</p></li></ul></div><div class="paragraph"><p>The pattern rule supports wildcard and regular expression:</p></div><div class="ulist"><ul><li><p>wildcard match (pattern ends with a<code>*</code>and the name starts with the pattern)</p></li><li><p>regular expression match</p></li></ul></div><div class="paragraph"><p>You can specify multiple rules separated by comma.</p></div><div class="sect3"><h4 id="_basic_filter_examples"><a class="anchor" href="#_basic_filter_examples"></a>Basic filter examples</h4><div class="paragraph"><p>For example to include the message body and all headers starting with<em>foo</em>:</p></div><div class="listingblock"><div class="content"><pre>body,header:foo*</pre></div></div><div class="paragraph"><p>To only merge back the message body:</p></div><div class="listingblock"><div class="content"><pre>body</pre></div></div><div class="paragraph"><p>To only merge back the message attachments:</p></div><div class="listingblock"><div class="content"><pre>attachments</pre></div></div><div class="paragraph"><p>To only merge back headers:</p></div><div class="listingblock"><div class="content"><pre>headers</pre></div></div><div class="paragraph"><p>To only merge back a header name foo:</p></div><div class="listingblock"><div class="content"><pre>header:foo</pre></div></div><div class="paragraph"><p>If the filter rule is specified as empty or as wildcard then everything is merged.</p></div><div class="paragraph"><p>Notice that when merging back data, then any existing data is overwritten, and any other existing data is preserved.</p></div></div><div class="sect3"><h4 id="_fine_grained_filtering_with_include_and_explude_pattern"><a class="anchor" href="#_fine_grained_filtering_with_include_and_explude_pattern"></a>Fine grained filtering with include and explude pattern</h4><div class="paragraph"><p>The syntax also supports the following prefixes which can be used to specify include,exclude, or remove</p></div><div class="ulist"><ul><li><p><code>+</code>= to include (which is the default mode)</p></li><li><p><code>-</code>= to exclude (exclude takes precedence over include)</p></li><li><p><code>--</code>= to remove (remove takes precedence)</p></li></ul></div><div class="paragraph"><p>For example to skip the message body, and merge back everything else</p></div><div class="listingblock"><div class="content"><pre>-body</pre></div></div><div class="paragraph"><p>Or to skip the message header foo, and merge back everything else</p></div><div class="listingblock"><div class="content"><pre>-header:foo</pre></div></div><div class="paragraph"><p>You can also instruct to remove headers when merging data back, for example to remove all headers starting with<em>bar</em>:</p></div><div class="listingblock"><div class="content"><pre>--headers:bar*</pre></div></div><div class="paragraph"><p>Note you cannot have both include (<code>+</code>) and exclude (<code>-</code>)<code>header:pattern</code>at the same time.</p></div></div></div><div class="sect2"><h3 id="_java_examples"><a class="anchor" href="#_java_examples"></a>Java Examples</h3><div class="paragraph"><p>The following example shows the<code>Push</code>and<code>Pop</code>operations in action;</p></div><div class="listingblock"><div class="content"><pre>from("direct:start")
    .to("mock:a")
    .claimCheck(ClaimCheckOperation.Push)
    .transform().constant("Bye World")
    .to("mock:b")
    .claimCheck(ClaimCheckOperation.Pop)
    .to("mock:c");</pre></div></div><div class="paragraph"><p>For example if the message body from the beginning is<code>Hello World</code>then that data is pushed on the stack of the Claim Check EIP. And then the message body is transformed to<code>Bye World</code>, which is what<code>mock:b</code>endpoint receives. When we<code>Pop</code>from the Claim Check EIP then the original message body is retrieved and merged back so<code>mock:c</code>will retrieve the message body with<code>Hello World</code>.</p></div><div class="paragraph"><p>Here is an example using<code>Get</code>and<code>Set</code>operations, which uses the key<code>foo</code>:</p></div><div class="listingblock"><div class="content"><pre>from("direct:start")
    .to("mock:a")
    .claimCheck(ClaimCheckOperation.Set, "foo")
    .transform().constant("Bye World")
    .to("mock:b")
    .claimCheck(ClaimCheckOperation.Get, "foo")
    .to("mock:c")
    .transform().constant("Hi World")
    .to("mock:d")
    .claimCheck(ClaimCheckOperation.Get, "foo")
    .to("mock:e");</pre></div></div><div class="paragraph"><p>Notice how we can<code>Get</code>the same data twice using the<code>Get</code>operation as it will not remove the data. If you only want to get the data once, you can use<code>GetAndRemove</code>.</p></div><div class="paragraph"><p>The last example shows how to use the<code>filter</code>option where we only want to get back header named<code>foo</code>or<code>bar</code>:</p></div><div class="listingblock"><div class="content"><pre>from("direct:start")
    .to("mock:a")
    .claimCheck(ClaimCheckOperation.Push)
    .transform().constant("Bye World")
    .setHeader("foo", constant(456))
    .removeHeader("bar")
    .to("mock:b")
    // only merge in the message headers foo or bar
    .claimCheck(ClaimCheckOperation.Pop, null, "header:(foo|bar)")
    .to("mock:c");</pre></div></div></div><div class="sect2"><h3 id="_xml_examples"><a class="anchor" href="#_xml_examples"></a>XML examples</h3><div class="paragraph"><p>The following example shows the<code>Push</code>and<code>Pop</code>operations in action;</p></div><div class="listingblock"><div class="content"><pre>&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;to uri="mock:a"/&gt;
  &lt;claimCheck operation="Push"/&gt;
  &lt;transform&gt;
    &lt;constant&gt;Bye World&lt;/constant&gt;
  &lt;/transform&gt;
  &lt;to uri="mock:b"/&gt;
  &lt;claimCheck operation="Pop"/&gt;
  &lt;to uri="mock:c"/&gt;
&lt;/route&gt;</pre></div></div><div class="paragraph"><p>For example if the message body from the beginning is<code>Hello World</code>then that data is pushed on the stack of the Claim Check EIP. And then the message body is transformed to<code>Bye World</code>, which is what<code>mock:b</code>endpoint receives. When we<code>Pop</code>from the Claim Check EIP then the original message body is retrieved and merged back so<code>mock:c</code>will retrieve the message body with<code>Hello World</code>.</p></div><div class="paragraph"><p>Here is an example using<code>Get</code>and<code>Set</code>operations, which uses the key<code>foo</code>:</p></div><div class="listingblock"><div class="content"><pre>&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;to uri="mock:a"/&gt;
  &lt;claimCheck operation="Set" key="foo"/&gt;
  &lt;transform&gt;
    &lt;constant&gt;Bye World&lt;/constant&gt;
  &lt;/transform&gt;
  &lt;to uri="mock:b"/&gt;
  &lt;claimCheck operation="Get" key="foo"/&gt;
  &lt;to uri="mock:c"/&gt;
  &lt;transform&gt;
    &lt;constant&gt;Hi World&lt;/constant&gt;
  &lt;/transform&gt;
  &lt;to uri="mock:d"/&gt;
  &lt;claimCheck operation="Get" key="foo"/&gt;
  &lt;to uri="mock:e"/&gt;
&lt;/route&gt;</pre></div></div><div class="paragraph"><p>Notice how we can<code>Get</code>the same data twice using the<code>Get</code>operation as it will not remove the data. If you only want to get the data once, you can use<code>GetAndRemove</code>.</p></div><div class="paragraph"><p>The last example shows how to use the<code>filter</code>option where we only want to get back header named<code>foo</code>or<code>bar</code>:</p></div><div class="listingblock"><div class="content"><pre>&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;to uri="mock:a"/&gt;
  &lt;claimCheck operation="Push"/&gt;
  &lt;transform&gt;
    &lt;constant&gt;Bye World&lt;/constant&gt;
  &lt;/transform&gt;
  &lt;setHeader headerName="foo"&gt;
    &lt;constant&gt;456&lt;/constant&gt;
  &lt;/setHeader&gt;
  &lt;removeHeader headerName="bar"/&gt;
  &lt;to uri="mock:b"/&gt;
  &lt;!-- only merge in the message headers foo or bar --&gt;
  &lt;claimCheck operation="Pop" filter="header:(foo|bar)"/&gt;
  &lt;to uri="mock:c"/&gt;
&lt;/route&gt;</pre></div></div></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>