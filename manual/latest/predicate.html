<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/predicate.html"><meta name="generator" content="Antora 2.0.0-rc.1"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar"><div class="navbar-brand"><a class="navbar-item" href="https://camel.apache.org">Apache Camel</a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="#">Home</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Products</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Product A</a><a class="navbar-item" href="#">Product B</a><a class="navbar-item" href="#">Product C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Services</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Service A</a><a class="navbar-item" href="#">Service B</a><a class="navbar-item" href="#">Service C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Resources</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Resource A</a><a class="navbar-item" href="#">Resource B</a><a class="navbar-item" href="#">Resource C</a></div></div><div class="navbar-item"><span class="control"><a class="button is-primary" href="#">Download</a></span></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item is-current-page" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li><li class="nav-item" data-depth="2"><button class="nav-toggle"></button><span class="nav-text">Scala DSL</span><ul class="nav-list"><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl.html">About the Scala DSL</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-getting-started.html">Getting Started</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-eip.html">EIP</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-supported-languages.html">Supported languages</a></li></ul></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"><ul><li class="crumb"><a href="index.html">User manual</a></li><li class="crumb"><a href="architecture.html">Architecture</a></li><li class="crumb"><a href="predicate.html">Predicates</a></li></ul></nav></div><article class="doc"><div class="sect2"><h3 id="Predicate-Predicates"><a class="anchor" href="#Predicate-Predicates"></a>Predicates</h3><div class="paragraph"><p>Camel supports a pluggable interface called<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Predicate.html">Predicate</a>which can be used to integrate a dynamic predicate into<a href="enterprise-integration-patterns.adoc">Enterprise Integration Patterns</a>such as when using the<a href="#filter-eip">Message Filter</a>or<a href="#contentBasedRouter-eip">Content Based Router</a>.</p></div><div class="paragraph"><p>A Predicate is being evaluated to a boolean value so the result is either<code>true</code>or<code>false</code>. This makes<a href="predicate.adoc">Predicate</a>so powerful as it is often used to control the routing of message in which path they should be routed.</p></div><div class="paragraph"><p>A simple example is to route an<a href="exchange.adoc">Exchange</a>based on a header value:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jms:queue:order")
   .choice()
      .when(header("type").isEqualTo("widget")).to("bean:widgetOrder")
      .when(header("type").isEqualTo("wombat")).to("bean:wombatOrder")
   .otherwise()
      .to("bean:miscOrder")
   .end();</code></pre></div></div><div class="paragraph"><p>In the route above the<a href="predicate.adoc">Predicate</a>is the<code>header("type").isEqualTo("widget")</code>as its constructed as an<a href="expression.adoc">Expression</a>that is evaluated as a<a href="predicate.adoc">Predicate</a>. To do this the various Builder classes helps us here to create a nice and fluent syntax.<code>isEqualTo</code>is a builder method that returns a<a href="predicate.adoc">Predicate</a>based on the input.</p></div><div class="paragraph"><p>Sometimes the fluent builders can get long and a bit complex to read, then you can just define your predicate outside the route and then just refer to the predicate in the route:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Predicate isWidget = header("type").isEqualTo("widget");</code></pre></div></div><div class="paragraph"><p>And then you can refer to it in the route as:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jms:queue:order")
   .choice()
      .when(isWidget).to("bean:widgetOrder")
      .when(isWombat).to("bean:wombatOrder")
   .otherwise()
      .to("bean:miscOrder")
   .end();</code></pre></div></div><div class="sect3"><h4 id="Predicate-NegatingaPredicate"><a class="anchor" href="#Predicate-NegatingaPredicate"></a>Negating a Predicate</h4><div class="paragraph"><p>You can use the<strong>not</strong>method on the<code>PredicateBuilder</code>to negate a predicate.</p></div><div class="paragraph"><p>First we import the not static, so it makes our route nice and easy to read:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.apache.camel.builder.PredicateBuilder.not</code></pre></div></div><div class="paragraph"><p>And then we can use it to enclose an existing predicate and negate it as the example shows:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .choice()
        .when(not(header("username").regex("goofy|pluto"))).to("mock:people")
        .otherwise().to("mock:animals")
    .end();</code></pre></div></div></div><div class="sect3"><h4 id="Predicate-CompoundPredicates"><a class="anchor" href="#Predicate-CompoundPredicates"></a>Compound Predicates</h4><div class="paragraph"><p>You can also create compound predicates using boolean operators such as<code>and, or, not</code>and many others.</p></div><div class="paragraph"><p>Currently this feature is only available in the Java-based DSLs, but not in the Spring nor Blueprint DSLs.</p></div><div class="paragraph"><p>Using the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/builder/PredicateBuilder.html"><code>PredicateBuilder</code></a>class, you can combine predicates<strong>from different Expression Languages</strong>based on logical operators and comparison operators:</p></div><div class="ulist"><ul><li><p><code>not</code>,<code>and</code>,<code>or</code></p></li><li><p><code>isNull</code>,<code>isNotNull</code></p></li><li><p><code>isEqualTo</code>,<code>isGreaterThan</code>,<code>isLessThan</code></p></li><li><p><code>startsWith</code>,<code>endsWith</code></p></li><li><p><code>in</code>("any of X predicates stands true")</p></li></ul></div><div class="paragraph"><p>Additionally, with<code>PredicateBuilder</code>you can create Regular Expressions and use them as predicates, applying them to the result of an expression, e.g.<code>PredicateBuilder.regex(header("foo"), "\d{4}")</code>applies the regular expression to the header = foo.</p></div><div class="paragraph"><p>Combining different Expression Languages is also possible, e.g.:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PredicateBuilder.and(XPathBuilder.xpath("/bookings/flights"), simple("${property.country = 'Spain'}"))</code></pre></div></div><div class="paragraph"><p>The sample below demonstrates further use cases:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// We define 3 predicates based on some user roles
// we have static imported and/or from org.apache.camel.builder.PredicateBuilder

// First we have a regular user that is just identified having a username header
Predicate user = header("username").isNotNull();

// The admin user must be a user AND have a admin header as true
Predicate admin = and(user, header("admin").isEqualTo("true"));

// And God must be an admin and (either have type god or a special message containing Camel Rider)
Predicate god = and(admin, or(body().contains("Camel Rider"), header("type").isEqualTo("god")));

// As you can see with the predicates above we can stack them to build compound predicates

// In our route below we can create a nice content based router based on the predicates we
// have defined. Then the route is easy to read and understand.
// We encourage you to define complex predicates outside the fluent router builder as
// it will just get a bit complex for humans to read
from("direct:start").choice()
    .when(god).to("mock:god")
    .when(admin).to("mock:admin")
    .when(user).to("mock:user")
    .otherwise().to("mock:guest")
.end();</code></pre></div></div></div><div class="sect3"><h4 id="Predicate-ExtensiblePredicates"><a class="anchor" href="#Predicate-ExtensiblePredicates"></a>Extensible Predicates</h4><div class="paragraph"><p>Camel supports extensible Predicates using multiple<a href="languages.adoc">Languages</a>; the following languages are supported out of the box</p></div><div class="ulist"><ul><li><p><a href="bean-language.adoc">Bean Language</a>for using Java for expressions</p></li><li><p><a href="constant.adoc">Constant</a></p></li><li><p>the unified<a href="el.adoc">EL</a>from JSP and JSF</p></li><li><p><a href="header.adoc">Header</a></p></li><li><p><a href="jsonpath.adoc">JSonPath</a></p></li><li><p><a href="jxpath.adoc">JXPath</a></p></li><li><p><a href="mvel.adoc">Mvel</a></p></li><li><p><a href="ognl.adoc">OGNL</a></p></li><li><p><a href="ref-language.adoc">Ref Language</a></p></li><li><p><a href="exchangeproperty.adoc">ExchangeProperty</a>/ <a href="property.adoc">Property</a></p></li><li><p><a href="scripting-languages.adoc">Scripting Languages</a>such as</p><div class="ulist"><ul><li><p><a href="beanshell.adoc">BeanShell</a></p></li><li><p><a href="javascript.adoc">JavaScript</a></p></li><li><p><a href="groovy.adoc">Groovy</a></p></li><li><p><a href="python.adoc">Python</a></p></li><li><p><a href="php.adoc">PHP</a></p></li><li><p><a href="ruby.adoc">Ruby</a></p></li></ul></div></li><li><p><a href="simple.adoc">Simple</a></p><div class="ulist"><ul><li><p><a href="file-language.adoc">File Language</a></p></li></ul></div></li><li><p><a href="spel.adoc">Spring Expression Language</a></p></li><li><p><a href="sql.adoc">SQL</a></p></li><li><p><a href="tokenizer.adoc">Tokenizer</a></p></li><li><p><a href="xpath.adoc">XPath</a></p></li><li><p><a href="xquery.adoc">XQuery</a></p></li><li><p><a href="https://github.com/camel-extra/camel-extra/blob/master/components/camel-vtdxml/src/main/docs/vtdxml-component.adoc">VTD-XML</a></p></li></ul></div><div class="paragraph"><p>Most of these languages is also supported used as<a href="annotation-based-expression-language.adoc">Annotation Based Expression Language</a>.</p></div><div class="paragraph"><p>You can easily write your own plugin predicate by implementing the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Predicate.html">Predicate interface</a>.</p></div><div class="paragraph"><p>There are also a number of helper builders available such as the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/builder/PredicateBuilder.html">PredicateBuilder class</a></p></div></div><div class="sect3"><h4 id="Predicate-UsingPredicatesinyourIDE"><a class="anchor" href="#Predicate-UsingPredicatesinyourIDE"></a>Using Predicates in your IDE</h4><div class="paragraph"><p>To use different expression and predicates in your IDE you need to perform a static import of the builder class for the language(s) you wish to use.</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Language(s)</th><th class="tableblock halign-left valign-top">Builder class to import</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="scripting-languages.adoc">Scripting Languages</a>such as<a href="beanshell.adoc">BeanShell</a>,<a href="javascript.adoc">JavaScript</a>,<a href="groovy.adoc">Groovy</a>,<a href="php.adoc">PHP</a>,<a href="python.adoc">Python</a>and<a href="ruby.adoc">Ruby</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://camel.apache.org/maven/current/camel-script/apidocs/org/apache/camel/builder/script/ScriptBuilder.html">org.apache.camel.builder.script.ScriptBuilder</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="sql.adoc">SQL</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://camel.apache.org/maven/current/camel-josql/apidocs/org/apache/camel/builder/sql/SqlBuilder.html">org.apache.camel.builder.josql.SqlBuilder</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="xpath.adoc">XPath</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/builder/xml/XPathBuilder.html">org.apache.camel.builder.xml.XPathBuilder</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="xquery.adoc">XQuery</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://camel.apache.org/maven/current/camel-saxon/apidocs/org/apache/camel/builder/saxon/XQueryBuilder.html">org.apache.camel.builder.saxon.XQueryBuilder</a></p></td></tr></tbody></table></div><div class="sect3"><h4 id="Predicate-SeeAlso"><a class="anchor" href="#Predicate-SeeAlso"></a>See Also</h4><div class="ulist"><ul><li><p><a href="expression.adoc">Expression</a></p></li></ul></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>