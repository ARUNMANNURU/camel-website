<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/release-guide.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="https://camel.apache.org" title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="/projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="/docs/getting-started/">Getting started</a><a class="navbar-item" href="/manual/latest/">User manual</a><a class="navbar-item" href="/components/latest/">Component reference</a><a class="navbar-item" href="/camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="/community/support/">Support</a><a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="/community/user-stories/">User stories</a><a class="navbar-item" href="/community/articles/">Articles</a><a class="navbar-item" href="/community/books/">Books</a><a class="navbar-item" href="/community/team/">Team</a><a class="navbar-item" href="/community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="/download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="https://www.apache.org/licenses/">License</a><a class="navbar-item" href="https://www.apache.org/security/">Security</a><a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/release-guide.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect2"><h3 id="ReleaseGuide-ReleaseGuide"><a class="anchor" href="#ReleaseGuide-ReleaseGuide"></a>How to Create and Announce a Camel Release</h3><div class="sect3"><h4 id="ReleaseGuide-Prequisites"><a class="anchor" href="#ReleaseGuide-Prequisites"></a>Prequisites</h4><div class="paragraph"><p>To prepare or perform a release you<strong>must be</strong>at least an Apache Camel committer.</p></div><div class="ulist"><ul><li><p>The artifacts for each and every release must be<strong>signed</strong>.</p></li><li><p>Your public key must be added to the KEYS file.</p></li><li><p>Your public key should also be cross-signed by other Apache committers (this can be done at key signing parties at ApacheCon for instance).</p></li><li><p>Make sure you have the correct maven configuration in<code>~/.m2/settings.xml</code>.</p></li><li><p><a href="https://github.com/takari/maven-wrapper">Maven Wrapper</a>is used and bundled with Camel 2.21 onwards and should be used for building the release.</p></li><li><p>You may want to get familiar with the release settings in the parent Apache POM.</p></li><li><p>Make sure you are using Java 1.8 for Apache Camel 2.18.0 and later.</p></li></ul></div></div><div class="sect3"><h4 id="ReleaseGuide-MavenSetup"><a class="anchor" href="#ReleaseGuide-MavenSetup"></a>Maven Setup</h4><div class="paragraph"><p>Before you deploy anything to the<a href="https://repository.apache.org">Apache Nexus repository</a>using Maven, you should configure your<code>~/.m2/settings.xml</code>file so that the file permissions of the deployed artifacts are group writable. If you do not do this, other developers will not able to overwrite your SNAPSHOT releases with newer versions.</p></div><div class="paragraph"><p>The settings follow the guidelines used by the Maven project. Please pay particular attention to the<a href="http://maven.apache.org/guides/mini/guide-encryption.html">password encryption recommendations</a>.</p></div><div class="listingblock"><div class="content"><pre>&lt;settings&gt;
  ...
  &lt;servers&gt;
    &lt;!-- Per http://maven.apache.org/developers/committer-settings.html --&gt;

    &lt;!-- To publish a snapshot of some part of Maven --&gt;
    &lt;server&gt;
      &lt;id&gt;apache.snapshots.https&lt;/id&gt;
      &lt;username&gt; &lt;!-- YOUR APACHE LDAP USERNAME --&gt; &lt;/username&gt;
      &lt;password&gt; &lt;!-- YOUR APACHE LDAP PASSWORD --&gt; &lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- To publish a website of some part of Maven --&gt;
    &lt;server&gt;
      &lt;id&gt;apache.website&lt;/id&gt;
      &lt;username&gt; &lt;!-- YOUR APACHE LDAP USERNAME --&gt; &lt;/username&gt;
      &lt;filePermissions&gt;664&lt;/filePermissions&gt;
      &lt;directoryPermissions&gt;775&lt;/directoryPermissions&gt;
    &lt;/server&gt;
    &lt;!-- To stage a release of some part of Maven --&gt;
    &lt;server&gt;
      &lt;id&gt;apache.releases.https&lt;/id&gt;
      &lt;username&gt; &lt;!-- YOUR APACHE LDAP USERNAME --&gt; &lt;/username&gt;
      &lt;password&gt; &lt;!-- YOUR APACHE LDAP PASSWORD --&gt; &lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- To stage a website of some part of Maven --&gt;
    &lt;server&gt;
      &lt;id&gt;stagingSite&lt;/id&gt; &lt;!-- must match hard-coded repository identifier in site:stage-deploy --&gt;
      &lt;username&gt; &lt;!-- YOUR APACHE LDAP USERNAME --&gt; &lt;/username&gt;
      &lt;filePermissions&gt;664&lt;/filePermissions&gt;
      &lt;directoryPermissions&gt;775&lt;/directoryPermissions&gt;
    &lt;/server&gt;

  &lt;/servers&gt;
  ...
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;apache-release&lt;/id&gt;
      &lt;properties&gt;
        &lt;gpg.useagent&gt;false&lt;/gpg.useagent&gt;
        &lt;gpg.passphrase&gt;&lt;!-- YOUR GPG PASSPHRASE --&gt;&lt;/gpg.passphrase&gt;
        &lt;test&gt;false&lt;/test&gt;
      &lt;/properties&gt;
    &lt;/profile&gt;

  &lt;/profiles&gt;
...
&lt;/settings&gt;</pre></div></div></div><div class="sect3"><h4 id="ReleaseGuide-CreatingTheRelease"><a class="anchor" href="#ReleaseGuide-CreatingTheRelease"></a>Creating the Release</h4><div class="paragraph"><p>Complete the following steps to create a new Camel release:</p></div><div class="olist arabic"><ol class="arabic"><li><p>Grab the latest source from Git and checkout the target branch (<code>BRANCH_NAME</code>) to build from:</p></li></ol></div><div class="listingblock"><div class="content"><pre>$ git clone https://git-wip-us.apache.org/repos/asf/camel.git
$ cd camel
$ git checkout BRANCH_NAME</pre></div></div><div class="olist arabic"><ol class="arabic"><li><p>Perform a license check with<a href="http://creadur.apache.org/rat/apache-rat-plugin">Apache Rat</a>:</p></li></ol></div><div class="listingblock"><div class="content"><pre>./mvnw -e org.apache.rat:apache-rat-plugin:check
grep -e ' !?????' target/rat.txt</pre></div></div><div class="paragraph"><p>The latter command will provide a list of all files without valid license headers. Ideally this list is empty, otherwise fix the issues by adding valid license headers and rerun the above commands before proceeding with the next step.</p></div><div class="olist arabic"><ol class="arabic"><li><p>Do a release dry run to check for problems:</p></li></ol></div><div class="listingblock"><div class="content"><pre>./mvnw release:prepare -DdryRun -Prelease</pre></div></div><div class="paragraph"><p>The release plugin will prompt for a release version, an SCM tag and next release version.</p></div><div class="paragraph"><p>Use a three digit release version of the form:<code>MAJOR.MINOR.PATCH</code>, e.g.<code>3.0.0</code>.</p></div><div class="paragraph"><p>For the tag use a string of the form:<code>camel-MAJOR.MINOR.PATCH</code>, e.g.<code>camel-3.0.0</code>.</p></div><div class="paragraph"><p>For the next version increase the patch version and append<code>-SNAPSHOT</code>, e.g.<code>3.0.1-SNAPSHOT</code>.</p></div><div class="paragraph"><p>Make sure to check the generated signature files:</p></div><div class="listingblock"><div class="content"><pre>$ gpg camel-core/target/camel-core-3.0.0-SNAPSHOT.jar.asc
gpg: assuming signed data in `camel-core/target/camel-core-3.0.0.jar'
gpg: Signature made Sat 06 Apr 2019 03:58:01 AM PDT using RSA key ID 5942C049
gpg: Good signature from "Gregor Zurowski &lt;gzurowski@apache.org&gt;"</pre></div></div><div class="olist arabic"><ol class="arabic"><li><p>Prepare the release:</p></li></ol></div><div class="paragraph"><p>First clean up the dry run results:</p></div><div class="listingblock"><div class="content"><pre>$ ./mvnw release:clean -Prelease</pre></div></div><div class="paragraph"><p>Next prepare the release:</p></div><div class="listingblock"><div class="content"><pre>$ ./mvnw release:prepare -Prelease</pre></div></div><div class="paragraph"><p>This command will create the tag and update all pom files with the given version number.</p></div><div class="olist arabic"><ol class="arabic"><li><p>Perform the release and publish to the Apache staging repository:</p></li></ol></div><div class="listingblock"><div class="content"><pre>$ ./mvnw release:perform -Prelease</pre></div></div><div class="olist arabic"><ol class="arabic"><li><p>Close the Apache staging repository:</p></li></ol></div><div class="paragraph"><p>Login to<a href="https://repository.apache.org" class="bare">https://repository.apache.org</a>using your Apache LDAP credentials. Click on "Staging Repositories". Then select "org.apache.camel-xxx" in the list of repositories, where xxx represents your username and ip. Click "Close" on the tool bar above. This will close the repository from future deployments and make it available for others to view. If you are staging multiple releases together, skip this step until you have staged everything. Enter the name and version of the artifact being released in the "Description" field and then click "Close". This will make it easier to identify it later.</p></div><div class="olist arabic"><ol class="arabic"><li><p>Verify staged artifacts:</p></li></ol></div><div class="paragraph"><p>If you click on your repository, a tree view will appear below. You can then browse the contents to ensure the artifacts are as you expect them. Pay particular attention to the existence of *.asc (signature) files. If the you don&#8217;t like the content of the repository, right click your repository and choose "Drop". You can then rollback your release and repeat the process. Note the repository URL, you will need this in your vote email.</p></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>