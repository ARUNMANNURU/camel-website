<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Scala DSL - EIP :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/scala-dsl-eip.html"><meta name="generator" content="Antora 2.0.0-rc.1"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar"><div class="navbar-brand"><a class="navbar-item" href="https://camel.apache.org">Apache Camel</a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="#">Home</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Products</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Product A</a><a class="navbar-item" href="#">Product B</a><a class="navbar-item" href="#">Product C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Services</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Service A</a><a class="navbar-item" href="#">Service B</a><a class="navbar-item" href="#">Service C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Resources</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Resource A</a><a class="navbar-item" href="#">Resource B</a><a class="navbar-item" href="#">Resource C</a></div></div><div class="navbar-item"><span class="control"><a class="button is-primary" href="#">Download</a></span></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li><li class="nav-item" data-depth="2"><button class="nav-toggle"></button><span class="nav-text">Scala DSL</span><ul class="nav-list"><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl.html">About the Scala DSL</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-getting-started.html">Getting Started</a></li><li class="nav-item is-current-page" data-depth="3"><a class="nav-link" href="scala-dsl-eip.html">EIP</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-supported-languages.html">Supported languages</a></li></ul></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"><ul><li class="crumb"><a href="index.html">User manual</a></li><li class="crumb">Domain Specific Languages</li><li class="crumb">Scala DSL</li><li class="crumb"><a href="scala-dsl-eip.html">EIP</a></li></ul></nav></div><article class="doc"><h1>Scala DSL - EIP</h1><div id="preamble"><div class="sectionbody"><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p><strong>DSL supported</strong></p></div><div class="paragraph"><p>The Scala DSL supports<strong>every</strong>DSL from the Java DSL.</p></div><div class="paragraph"><p>On this page we have examples for a number of the EIPs.<br>You can check the<a href="https://svn.apache.org/repos/asf/camel/trunk/components/camel-scala/src/test/scala/">unit test source code</a>for the Scala Component to find more examples.</p></div></td></tr></table></div><div class="ulist"><ul><li><p>1<a href="#ScalaDSL-EIP-Messagingsystems">Messaging systems</a></p><div class="ulist"><ul><li><p>1.1<a href="#ScalaDSL-EIP-Pipelinepipeline">Pipeline</a></p></li><li><p>1.2<a href="#ScalaDSL-EIP-Filterfilter">Filter</a></p></li></ul></div></li><li><p>2<a href="#ScalaDSL-EIP-Messagingchannels">Messaging channels</a></p><div class="ulist"><ul><li><p>2.1<a href="#ScalaDSL-EIP-Deadletterchannel">Dead letter channel</a></p></li></ul></div></li><li><p>3<a href="#ScalaDSL-EIP-Messagerouting">Message routing</a></p><div class="ulist"><ul><li><p>3.1<a href="#ScalaDSL-EIP-Aggregator">Aggregator</a></p></li><li><p>3.2<a href="#ScalaDSL-EIP-Contentbasedrouter">Content based router</a></p></li><li><p>3.3<a href="#ScalaDSL-EIP-Delayer">Delayer</a></p></li><li><p>3.4<a href="#ScalaDSL-EIP-Loadbalancer">Load balancer</a></p></li><li><p>3.5<a href="#ScalaDSL-EIP-Multicast">Multicast</a></p></li><li><p>3.6<a href="#ScalaDSL-EIP-Recipientlist">Recipient list</a></p></li><li><p>3.7<a href="#ScalaDSL-EIP-Resequencer">Resequencer</a></p></li><li><p>3.8<a href="#ScalaDSL-EIP-Splitter">Splitter</a></p></li><li><p>3.9<a href="#ScalaDSL-EIP-Throttler">Throttler</a></p></li></ul></div></li><li><p>4<a href="#ScalaDSL-EIP-Messagetransformation">Message transformation</a></p><div class="ulist"><ul><li><p>4.1<a href="#ScalaDSL-EIP-Contentenricher">Content enricher</a></p></li></ul></div></li></ul></div></div></div><div class="sect1"><h2 id="ScalaDSL-EIP-Messagingsystems"><a class="anchor" href="#ScalaDSL-EIP-Messagingsystems"></a>Messaging systems</h2><div class="sectionbody"><div class="sect2"><h3 id="ScalaDSL-EIP-Pipelinepipeline"><a class="anchor" href="#ScalaDSL-EIP-Pipelinepipeline"></a>Pipeline</h3><div class="paragraph"><p>There is a simple syntax available for specifying pipeline, by simple putting<code>to</code>or<code>→</code>between the different steps in the pipeline.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" --&gt; "mock:a" --&gt; "mock:b"
"direct:c" to "mock:c" to "mock:d"</code></pre></div></div><div class="paragraph"><p>For more advanced use cases, you can also use a block-based syntax, where every step in the pipeline starts with either<code>to</code>or<code>→</code>.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:e" ==&gt; {
  --&gt; ("mock:e")
  --&gt; ("mock:f")
}

"direct:g" ==&gt; {
  to ("mock:g")
  to ("mock:h")
}</code></pre></div></div></div><div class="sect2"><h3 id="ScalaDSL-EIP-Filterfilter"><a class="anchor" href="#ScalaDSL-EIP-Filterfilter"></a>Filter</h3><div class="paragraph"><p>For a message filter, use the<code>when()</code>method with a parameter of type The<code>Exchange ⇒ Boolean</code>. In the example below, we use a Scala convenience method named<code>in</code>to access the<em>in</em>message body; only messages where the<em>in</em>message is<code>&lt;hello/&gt;</code>will arrive at the<code>mock:a</code>endpoint.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">"direct:a" when(_.in == "&lt;hello/&gt;") to("mock:a")</code></pre></div></div><div class="paragraph"><p>Once again, if you need to specify a more advanced route, you can use the more elaborate syntax.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:b" ==&gt; {
  when(_.in == "&lt;hallo/&gt;") {
    --&gt; ("mock:b")
    to ("mock:c")
  } otherwise {
    to ("mock:e")
  }
  to ("mock:d")
}</code></pre></div></div><div class="sect3"><h4 id="ScalaDSL-EIP-Messagingchannels"><a class="anchor" href="#ScalaDSL-EIP-Messagingchannels"></a>Messaging channels</h4><div class="sect4"><h5 id="ScalaDSL-EIP-Deadletterchannel"><a class="anchor" href="#ScalaDSL-EIP-Deadletterchannel"></a>Dead letter channel</h5><div class="paragraph"><p>The<a href="http://www.eaipatterns.com/DeadLetterChannel.html">dead letter channel</a>can be created with the syntax similar to the one used in<a href="http://camel.apache.org/dead-letter-channel.html">Java DSL</a>.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"jms:in" errorHandler(deadLetterChannel("jms:error")) to "jms:out"</code></pre></div></div><div class="paragraph"><p>You can also use different error handler available for the<a href="http://camel.apache.org/error-handler.html">Java DSL</a>. In particular Scala DSL supports<a href="http://camel.apache.org/defaulterrorhandler.html">DefaultErrorHandler</a>and<a href="http://camel.apache.org/error-handler.html#ErrorHandler-LoggingErrorHandler">LoggingErrorHandler</a>.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// DefaultErrorHandler
"jms:in" errorHandler(defaultErrorHandler) to "jms:out"

// LoggingErrorHandler
"jms:in" errorHandler(loggingErrorHandler.level(LoggingLevel.INFO).logName("com.example.MyLogger")) to "jms:out"</code></pre></div></div></div></div><div class="sect3"><h4 id="ScalaDSL-EIP-Messagerouting"><a class="anchor" href="#ScalaDSL-EIP-Messagerouting"></a>Message routing</h4><div class="sect4"><h5 id="ScalaDSL-EIP-Aggregator"><a class="anchor" href="#ScalaDSL-EIP-Aggregator"></a>Aggregator</h5><div class="paragraph"><p>The aggregator EIP aggregates messages based on some message correlation criteria. In the Scala DSL, the<code>aggregate</code>method takes a function<code>Exchange ⇒ Any</code>to determine the correlation value for the exchange. In the sample below, message are being aggregated if the first 7 letters in the message body are the same.</p></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Contentbasedrouter"><a class="anchor" href="#ScalaDSL-EIP-Contentbasedrouter"></a>Content based router</h5><div class="paragraph"><p>Similar to the Filter, the content based router uses<code>when</code>methods with<code>Exchange ⇒ Boolean</code>function literals and an optional<code>otherwise</code>. The function literal can contain plain Scala code as well as any of the<a href="scala-dsl-supported-languages.html">supported languages</a>. The example below routes a given message based on the language of the message body.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" ==&gt; {
 to ("mock:polyglot")
 choice {
    when (_.in == "&lt;hello/&gt;") to ("mock:english")
    when (_.in == "&lt;hallo/&gt;") {
      to ("mock:dutch")
      to ("mock:german")
    }
    otherwise to ("mock:french")
  }
}</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Delayer"><a class="anchor" href="#ScalaDSL-EIP-Delayer"></a>Delayer</h5><div class="paragraph"><p>Unlike a throttler, which only slows down messages if the rate exceeds a threshold, a delayer delays every messages with a fixed amount of time. An example: to delay every message going from<code>seda:a</code>to<code>mock:a</code>with 1 second, you write&#8230;&#8203;</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"seda:a" delay(1 seconds) to ("mock:a")</code></pre></div></div><div class="paragraph"><p>Our second example will delay the entire block (containing<code>mock:c</code>) without doing anything to<code>mock:b</code></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"seda:b" ==&gt; {
  to ("mock:b")
  delay(1 seconds) {
    to ("mock:c")
  }
}</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Loadbalancer"><a class="anchor" href="#ScalaDSL-EIP-Loadbalancer"></a>Load balancer</h5><div class="paragraph"><p>To distribute the message handling load over multiple endpoints, we add a<code>loadbalance</code>to our route definition. You can optionally specify a load balancer strategy, like<code>roundrobin</code></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" ==&gt; {
  loadbalance roundrobin {
    to ("mock:a")
    to ("mock:b")
    to ("mock:c")
  }
}</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Multicast"><a class="anchor" href="#ScalaDSL-EIP-Multicast"></a>Multicast</h5><div class="paragraph"><p>Multicast allows you to send a message to multiple endpoints at the same time. In a simple route, you can specify multiple targets in the<code>to</code>or<code>→</code>method call:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" --&gt; ("mock:a", "mock:b") --&gt; "mock:c"
"direct:d" to ("mock:d", "mock:e") to "mock:f"</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Recipientlist"><a class="anchor" href="#ScalaDSL-EIP-Recipientlist"></a>Recipient list</h5><div class="paragraph"><p>You can handle a static recipient list with a multicast or pipeline, but this EIP is usually applied when you want to dynamically determine the name(s) of the next endpoint(s) to route to. Use the<code>recipients()</code>method with a function literal (<code>Exchange =&gt; Any</code>) that returns the endpoint name(s). In the example below, the target endpoint name can be found in the String message starting at position 21.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" recipients(_.in[String].substring(21))</code></pre></div></div><div class="paragraph"><p>Because the<code>recipients()</code>method just takes a function literal, you can basically use any kind of valid Scala code to determine the endpoint name. Have a look at the next example which uses pattern matching to figure out where to send the message:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:b" recipients(_.getIn.getBody match {
  case Toddler(_) =&gt; "mock:playgarden"
  case _ =&gt; "mock:work"
})</code></pre></div></div><div class="paragraph"><p>Again, we can also use the same thing in a more block-like syntax. For this example, we use the Scala DSL&#8217;s support for JXPath to determine the target.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:c" ==&gt; {
  to("mock:c")
  recipients(jxpath("./in/body/destination"))
}</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Resequencer"><a class="anchor" href="#ScalaDSL-EIP-Resequencer"></a>Resequencer</h5><div class="paragraph"><p>Use the<code>resequence</code>method to add a resequencer to the RouteBuilder. The method takes a function (<code>Exchange ⇒ Unit</code>) that determines the value to resequence on. In this example, we resequence messages based on the<em>in</em>message body.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" resequence (_.in) to "mock:a"</code></pre></div></div><div class="paragraph"><p>The same EIP can also be used with a block-like syntax&#8230;&#8203;</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:b" ==&gt; {
  to ("mock:b")
  resequence (_.in) {
    to ("mock:c")
  }
}</code></pre></div></div><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>and with configurable batch size. In this last example, messages will be send to<code>mock:e</code>whenever a batch of 5 messages is available.</p></li></ol></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:d" ==&gt; {
  to ("mock:d")
  resequence(_.in).batch(5) {
    to ("mock:e")
  }
}</code></pre></div></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Splitter"><a class="anchor" href="#ScalaDSL-EIP-Splitter"></a>Splitter</h5><div class="paragraph"><p>To handle large message in smaller chunks, you can write a Scala<code>Exchange ⇒ Any*</code>method and add it to your route with the<code>splitter</code>method. As with many other EIPs, we support a short, in-line version as well as a more elaborate block based one.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" as(classOf[Document]) split(xpath("/persons/person")) to "mock:a"</code></pre></div></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:b" ==&gt; {
  as(classOf[Document])
  split(xpath("/persons/person")) {
    to("mock:b")
    to("mock:c")
  }
}</code></pre></div></div><div class="paragraph"><p>The above examples also show you how other languages like XPath can be within the Scala DSL.</p></div></div><div class="sect4"><h5 id="ScalaDSL-EIP-Throttler"><a class="anchor" href="#ScalaDSL-EIP-Throttler"></a>Throttler</h5><div class="paragraph"><p>The throttler allows you to slow down messages before sending them along. The<code>throttle</code>methods allows you to specify the maximum throughput rate of message:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"seda:a" throttle (3 per (2 seconds)) to ("mock:a")</code></pre></div></div><div class="paragraph"><p>It can also be used in front of block to throttle messages at that point. In the example below, message are passed on to<code>mock:b</code>in a normal rate (i.e. as fast as possible), but a maximum 3 messages/2 seconds will arrive at the<code>mock:c</code>endpoint.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"seda:b" ==&gt; {
  to ("mock:b")
  throttle (3 per (2 seconds)) {
    to ("mock:c")
  }
}</code></pre></div></div></div></div><div class="sect3"><h4 id="ScalaDSL-EIP-Messagetransformation"><a class="anchor" href="#ScalaDSL-EIP-Messagetransformation"></a>Message transformation</h4><div class="sect4"><h5 id="ScalaDSL-EIP-Contentenricher"><a class="anchor" href="#ScalaDSL-EIP-Contentenricher"></a>Content enricher</h5><div class="paragraph"><p>Using a processor function (<code>Exchange → Unit</code>), you can alter/enrich the message content. This example uses a simple function literal to append<code>" says Hello"</code>to the message content:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:a" process(_.in += " says hello") to ("mock:a")</code></pre></div></div><div class="paragraph"><p>However, you can also define a separate method/function to handle the transformation and pass that to the<code>process</code>method instead. The example below uses pattern matching to enrich the message content:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">val myProcessor = (exchange: Exchange) =&gt; {
  exchange.in match {
    case "hello" =&gt; exchange.in = "hello from the UK"
    case "hallo" =&gt; exchange.in = "hallo vanuit Belgie"
    case "bonjour" =&gt; exchange.in = "bonjour de la douce France"
  }
}

"direct:b" process(myProcessor) to ("mock:b")</code></pre></div></div><div class="paragraph"><p>Off course, you can also use any other Camel component (e.g.<a href="#velocity-component">Velocity</a>) to enrich the content and add it to a pipeline</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">"direct:c" to ("velocity:org/apache/camel/scala/dsl/enricher.vm") to ("mock:c")</code></pre></div></div></div></div></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>