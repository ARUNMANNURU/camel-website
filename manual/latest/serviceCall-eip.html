<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Service Call EIP - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/manual/latest/serviceCall-eip.html"> <meta name="generator" content="Antora 2.0.0"> <link rel="stylesheet" href="../../_/css/site-7d9877dbe0.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../news/">News</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> <a class="navbar-item" href="../../community/camel-extra/">Camel extra</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="manual" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">User manual</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="getting-started.html">Getting started</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="what-are-the-dependencies.html">What are the dependencies?</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="async.html">Async</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="backlogdebugger.html">Backlog debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bam.html">Business Activity Monitoring</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-consumer.html">Batch Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-core.html">Core</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camelcontext.html">Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="endpoint.html">Endpoints</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="cep.html">Complex Event Processing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="component.html">Component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="debugger.html">Debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-interceptor.html">Delay interceptor</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dependency-injection.html">Dependency Injection</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-integration.html">Bean Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-binding.html">Bean Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="parameter-binding-annotations.html">Parameter Binding Annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-producing.html">POJO Producing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-consuming.html">POJO Consuming</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange.html">Message Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="using-exchange-pattern-annotations.html">Using Exchange pattern annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="expression.html">Expressions</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-enricher.html">Content Enrichment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="injector.html">Injector</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="intercept.html">Intercept</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jmx.html">JMX</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="lifecycle.html">Camel Lifecycle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="oncompletion.html">OnCompletion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="predicate.html">Predicates</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-builder.html">RouteBuilder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routes.html">Routes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transformer.html">Transformer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validator.html">Validator</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring-remoting.html">Spring Remoting</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hiding-middleware.html">Hidding Middleware</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Domain Specific Languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dsl.html">Camel Domain Specific Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="java-dsl.html">Java DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring.html">Spring support</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="groovy-dsl.html">Groovy DSL</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Supported expression languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="constant-language.html">Constant Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchangeProperty-language.html">ExchangeProperty Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="file-language.html">File Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="header-language.html">Header Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="ref-language.html">Ref Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="simple-language.html">Simple Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="tokenize-language.html">Tokenize Language</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="aggregate-eip.html">Aggregate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-config-eip.html">Batch-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-eip.html">Bean EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="choice-eip.html">Choice EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="circuitBreaker-eip.html">Circuit Breaker EIP (deprecated)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="claimCheck-eip.html">Claim Check EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-based-router-eip.html">Content Based Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-filter-eip.html">Content Filter</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="convertBodyTo-eip.html">Convert Body To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="customLoadBalancer-eip.html">Custom Load Balancer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-eip.html">Delay EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamic-router.html">Dynamic Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamicRouter-eip.html">Dynamic Router EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="enrich-eip.html">Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="eventDrivenConsumer-eip.html">Event Driven Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="failover-eip.html">Failover EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="filter-eip.html">Filter EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="from-eip.html">From EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrix-eip.html">Hystrix EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrixConfiguration-eip.html">Hystrix Configuration EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="idempotentConsumer-eip.html">Idempotent Consumer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOnly-eip.html">In Only EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOut-eip.html">In Out EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loadBalance-eip.html">Load Balance EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="log-eip.html">Log EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loop-eip.html">Loop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="marshal-eip.html">Marshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="multicast-eip.html">Multicast EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="onFallback-eip.html">On Fallback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="otherwise-eip.html">Otherwise EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pipeline-eip.html">Pipeline EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pollEnrich-eip.html">Poll Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="process-eip.html">Process EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="random-eip.html">Random EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="recipientList-eip.html">Recipient List EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeader-eip.html">Remove Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeaders-eip.html">Remove Headers EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperties-eip.html">Remove Properties EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperty-eip.html">Remove Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="requestReply-eip.html">Request Reply</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resequence-eip.html">Resequence EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="rollback-eip.html">Rollback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="roundRobin-eip.html">Round Robin EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routingSlip-eip.html">Routing Slip EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="saga-eip.html">Saga EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sample-eip.html">Sample EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="script-eip.html">Script EIP</a> </li> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="serviceCall-eip.html">Service Call EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setBody-eip.html">Set Body EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setHeader-eip.html">Set Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setOutHeader-eip.html">Set Out Header EIP (deprecated)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setProperty-eip.html">Set Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sort-eip.html">Sort EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="split-eip.html">Split EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="step-eip.html">Step EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sticky-eip.html">Sticky EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stop-eip.html">Stop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stream-config-eip.html">Stream-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="threads-eip.html">Threads EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="throttle-eip.html">Throttle EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="to-eip.html">To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="toD-eip.html">To D EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="topic-eip.html">Topic EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transform-eip.html">Transform EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="unmarshal-eip.html">Unmarshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validate-eip.html">Validate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="weighted-eip.html">Weighted EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="when-eip.html">When EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="wireTap-eip.html">Wire Tap EIP</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Frequently asked questions</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/can-i-get-commercial-support.html">Can I get commercial support?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/can-i-use-camel-on-java-14.html">Can I use Camel on Java 1.4?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/does-camel-work-on-ibms-jdk.html">Does Camel work on IBM&#8217;s JDK?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="support.html">How can I get help?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-source-code.html">How can I get the source code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-mule.html">How does Camel compare to Mule?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix.html">How does Camel compare to ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix-eip.html">How does Camel compare to ServiceMix EIP?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-synapse.html">How does Camel compare to Synapse?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work.html">How does Camel work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-activemq.html">How does Camel work with ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-servicemix.html">How does Camel work with ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-camel-api-compare-to.html">How does the Camel API compare to?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-website-work.html">How does the website work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-become-a-committer.html">How do I become a committer?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-compile-the-code.html">How do I compile the code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-edit-the-website.html">How do I edit the website?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-camel-using-java-webstart.html">How do I run Camel using Java WebStart?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/if-i-use-servicemix-when-should-i-use-camel.html">If I use ServiceMix when should I use Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-an-esb.html">Is Camel an ESB?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-ioc-friendly.html">Is Camel IoC friendly?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/running-camel-standalone.html">Running Camel standalone</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-are-the-dependencies.html">What are the dependencies?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-a-router.html">What is a router?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-camel.html">What is Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-the-license.html">What is the license?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-jars-do-i-need.html">What jars do I need?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages.html">What languages are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-platforms-are-supported.html">What platforms are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-the-name-camel.html">Why the name Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/classloader-issue-of-servicemix-camel-component.html">Classloader issue of servicemix-camel component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-which-method-to-use-when-using-beans-in-routes.html">How do I specify which method to use when using beans in routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-create-a-custom-component-or-endpoint.html">How can I create a custom component or endpoint?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-remote-connection-ip-address-from-the-camel-cxf-consumer-.html">How can I get the remote connection IP address from the camel-cxf consumer ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-stop-a-route-from-a-route.html">How can I stop a route from a route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-webservice-clients-see-remote-faults-with-stacktraces-when-using-camel-cxf.html">How can webservice clients see remote faults with stacktraces when using camel-cxf?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-look-up-beans-and-endpoints.html">How does Camel look up beans and endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuring-camel.html">How do I add a component?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-change-the-logging.html">How do I change the logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-endpoints.html">How do I configure endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-password-options-on-camel-endpoints-without-the-value-being-encoded.html">How do I configure password options on Camel endpoints without the value being encoded?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-default-maximum-cache-size-for-producercache-or-producertemplate.html">How do I configure the default maximum cache size for ProducerCache or ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-maximum-endpoint-cache-size-for-camelcontext.html">How do I configure the maximum endpoint cache size for CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-debug-my-route.html">How do I debug my route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-disable-jmx.html">How do I disable JMX?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-streams-when-debug-logging-messages-in-camel.html">How do I enable streams when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-handle-failures-when-consuming-for-example-from-a-ftp-server.html">How do I handle failures when consuming for example from a FTP server?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-rests-from-other-xml-files.html">How do I import rests from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-routes-from-other-xml-files.html">How do I import routes from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-let-jetty-match-wildcards.html">How do I let Jetty match wildcards?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-name-my-routes.html">How do I name my routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-restart-camelcontext.html">How do I restart CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retrieve-the-thrown-exception-during-processing-an-exchange.html">How do I retrieve the thrown Exception during processing an Exchange?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-failed-messages-forever.html">How do I retry failed messages forever?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-processing-a-message-from-a-certain-point-back-or-an-entire-route.html">How do I retry processing a message from a certain point back or an entire route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-reuse-the-contexttestsupport-class-in-my-unit-tests.html">How do I reuse the ContextTestSupport class in my unit tests?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-activemq-and-camel-in-jboss.html">How do I run ActiveMQ and Camel in JBoss?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-max-chars-when-debug-logging-messages-in-camel.html">How do I set the max chars when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-time-period-in-a-human-friendly-syntax.html">How do I specify time period in a human friendly syntax?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-a-big-uber-jar.html">How do I use a big (uber) JAR?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-camel-inside-servicemix.html">How do I use Camel inside ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-spring-property-placeholder-with-camel-xml.html">How do I use Spring Property Placeholder with Camel XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-uris-with-parameters-in-xml.html">How do I use URIs with parameters in XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-write-a-custom-processor-which-sends-multiple-messages.html">How do I write a custom Processor which sends multiple messages?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-invoke-my-pojos-or-spring-services.html">How should I invoke my POJOs or Spring Services?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-package-applications-using-camel-and-activemq.html">How should I package applications using Camel and ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-importing-bunch-of-cxf-packages-when-start-up-the-camel-cxf-endpoint-from-osgi-platform-.html">How to avoid importing bunch of cxf packages when start up the camel-cxf endpoint from OSGi platform?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-sending-some-or-all-message-headers.html">How to avoid sending some or all message headers?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-define-a-static-camel-converter-method-in-scala.html">How to define a static Camel converter method in Scala?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-remove-the-http-protocol-headers-in-the-camel-message.html">How to remove the http protocol headers in the camel message?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-send-the-same-message-to-multiple-endpoints.html">How to send the same message to multiple endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-switch-the-cxf-consumer-between-http-and-https-without-touching-the-spring-configuration.html">How to switch the CXF consumer between HTTP and HTTPS without touching the Spring configuration?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-use-a-dynamic-uri-in-to.html">How to use a dynamic URI in to()?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-validate-the-camel-1x-context-xml-from-apache-camel-web-site.html">How to validate the camel 1.x context xml from Apache Camel web site?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-there-an-ide.html">Is there an IDE?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/should-i-deploy-camel-inside-the-activemq-broker-or-in-another-application.html">Should I deploy Camel inside the ActiveMQ broker or in another application?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-camel-core-testsjar.html">Using camel-core-tests.jar</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-getin-or-getout-methods-on-exchange.html">Using getIn or getOut methods on Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-cant-i-use-sign-in-my-password.html">Why can&#8217;t I use + sign in my password?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html">Why can I not use when or otherwise in a Java Camel route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-ftp-component-not-download-any-files.html">Why does FTP component not download any files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-file-consumer-not-pick-up-the-file-and-how-do-i-let-the-file-consumer-use-the-camel-error-handler.html">Why does my file consumer not pick up the file, and how do I let the file consumer use the Camel error handler?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-useoriginalmessage-with-error-handler-not-work-as-expected.html">Why does useOriginalMessage with error handler not work as expected?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-my-message-lose-its-headers-during-routing.html">Why do my message lose its headers during routing?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-message-body-empty.html">Why is my message body empty?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-processor-not-showing-up-in-jconsole.html">Why is my processor not showing up in JConsole?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-the-exception-null-when-i-use-onexception.html">Why is the exception null when I use onException?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-use-multiple-camelcontext.html">Why use multiple CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-debug-logging.html">How do I enable debug logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-java-14-logging.html">How do I use Java 1.4 logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-log4j.html">How do I use log4j?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-invoke-camel-routes-from-jbi.html">How do I invoke Camel routes from JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-make-my-jms-endpoint-transactional.html">How Do I Make My JMS Endpoint Transactional?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-mep-when-interacting-with-jbi.html">How do I set the MEP when interacting with JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-direct-event-seda-and-vm-endpoints-compare.html">How do the direct, event, seda and vm endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-timer-and-quartz-endpoints-compare.html">How do the Timer and Quartz endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-jms-route-only-consume-one-message-at-once.html">Why does my JMS route only consume one message at once?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-beandefinitionstoreexception.html">Exception - BeanDefinitionStoreException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-javaxnamingnoinitialcontextexception.html">Exception - javax.naming.NoInitialContextException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgapachecamelnosuchendpointexception.html">Exception - org.apache.camel.NoSuchEndpointException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgxmlsaxsaxparseexception.html">Exception - org.xml.sax.SAXParseException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/memory-leak-when-adding-and-removing-routes-at-runtime.html">Memory leak when adding and removing routes at runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-camel-throw-so-many-noclassdeffoundexception-on-startup.html">Why do Camel throw so many NoClassDefFoundException on startup?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-camel-use-too-many-threads-with-producertemplate.html">Why does Camel use too many threads with ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-maven-not-download-dependencies.html">Why does maven not download dependencies?</a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">User manual</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">User manual</a></li> <li><a href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a></li> <li><a href="serviceCall-eip.html">Service Call EIP</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/serviceCall-eip.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">Service Call EIP</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>The Service Call EIP allows to call remote services in a distributed system. The service to call is looked up in a service registry of some sorts such as Kubernetes, Consul, Etcd, Zookeeper, DNS. The EIP separates the configuration of the service registry from the calling of the service.</p> </div> <div class="paragraph"> <p>When calling a service you may just refer to the name of the service in the EIP as shown below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
    .to("mock:result");</code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"/&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Camel will then:</p> </div> <div class="ulist"> <ul> <li> <p>search for a service call configuration from the Camel context and registry</p> </li> <li> <p>lookup a service with the name <code><code>foo</code></code> from an external service registry</p> </li> <li> <p>filter the servers</p> </li> <li> <p>select the server to use</p> </li> <li> <p>build a Camel URI using the chosen server info</p> </li> </ul> </div> <div class="paragraph"> <p>By default the Service Call EIP uses camel-http so assuming that the selected service instance runs on host <code><code>myhost.com</code></code> on port <code><code>80</code></code>, the computed Camel URI will be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>http:myhost.com:80</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_service_name_to_camel_uri_examples"><a class="anchor" href="#_service_name_to_camel_uri_examples"></a>Service Name to Camel URI Examples</h2> <div class="sectionbody"> <div class="paragraph"> <p>It is often needed to build more complex Camel URI which may include options or paths which is possible through different options:name: value</p> </div> <div class="paragraph"> <p>The <strong>service name</strong> supports a limited uri like syntax, here some examples</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Resolution</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>foo</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p><a href="http://host:port" class="bare">http://host:port</a></p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>foo/path</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p><a href="http://host:port/path" class="bare">http://host:port/path</a></p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>foo/path?foo=bar</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p><a href="http://host:port/path?foo=bar" class="bare">http://host:port/path?foo=bar</a></p> </div></div></td> </tr> </tbody> </table></div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo/hello")
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>If you want to have more control over the uri construction, you can use the <strong>uri</strong> directive:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">URI</th> <th class="tableblock halign-left valign-top">Resolution</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>foo</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>undertow:http://foo/hello</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>undertow:http://host:port/hello</p> </div></div></td> </tr> <tr> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>foo</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>undertow:http://foo.host:foo.port/hello</p> </div></div></td> <td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph"> <p>undertow:http://host:port/hello</p> </div></div></td> </tr> </tbody> </table></div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo", "undertow:http://foo/hello")
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>Advanced users can have full control over the uri construction through expressions:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall()
        .name("foo")
        .expression()
            .simple("undertow:http://${header.CamelServiceCallServiceHost}:${header.CamelServiceCallServicePort}/hello");</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_options"><a class="anchor" href="#_options"></a>Options</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Service Call EIP supports 14 options which are listed below:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Sets the name of the service to use</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The uri of the endpoint to send to. The uri can be dynamic computed using the org.apache.camel.language.simple.SimpleLanguage expression.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>component</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The component to use.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">http</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pattern</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the optional ExchangePattern used to invoke this endpoint</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExchangePattern</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>configurationRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Refers to a ServiceCall configuration to use</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serviceDiscoveryRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets a reference to a custom ServiceDiscovery to use.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serviceFilterRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets a reference to a custom ServiceFilter to use.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serviceChooserRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets a reference to a custom ServiceChooser to use.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loadBalancerRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets a reference to a custom ServiceLoadBalancer to use.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expressionRef</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Set a reference to a custom Expression to use.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serviceDiscovery Configuration</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Configures the ServiceDiscovery using the given configuration.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ServiceCallService DiscoveryConfiguration</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serviceFilterConfiguration</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Configures the ServiceFilter using the given configuration.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ServiceCallService FilterConfiguration</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loadBalancerConfiguration</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Configures the LoadBalancer using the given configuration.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ServiceCallServiceLoad BalancerConfiguration</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expressionConfiguration</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Configures the Expression using the given configuration.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ServiceCallExpression Configuration</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>In addition to ref/binding configuration style you can leverage specific configuration DSL to customize specific options:</p> </div> </div> </div> <div class="sect1"> <h2 id="_static_service_discovery"><a class="anchor" href="#_static_service_discovery"></a>Static Service Discovery</h2> <div class="sectionbody"> <div class="paragraph"> <p>This service discovery implementation does not query any external services to find out the list of services associated to a named service but keep them in memory. Each service should be provided in the following form:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>[service@]host:port</code></pre> </div> </div> <div class="admonitionblock tip"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> The <code>service</code> part is used to discriminate against the services but if not provided it acts like a wildcard so each non named service will be returned whatever the service name is. This is useful if you have a single service so the service name is redundant. </td> </tr> </table></div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this implementation is provided by <code>camel-core</code> artifact. </td> </tr> </table></div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">servers</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of servers in the form: [service@]host:port,[service@]host2:port,[service@]host3:port</p></td> </tr> </tbody> </table></div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .staticServiceDiscovery()
            .servers("service1@host1:80,service1@host2:80")
            .servers("service2@host1:8080,service2@host2:8080,service2@host3:8080")
            .end()
    .to("mock:result");</code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;staticServiceDiscovery&gt;
        &lt;servers&gt;service1@host1:80,service1@host2:80&lt;/servers&gt;
        &lt;servers&gt;service2@host1:8080,service2@host2:8080,service2@host3:8080&lt;/servers&gt;
      &lt;/staticServiceDiscovery&gt;
    &lt;/serviceCall
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_consul_service_discovery"><a class="anchor" href="#_consul_service_discovery"></a>Consul Service Discovery</h2> <div class="sectionbody"> <div class="paragraph"> <p>To leverage Consul for Service Discovery, maven users will need to add the following dependency to their pom.xml</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-consul&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Consul agent URL</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">datacenter</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The data center</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">aclToken</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the ACL token to be used with Consul</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">userName</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the username to be used for basic authentication</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the password to be used for basic authentication</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">connectTimeoutMillis</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Connect timeout for OkHttpClient</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">readTimeoutMillis</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Read timeout for OkHttpClient</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">writeTimeoutMillis</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Write timeout for OkHttpClient</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>And example in Java</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .consulServiceDiscovery()
            .url("http://consul-cluster:8500")
            .datacenter("neverland")
            .end()
    .to("mock:result");</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_dns_service_discovery"><a class="anchor" href="#_dns_service_discovery"></a>DNS Service Discovery</h2> <div class="sectionbody"> <div class="paragraph"> <p>To leverage DNS for Service Discovery, maven users will need to add the following dependency to their pom.xml</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-dns&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">proto</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The transport protocol of the desired service, default "_tcp"</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">domain</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The user name to use for basic authentication</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Example in Java:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .dnsServiceDiscovery("my.domain.com")
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;dnsServiceDiscovery domain="my.domain.com"/&gt;
    &lt;/serviceCall&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_etcd_service_discovery"><a class="anchor" href="#_etcd_service_discovery"></a>Etcd Service Discovery</h2> <div class="sectionbody"> <div class="paragraph"> <p>To leverage Etcd for Service Discovery, maven users will need to add the following dependency to their pom.xml</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-etcd&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">uris</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The URIs the client can connect to</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">userName</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The user name to use for basic authentication</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The password to use for basic authentication</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">timeout</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To set the maximum time an action could take to complete</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">servicePath</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The path to look for for service discovery, default "/services"</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To set the discovery type, valid values are "on-demand" and "watch"</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Example in Java</p> </div> <div class="listingblock"> <div class="content"> <pre>from("direct:start")
    .serviceCall("foo")
        .etcdServiceDiscovery()
            .uris("http://etcd1:4001,http://etcd2:4001")
            .servicePath("/camel/services")
            .end()
    .to("mock:result");</pre> </div> </div> <div class="paragraph"> <p>And in XML</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;etcdServiceDiscovery uris="http://etcd1:4001,http://etcd2:4001" servicePath="/camel/services"/&gt;
    &lt;/serviceCall&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_kubernetes_service_discovery"><a class="anchor" href="#_kubernetes_service_discovery"></a>Kubernetes Service Discovery</h2> <div class="sectionbody"> <div class="paragraph"> <p>To leverage Kubernetes for Service Discovery, maven users will need to add the following dependency to their pom.xml</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-kubernetes&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">lookup</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">How to perform service lookup. Possible values: client, dns, environment</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes API version when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">caCertData</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Certificate Authority data when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">caCertFile</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Certificate Authority data that are loaded from the file when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientCertData</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Certificate data when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientCertFile</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Certificate data that are loaded from the file when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientKeyAlgo</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Keystore algorithm, such as RSA when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientKeyData</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Keystore data when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientKeyFile</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Keystore data that are loaded from the file when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientKeyPassphrase</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Client Keystore passphrase when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">dnsDomain</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the DNS domain to use for dns lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">namespace</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes namespace to use. By default the namespace&#8217;s name is taken from the environment variable KUBERNETES_MASTER</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">oauthToken</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the OAUTH token for authentication (instead of username/password) when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">username</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the username for authentication when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the password for authentication when using client lookup</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">trustCerts</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets whether to turn on trust certificate check when using client lookup</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Example in Java</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .kubernetesServiceDiscovery()
            .lookup("dns")
            .namespace("myNamespace")
            .dnsDomain("my.domain.com")
            .end()
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;kubernetesServiceDiscovery lookup="dns" namespace="myNamespace" dnsDomain="my.domain.com"/&gt;
    &lt;/serviceCall&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_blacklist_service_filter"><a class="anchor" href="#_blacklist_service_filter"></a>Blacklist Service Filter</h2> <div class="sectionbody"> <div class="paragraph"> <p>This service filter implementation removes the listed services from those found by the service discovery. Each service should be provided in the following form:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code>[service@]host:port</code></pre> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The services are removed if they fully match </td> </tr> </table></div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">servers</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of servers to blacklist: [service@]host:port,[service@]host2:port,[service@]host3:port</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Example in Java</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .staticServiceDiscovery()
            .servers("service1@host1:80,service1@host2:80")
            .servers("service2@host1:8080,service2@host2:8080,service2@host3:8080")
            .end()
        .blacklistFilter()
            .servers("service2@host2:8080")
            .end()
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;staticServiceDiscovery&gt;
        &lt;servers&gt;service1@host1:80,service1@host2:80&lt;/servers&gt;
        &lt;servers&gt;service2@host1:8080,service2@host2:8080,service2@host3:8080&lt;/servers&gt;
      &lt;/staticServiceDiscovery&gt;
      &lt;blacklistServiceFilter&gt;
        &lt;servers&gt;service2@host2:8080&lt;/servers&gt;
      &lt;/blacklistServiceFilter&gt;
    &lt;/serviceCall
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_load_balancer"><a class="anchor" href="#_load_balancer"></a>Load Balancer</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Service Call EIP comes with its own Load Balancer which is istantiated by default if a custom is not configured and glues Service Discovery, Service Filer, Service Chooser and Service Expression together to load balance requests among the available services.</p> </div> <div class="paragraph"> <p>If you need a more sophisticate load balancer you can use Ribbon by adding camel-ribbon to the mix, maven users will need to add the following dependency to their pom.xml</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-ribbon&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Available options:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">clientName</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Ribbon client name</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;PropertyDefinition&gt;</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Custom client config properties</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>To leverage Ribbon, it is required to explicit enable it:</p> </div> <div class="paragraph"> <p>Java example</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall("foo")
        .ribbonLoadBalancer()
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;ribbonLoadBalancer/&gt;
    &lt;/serviceCall&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>You can configure Ribbon key programmatic using <code>RibbonConfiguration</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RibbonConfiguration configuration = new RibbonConfiguration();
configuration.addProperty("listOfServers", "localhost:9090,localhost:9091");

from("direct:start")
    .serviceCall("foo")
        .loadBalancer(new RibbonServiceLoadBalancer(configuration))
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>Or leveraging XML specific configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;serviceCall name="foo"&gt;
      &lt;ribbonLoadBalancer&gt;
          &lt;properties key="listOfServers" value="localhost:9090,localhost:9091"/&gt;
      &lt;/ribbonLoadBalancer&gt;
    &lt;/serviceCall&gt;
    &lt;to uri="mock:result"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_shared_configurations"><a class="anchor" href="#_shared_configurations"></a>Shared configurations</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Service Call EIP can be configured straight on the route definition or through shared configurations, here an example with two configurations registered in the Camel Context:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ServiceCallConfigurationDefinition globalConf = new ServiceCallConfigurationDefinition();
globalConf.setServiceDiscovery(
    name -&gt; Arrays.asList(
        new DefaultServiceDefinition(name, "my.host1.com", 8080),
        new DefaultServiceDefinition(name, "my.host2.com", 443))
);
globalConf.setServiceChooser(
    list -&gt; list.get(ThreadLocalRandom.current().nextInt(list.size()))
);

ServiceCallConfigurationDefinition httpsConf = new ServiceCallConfigurationDefinition();
httpsConf.setServiceFilter(
    list -&gt; list.stream().filter(s -&gt; s.getPort() == 443).collect(toList())
);

getContext().setServiceCallConfiguration(globalConf);
getContext().addServiceCallConfiguration("https", httpsConf);</code></pre> </div> </div> <div class="paragraph"> <p>Each Service Call definition and configuration will inherit from the <code>globalConf</code> which can be seen as default configuration, then you can reference the <code>httpsConf</code> in your route as follow:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall()
        .name("foo")
        .serviceCallConfiguration("https")
        .end()
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This route will leverages the service discovery and service chooser from <code>globalConf</code> and the service filter from <code>httpsConf</code> but you can override any of them if needed straight on the route:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .serviceCall()
        .name("foo")
        .serviceCallConfiguration("https")
        .serviceChooser(list -&gt; list.get(0))
        .end()
    .to("mock:result");</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_spring_boot_support"><a class="anchor" href="#_spring_boot_support"></a>Spring Boot support</h2> <div class="sectionbody"> <div class="paragraph"> <p>In a Spring-Boot application you can externalize most of the configuration options:</p> </div> <div class="listingblock"> <div class="title">application.properties</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># this can be configured stright tot he route and it has been included to show
# property placeholders support
service.name = foo

# this property is not mandatory and it has been included to show how to configure
# the service discovery implementation provided by camel-consul
camel.cloud.consul.service-discovery.url = http://localhost:8500

# Add a static list of servers for the service named foo
camel.cloud.service-discovery.services[foo] = host1.static:8080,host2.static:8080</code></pre> </div> </div> <div class="listingblock"> <div class="title">Routes</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
public class MyRouteBuilder implements RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("direct:start")
            .serviceCall("{{service.name}}");
    }
}</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_spring_cloud_support"><a class="anchor" href="#_spring_cloud_support"></a>Spring Cloud support</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you are using Camel in an application based on Spring Cloud, you can leverage Spring Cloud service discovery and load balancing capabilities by adding the Spring Cloud related dependencies (i.e. spring-cloud-consul, spring-cloud-kubernetes) as any Spring Boot/Cloud application in addition to Camel&#8217;s own camel-spring-cloud dependency.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-spring-cloud dependency&lt;/artifactId&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
    &lt;version&gt;x.y.z&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../news/">News</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> <dd><a href="../../community/camel-extra/">Camel extra</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "User manual",
        "item": "https://camel.apache.org/manual/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Enterprise Integration Patterns","item": "https://camel.apache.org/manual/latest/enterprise-integration-patterns.html"}
        ,
        {
        "@type": "ListItem",
        "position": 4,
        "name": "Service Call EIP","item": "https://camel.apache.org/manual/latest/serviceCall-eip.html"}
        ]
    } </script> </body> </html> 