<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/type-converter.html"><meta name="generator" content="Antora 2.0.0-rc.2"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar"><div class="navbar-brand"><a class="navbar-item" href="https://camel.apache.org">Apache Camel</a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="#">Home</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Products</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Product A</a><a class="navbar-item" href="#">Product B</a><a class="navbar-item" href="#">Product C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Services</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Service A</a><a class="navbar-item" href="#">Service B</a><a class="navbar-item" href="#">Service C</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Resources</a><div class="navbar-dropdown"><a class="navbar-item" href="#">Resource A</a><a class="navbar-item" href="#">Resource B</a><a class="navbar-item" href="#">Resource C</a></div></div><div class="navbar-item"><span class="control"><a class="button is-primary" href="#">Download</a></span></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li><li class="nav-item" data-depth="2"><button class="nav-toggle"></button><span class="nav-text">Scala DSL</span><ul class="nav-list"><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl.html">About the Scala DSL</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-getting-started.html">Getting Started</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-eip.html">EIP</a></li><li class="nav-item" data-depth="3"><a class="nav-link" href="scala-dsl-supported-languages.html">Supported languages</a></li></ul></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav></div><article class="doc"><div class="sect2"><h3 id="TypeConverter-TypeConverter"><a class="anchor" href="#TypeConverter-TypeConverter"></a>Type Converter</h3><div class="paragraph"><p>It is very common when routing messages from one endpoint to another to need to convert the body payloads from one type to another such as to convert to and from the following common types:</p></div><div class="ulist"><ul><li><p>File</p></li><li><p>String</p></li><li><p>byte[] and ByteBuffer</p></li><li><p>InputStream and OutputStream</p></li><li><p>Reader and Writer</p></li><li><p>Document and Source</p></li><li><p>&#8230;&#8203;</p></li></ul></div><div class="paragraph"><p>The<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Message.html">Message interface</a>defines a helper method to allow conversions to be done via the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Message.html#getBody(java.lang.Class)">getBody(Class)</a>method.</p></div><div class="paragraph"><p>So in an endpoint you can convert a body to another type via:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Message message = exchange.getIn();
Document document = message.getBody(Document.class);</code></pre></div></div><div class="sect3"><h4 id="TypeConverter-HowTypeConversionworks"><a class="anchor" href="#TypeConverter-HowTypeConversionworks"></a>How Type Conversion works</h4><div class="paragraph"><p>The type conversion strategy is defined by the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/TypeConverter.html">TypeConverter</a>interface that can be customized on a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/CamelContext.html">CamelContext</a>.</p></div><div class="paragraph"><p>The default implementation,<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/DefaultTypeConverter.html">DefaultTypeConverter</a>, uses pluggable strategies to load type converters via<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/TypeConverterLoader.html">TypeConverterLoader</a>. The default strategy,<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.html">AnnotationTypeConverterLoader</a>, uses a discovery mechanism to find converters.</p></div><div class="paragraph"><p><strong>New in Camel 1.5</strong></p></div><div class="paragraph"><p>The default implementation,<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/DefaultTypeConverter.html">DefaultTypeConverter</a>, now throws a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/NoTypeConversionAvailableException.html">NoTypeConversionAvailableException</a>if a suitable conversion cannot be found (<a href="https://issues.apache.org/jira/browse/CAMEL-84">CAMEL-84</a>). The semantical ambiguity of<code>null</code>(both valid result and indication of no conversion found) is now resolved, but this may impact existing code in that it should now catch the exception instead of checking for<code>null</code>.</p></div></div><div class="sect3"><h4 id="TypeConverter-TypeConverterRegistry"><a class="anchor" href="#TypeConverter-TypeConverterRegistry"></a>TypeConverterRegistry</h4><div class="paragraph"><p><strong>New in Camel 2.0</strong></p></div><div class="paragraph"><p>Exposed the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/spi/TypeConverterRegistry.html">TypeConverterRegistry</a>from<a href="camelcontext.adoc">CamelContext</a>so end users more easily will be able to add type converters at runtime. This is also usable in situations where the default discovering of type converters fails on platforms with classloading issues.</p></div><div class="paragraph"><p>To access the registry, you get it from the<code>CamelContext</code>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CamelContext context = ...
context.getTypeConverterRegistry()</code></pre></div></div><div class="sect4"><h5 id="TypeConverter-TypeConverterRegistryutilizationstatistics"><a class="anchor" href="#TypeConverter-TypeConverterRegistryutilizationstatistics"></a>TypeConverterRegistry utilization statistics</h5><div class="paragraph"><p>Camel can gather utilization statistics of the runtime usage of type converters. These stats are available in JMX, and as well as from the<code>getStatistics()</code>method from<code>TypeConverterRegistry</code>.</p></div><div class="paragraph"><p>From<strong>Camel 2.11.0/2.10.5</strong>onwards these statistics are turned off by default as there is some performance overhead under very high concurrent load. To enable the statistics in Java, do the following:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">CamelContext context = ...
context.setTypeConverterStatisticsEnabled(true);</code></pre></div></div><div class="paragraph"><p>Or in the XML DSL with:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring" typeConverterStatisticsEnabled="true"&gt;
    ...
&lt;/camelContext&gt;</code></pre></div></div></div><div class="sect4"><h5 id="TypeConverter-Addtypeconverteratruntime"><a class="anchor" href="#TypeConverter-Addtypeconverteratruntime"></a>Add type converter at runtime</h5><div class="paragraph"><p>The following sample demonstrates how to add a type converter at runtime:<br><a href="../../../camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java">/camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java</a></p></div><div class="paragraph"><p>And our type converter is implemented as:<br><a href="../../../camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java">/camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java</a></p></div><div class="paragraph"><p>And then we can convert from String to MyOrder as we are used to with the type converter:<br><a href="../../../camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java">/camel-core/src/test/java/org/apache/camel/impl/TypeConverterRegistryTest.java</a></p></div></div><div class="sect4"><h5 id="TypeConverter-Addtypeconverterclassesatruntime"><a class="anchor" href="#TypeConverter-Addtypeconverterclassesatruntime"></a>Add type converter classes at runtime</h5><div class="paragraph"><p><strong>Available as of Camel 2.16</strong></p></div><div class="paragraph"><p>From Camel 2.16 onwards you type converter classes can implement <code>org.apache.camel.TypeConverters</code>which is an marker interface. Then for each type converter you want use the <code>@Converter</code> annotation.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private class MyOrderTypeConverters implements TypeConverters {
    @Converter
    public MyOrder toMyOrder(String orderId) {
        MyOrder order = new MyOrder();
        order.setId(Integer.parseInt(orderId));
        return order;
    }
}</code></pre></div></div><div class="paragraph"><p>Then you can add these converters to the registry using:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">MyOrderTypeConverters myClass = ...
context.getTypeConverterRegistry().addTypeConverters(myClass);</code></pre></div></div><div class="paragraph"><p>If you are using Spring or Blueprint, then you can just declare a<code>&lt;bean&gt;</code>then<code>CamelContext</code>will automatic discover and add the converters.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="myOrderTypeConverters" class="..."/&gt;
    &lt;camelContext ...&gt;
        ...
    &lt;/camelContext&gt;</code></pre></div></div><div class="paragraph"><p>You can declare multiple `&lt;bean&gt;`s if you have more clases.</p></div><div class="paragraph"><p>Using this technique do not require to scan the classpath and using the file<code>META-INF/services/org/apache/camel/TypeConverter</code> as discussed in the <a href="#TypeConverter-DiscoveringTypeConverters">Discovering Type Converters</a>section. However the latter is highly recommended when developing Camel components or data formats as then the type converters is automatic included out of the box. The functionality from this section requires the end users to explicit add the converters to their Camel applications.</p></div></div></div><div class="sect3"><h4 id="TypeConverter-DiscoveringTypeConverters"><a class="anchor" href="#TypeConverter-DiscoveringTypeConverters"></a>Discovering Type Converters</h4><div class="paragraph"><p>The<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.html">AnnotationTypeConverterLoader</a>will search the classpath for a file called<code>META-INF/services/org/apache/camel/TypeConverter</code>. The contents are expected to be comma separated package names. These packages are then recursively searched for any objects with the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Converter">@Converter</a>annotation. Then any method marked with @Converter is assumed to be a conversion method; where the parameter is the from value and the return is the to value.</p></div><div class="paragraph"><p>E.g. the following shows how to register a converter from<code>File</code>to<code>InputStream</code>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Converter
public class IOConverter {
    @Converter
    public static InputStream toInputStream(File file) throws FileNotFoundException {
        return new BufferedInputStream(new FileInputStream(file));
    }
}</code></pre></div></div><div class="paragraph"><p>Static methods are invoked; non-static methods require an instance of the converter object to be created (which is then cached). If a converter requires configuration you can plug in an Injector interface to the<code>DefaultTypeConverter</code>which can construct and inject converter objects via Spring or Guice.</p></div><div class="paragraph"><p>We have most of the common converters for common Java types in the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/converter/package-summary.html">org.apache.camel.converter</a>package and its children.</p></div><div class="sect4"><h5 id="TypeConverter-Returningnullvalues"><a class="anchor" href="#TypeConverter-Returningnullvalues"></a>Returning null values</h5><div class="paragraph"><p>By default when using a method in a POJO annotation with @Converter returning null is not a valid response. If null is returned, then Camel will regard that type converter as a<em>miss</em>, and prevent from using it in the future. If null should be allowed as a valid response, then from<strong>Camel 2.11.2/2.12</strong>onwards you can specify this in the annotation as shown:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Converter(allowNull = true)
public static InputStream toInputStream(File file) throws IOException {
    if (file.exist()) {
        return new BufferedInputStream(new FileInputStream(file));
    } else {
        return null;
    }
}</code></pre></div></div></div></div><div class="sect3"><h4 id="TypeConverter-DiscoveringFallbackTypeConverters"><a class="anchor" href="#TypeConverter-DiscoveringFallbackTypeConverters"></a>Discovering Fallback Type Converters</h4><div class="paragraph"><p><strong>Available in Camel 2.0</strong></p></div><div class="paragraph"><p>The<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.html">AnnotationTypeConverterLoader</a>has been enhanced to also look for methods defined with a<code>@FallbackConverter</code>annotation, and register it as a fallback type converter.</p></div><div class="paragraph"><p>Fallback type converters are used as a last resort for converting a given value to another type. Its used when the regular type converters give up. The fallback converters is also meant for a broader scope, so its method signature is a bit different:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FallbackConverter
public static &lt;T&gt; T convertTo(Class&lt;T&gt; type, Exchange exchange, Object value, TypeConverterRegistry registry)</code></pre></div></div><div class="paragraph"><p>Or you can use the non generic signature.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FallbackConverter
public static Object convertTo(Class type, Exchange exchange, Object value, TypeConverterRegistry registry)</code></pre></div></div><div class="paragraph"><p>And the method name can be anything (<code>convertTo</code>is not required as a name), so it can be named<code>convertMySpecialTypes</code>if you like.<br>The<code>Exchange</code>parameter is optional, just as its with the regular<code>@Converter</code>methods.</p></div><div class="paragraph"><p>The purpose with this broad scope method signature is allowing you to control if you can convert the given type or not. The<code>type</code>parameter holds the type we want the<code>value</code>converted to. Its used internally in Camel for wrapper objects so we can delegate the type convertions to the body that is wrapped.</p></div><div class="paragraph"><p>For instance in the method below we will handle all type conversions that is based on the wrapper class<code>GenericFile</code>and we let Camel do the type conversions on its body instead.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FallbackConverter
public static &lt;T&gt; T convertTo(Class&lt;T&gt; type, Exchange exchange, Object value, TypeConverterRegistry registry) {
    // use a fallback type converter so we can convert the embedded body
    // if the value is GenericFile
    if (GenericFile.class.isAssignableFrom(value.getClass())) {
        GenericFile file = (GenericFile) value;
        Class from = file.getBody().getClass();
        TypeConverter tc = registry.lookup(type, from);
        if (tc != null) {
            Object body = file.getBody();
            return tc.convertTo(type, exchange, body);
        }
    }
    return null;
}</code></pre></div></div></div><div class="sect3"><h4 id="TypeConverter-WritingyourownTypeConverters"><a class="anchor" href="#TypeConverter-WritingyourownTypeConverters"></a>Writing your own Type Converters</h4><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p><strong>Use FQN</strong></p></div><div class="paragraph"><p>In Camel 2.8 the TypeConverter file now supports specifying the FQN class name. This is recommended to be used. See below for more details. Using FQN must be used. The older way with just package name is deprecated and should not be used, and it may also not work in some application servers due to classpath scanning issues.</p></div></td></tr></table></div><div class="paragraph"><p>You are welcome to write your own converters. Remember to use the<code>@Converter</code>annotations on the classes and methods you wish to use. Then add the packages to a file called<code>META-INF/services/org/apache/camel/TypeConverter</code>in your jar. Remember to make sure that :</p></div><div class="ulist"><ul><li><p>static methods are encouraged to reduce caching, but instance methods are fine, particularly if you want to allow optional dependency injection to customize the converter</p></li><li><p>converter methods should be thread safe and reentrant</p></li></ul></div><div class="sect4"><h5 id="TypeConverter-ExamplesofTypeConverterfile"><a class="anchor" href="#TypeConverter-ExamplesofTypeConverterfile"></a>Examples of TypeConverter file</h5><div class="paragraph"><p>The file in the JAR:<code>META-INF/services/org/apache/camel/TypeConverter</code>contains the following line(s):</p></div><div class="listingblock"><div class="content"><pre>com.foo com.bar</pre></div></div><div class="paragraph"><p>Each line in the file is a package name. This tells Camel to go scan those packages for any classes that has been annotated with the<code>@Converter</code>.</p></div></div><div class="sect4"><h5 id="TypeConverter-ImprovedTypeConverterbyusingFQNclassnames"><a class="anchor" href="#TypeConverter-ImprovedTypeConverterbyusingFQNclassnames"></a>Improved TypeConverter by using FQN class names</h5><div class="paragraph"><p><strong>Available as of Camel 2.8</strong></p></div><div class="paragraph"><p>In Camel 2.8 we improved the type converter loader to support specifying the FQN class name of the converter classes. This has the advantage of avoiding having to scan packages for<code>@Converter</code>classes. Instead it loads the<code>@Converter</code>class directly. This is a<strong>highly</strong>recommend approach to use going forward.</p></div></div><div class="sect4"><h5 id="TypeConverter-ExamplesofTypeConverterfile.1"><a class="anchor" href="#TypeConverter-ExamplesofTypeConverterfile.1"></a>Examples of TypeConverter file</h5><div class="paragraph"><p>The file in the JAR:<code>META-INF/services/org/apache/camel/TypeConverter</code>contains the following line(s) for FQN class names:</p></div><div class="listingblock"><div class="content"><pre>com.foo.MyConverter
com.bar.MyOtherConverter
com.bar.YetOtherConverter</pre></div></div><div class="paragraph"><p>As you can see each line in the file now contains a FQN class name. This is the recommended approach.</p></div><div class="paragraph"><p>[[TypeConverter-Encodingsupportforbyte[]andStringConversion]] ==== Encoding support for byte[] and String Conversion</p></div><div class="paragraph"><p><strong>Available in Camel 1.5</strong></p></div><div class="paragraph"><p>Since Java provides converting the<code>byte[]</code>to<code>String</code>and<code>String</code>to<code>byte[]</code>with the<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/Charset.html">charset name</a>parameter. You can define the charset name by setting the exchange property name<code>Exchange.CHARSET_NAME</code>with the charset name, such as<code>"UTF-8"</code>or<code>"iso-8859-1"</code>.</p></div></div></div><div class="sect3"><h4 id="TypeConverter-Exchangeparameter"><a class="anchor" href="#TypeConverter-Exchangeparameter"></a>Exchange parameter</h4><div class="paragraph"><p><strong>Available in Camel 1.5</strong></p></div><div class="paragraph"><p>The type converter accepts the<code>Exchange</code>as an optional 2nd parameter. This is usable if the type converter for instance needs information from the current exchange. For instance combined with the encoding support its possible for type converters to convert with the configured encoding. An example from camel-core for the<code>byte[]</code>&#8594;<code>String</code>converter:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Converter
public static String toString(byte[] data, Exchange exchange) {
    if (exchange != null) {
        String charsetName = exchange.getProperty(Exchange.CHARSET_NAME, String.class);
        if (charsetName != null) {
            try {
                return new String(data, charsetName);
            } catch (UnsupportedEncodingException e) {
                LOG.warn("Can't convert the byte to String with the charset " + charsetName, e);
            }
        }
    }
    return new String(data);
}</code></pre></div></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>