<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/staging/manual/latest/writing-components.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="https://camel.apache.org/staging" title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="/projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="/docs/getting-started/">Getting started</a><a class="navbar-item" href="/manual/latest/">User manual</a><a class="navbar-item" href="/components/latest/">Component reference</a><a class="navbar-item" href="/camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="/community/support/">Support</a><a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="/community/user-stories/">User stories</a><a class="navbar-item" href="/community/articles/">Articles</a><a class="navbar-item" href="/community/books/">Books</a><a class="navbar-item" href="/community/team/">Team</a><a class="navbar-item" href="/community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="/download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="https://www.apache.org/licenses/">License</a><a class="navbar-item" href="https://www.apache.org/security/">Security</a><a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/writing-components.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect2"><h3 id="WritingComponents-WritingComponents"><a class="anchor" href="#WritingComponents-WritingComponents"></a>Writing Components</h3><div class="paragraph"><p>Apache Camel is designed to make it very easy to drop in new components whether they be routing components, transformers, transports etc. The idea of a component is to be a factory and manager of<a href="endpoint.adoc">Endpoints</a>.</p></div><div class="paragraph"><p>Here are the main steps to writing a component:</p></div><div class="ulist"><ul><li><p>Write a POJO which implements the<a href="http://activemq.apache.org/camel/maven/current/camel-core/apidocs/org/apache/camel/Component.html">Component</a>interface. The simplest approach is just to derive from<a href="http://activemq.apache.org/camel/maven/current/camel-core/apidocs/org/apache/camel/impl/DefaultComponent.html">DefaultComponent</a>.</p></li><li><p>To support auto-discovery of your component add a file to<code>META-INF/services/org/apache/camel/component/FOO</code>where FOO is the URI scheme for your component and any related endpoints created on the fly. The latter file should contain the definition of the component class. For example if your component is implemented by the<code>com.example.CustomComponent</code>class, the service file should contain the following line&#8201;&#8212;&#8201;<code>class=com.example.CustomComponent</code>.</p></li></ul></div><div class="paragraph"><p>Users can then either explicitly create your component, configure it and register with a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/CamelContext.html">CamelContext</a>or users can use a URI which auto-creates your component.</p></div><div class="sect3"><h4 id="WritingComponents-WritingEndpoints"><a class="anchor" href="#WritingComponents-WritingEndpoints"></a>Writing Endpoints</h4><div class="paragraph"><p>When implementing an<a href="endpoint.adoc">Endpoint</a>you typically may implement one or more of the following methods:</p></div><div class="ulist"><ul><li><p><a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createProducer()">createProducer()</a>will create a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Producer.html">Producer</a>for sending message exchanges to the endpoint</p></li><li><p><a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createConsumer(org.apache.camel.Processor)">createConsumer()</a>implements the<a href="event-driven-consumer.adoc">Event Driven Consumer</a>pattern for consuming message exchanges from the endpoint via a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Processor.html">Processor</a>when creating a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Consumer.html">Consumer</a></p></li><li><p><a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createPollingConsumer()">createPollingConsumer()</a>implements the<a href="polling-consumer.adoc">Polling Consumer</a>pattern for consuming message exchanges from the endpoint via a<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/PollingConsumer.html">PollingConsumer</a></p></li></ul></div><div class="paragraph"><p>Typically you just derive from<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/DefaultEndpoint.html">DefaultEndpoint</a>and implement the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createProducer()">createProducer()</a>and / or<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createConsumer(org.apache.camel.Processor)">createConsumer()</a>methods. The<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createPollingConsumer()">createPollingConsumer()</a>method will be created by default for you in the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/DefaultEndpoint.html">DefaultEndpoint</a>class.</p></div><div class="paragraph"><p>If your endpoint is a polling-centric component you can derive from<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/impl/DefaultPollingEndpoint.html">DefaultPollingEndpoint</a>and then implement<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createPollingConsumer()">createPollingConsumer()</a>; the<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Endpoint.html#createConsumer(org.apache.camel.Processor)">createConsumer()</a>method will be created for you which avoids you having to write any polling code.</p></div></div><div class="sect3"><h4 id="WritingComponents-AnnotatingyourEndpoint"><a class="anchor" href="#WritingComponents-AnnotatingyourEndpoint"></a>Annotating your Endpoint</h4><div class="paragraph"><p>As of<strong>Camel 2.12</strong>if you want to benefit from the automatic generation of HTML documentation for all the parameters on your endpoint as part of the maven site reports, you need to<a href="endpoint-annotations.adoc">annotate your Endpoint&#8217;s parameters</a>.</p></div><div class="paragraph"><p>So this means you add a<code>@UriEndpoint</code>annotation to your Endpoint class and then annotate each parameter you wish to be configured via the URI configuration mechanism with<code>@UriParam</code>(or<code>@UriParams</code>for nested configuration objects).</p></div><div class="paragraph"><p>In addition its recommended that your Component implementation inherit from the UriEndpointComponent base class as that means your Component will automatically generate better metadata for the<a href="componentconfiguration.adoc">ComponentConfiguration</a>API.</p></div><div class="paragraph"><p>Refer to the<a href="endpoint-annotations.adoc">Endpoint Annotations guide for details</a>.</p></div></div><div class="sect3"><h4 id="WritingComponents-UsingaProcessor"><a class="anchor" href="#WritingComponents-UsingaProcessor"></a>Using a Processor</h4><div class="paragraph"><p>If you are writing a simple endpoint which just processes messages in some way, you can just implement a<a href="processor.adoc">Processor</a>and<a href="processor.adoc">use that to create an endpoint</a>.</p></div></div><div class="sect3"><h4 id="WritingComponents-Dependencyinjectionandauto-discovery"><a class="anchor" href="#WritingComponents-Dependencyinjectionandauto-discovery"></a>Dependency injection and auto-discovery</h4><div class="paragraph"><p>When using auto-discovery the CamelContext will default to its<a href="injector.adoc">Injector</a>implementation to inject any required or optional dependencies on the component. This allows you to use auto-discovery of components via<a href="uris.adoc">URIs</a>while still getting the benefits of dependency injection.</p></div><div class="paragraph"><p>For example your component can depend on a JDBC DataSource or JMS ConnectionFactory which can be provided in the ApplicationContext in Spring or Module in Guice.</p></div><div class="paragraph"><p>So you can if you prefer configure your Component using an IoC framework like Spring or Guice; then add it to the CamelContext. Or you can let the Component auto-inject itself as the endpoints are auto-discovered.</p></div></div><div class="sect3"><h4 id="WritingComponents-Options"><a class="anchor" href="#WritingComponents-Options"></a>Options</h4><div class="paragraph"><p>If your component has options you can let it have public getters/setters and Camel will automatically set the properties when the endpoint is created. If you however want to take the matter in your own hands, then you must remove the option from the given parameter list as Camel will validate that all options are used. If not Camel will throw a ResolveEndpointFailedException stating some of the options are unknown.</p></div><div class="paragraph"><p>The parameters is provided by Camel in the createEndpoint method from DefaultComponent:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">protected abstract Endpoint&lt;E&gt; createEndpoint(String uri, String remaining, Map parameters)</code></pre></div></div><div class="paragraph"><p>The code is an example from the<a href="#seda-component">SEDA</a>component that removes the size parameter:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    public BlockingQueue&lt;Exchange&gt; createQueue(String uri, Map parameters) {
        int size = 1000;
        Object value = parameters.remove("size");
        if (value != null) {
            Integer i = convertTo(Integer.class, value);
            if (i != null) {
                size = i;
            }
        }
        return new LinkedBlockingQueue&lt;Exchange&gt;(size);
    }</code></pre></div></div></div><div class="sect3"><h4 id="WritingComponents-SeeAlso"><a class="anchor" href="#WritingComponents-SeeAlso"></a>See Also</h4><div class="ulist"><ul><li><p><a href="configuring-camel.adoc">Configuring Camel</a></p></li><li><p><a href="endpoint.adoc">Endpoint</a></p></li><li><p><a href="component.adoc">Component</a></p></li><li><p><a href="http://camel.apache.org/creating-a-new-camel-component.html">Creating a new Camel Component with Maven</a></p></li></ul></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>