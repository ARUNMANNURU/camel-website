<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/guice-maven-plugin.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="https://camel.apache.org" title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="/projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="/docs/getting-started/">Getting started</a><a class="navbar-item" href="/manual/latest/">User manual</a><a class="navbar-item" href="/components/latest/">Component reference</a><a class="navbar-item" href="/camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="/community/support/">Support</a><a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="/community/user-stories/">User stories</a><a class="navbar-item" href="/community/articles/">Articles</a><a class="navbar-item" href="/community/books/">Books</a><a class="navbar-item" href="/community/team/">Team</a><a class="navbar-item" href="/community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="/download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="https://www.apache.org/licenses/">License</a><a class="navbar-item" href="https://www.apache.org/security/">Security</a><a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/guice-maven-plugin.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect2"><h3 id="GuiceMavenPlugin-GuiceMavenPlugin"><a class="anchor" href="#GuiceMavenPlugin-GuiceMavenPlugin"></a>Guice Maven Plugin</h3><div class="paragraph"><p>The Guice Maven Plugin allows you to run your<a href="enterprise-integration-patterns.adoc">Enterprise Integration Patterns</a>using<a href="guice.adoc">Guice</a>for<a href="dependency-injection.adoc">Dependency Injection</a>inside Maven along with being able to support<a href="visualisation.adoc">Visualisation</a>along with integration of the<a href="visualisation.adoc">Visualisation</a>diagrams into the standard maven reports for your project.</p></div><div class="sect3"><h4 id="GuiceMavenPlugin-GoalsSupported"><a class="anchor" href="#GuiceMavenPlugin-GoalsSupported"></a>Goals Supported</h4><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 34%;"><col style="width: 66%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Goal</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guice-run-maven-goal.adoc">guice:run</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Boots up Camel in the context of a separately initiated Java thread using the<a href="guice.adoc">Guice</a>configuration in the<code>jndi.properties</code>file on the classpath and runs your routing rules</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guice-embedded-maven-goal.adoc">guice:embedded</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Boots up Camel using the<a href="guice.adoc">Guice</a>configuration at<code>jndi.properties</code>on the classpath and runs your routing rules</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guice-dot-maven-goal.adoc">guice:dot</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Generates DOT files and then HTML, PNG, SVG files for your EIP routing rules with integration into Maven Reports</p></td></tr></tbody></table></div><div class="sect3"><h4 id="GuiceMavenPlugin-Addingtheplugintoyourpom.xml"><a class="anchor" href="#GuiceMavenPlugin-Addingtheplugintoyourpom.xml"></a>Adding the plugin to your pom.xml</h4><div class="paragraph"><p>Add the following in your<code>&lt;build&gt;&lt;plugins&gt;</code>section</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;guice-maven-plugin&lt;/artifactId&gt;
&lt;/plugin&gt;</code></pre></div></div><div class="paragraph"><p>You can also specify what Main class to use when running the plugin. By default this is<code>org.apache.camel.guice.Main</code>.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;guice-maven-plugin&lt;/artifactId&gt;
  &lt;!-- optional, default value: org.apache.camel.guice.Main --&gt;
  &lt;configuration&gt;
    &lt;mainClass&gt;mypackage.boot.camel.CamelStartup&lt;/mainClass&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre></div></div></div><div class="sect3"><h4 id="GuiceMavenPlugin-MakinguseofanoptionalJNDIpropertiesfile"><a class="anchor" href="#GuiceMavenPlugin-MakinguseofanoptionalJNDIpropertiesfile"></a>Making use of an optional JNDI properties file</h4><div class="paragraph"><p><strong>Available as of Camel 2.13.0</strong></p></div><div class="paragraph"><p>Optionally if the name of your JNDI properties file is something else other than the default<code>jndi.properties</code>or if it&#8217;s not on the default classpath, then you can make use of the<code>jndiProperties</code>option as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;guice-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;jndiProperties&gt;/path/to/my/jndi/properties/my-guice-jndi.properties&lt;/jndiProperties&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre></div></div></div><div class="sect3"><h4 id="GuiceMavenPlugin-Classpath"><a class="anchor" href="#GuiceMavenPlugin-Classpath"></a>Classpath</h4><div class="paragraph"><p>The plugin will construct a classpath of any Maven dependency with scope<code>compile</code>. The classpath is output as an<code>INFO</code>log statement upon startup.</p></div></div><div class="sect3"><h4 id="GuiceMavenPlugin-RouteInformation"><a class="anchor" href="#GuiceMavenPlugin-RouteInformation"></a>Route Information</h4><div class="paragraph"><p>Information about the generated routes is available through the GraphViz report, and also through the log statements generated by the run goal. If you would like to see this information then add a log4j (or other commons-logging implementation) config file with the following levels.</p></div><div class="sect4"><h5 id="_srcmainresourceslog4_properties"><a class="anchor" href="#_srcmainresourceslog4_properties"></a>src/main/resources/log4.properties</h5><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">log4j.rootLogger=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

log4j.logger.org.apache.camel.impl.DefaultCamelContext=DEBUG, stdout
log4j.additivity.org.apache.camel.impl.DefaultCamelContext=false</code></pre></div></div><div class="paragraph"><p>This should produce a log statement similar to:</p></div><div class="literalblock"><div class="content"><pre>670  [org.apache.camel.guice.Main.main()] DEBUG org.apache.camel.impl.DefaultCamelContext - Adding routes from: Routes: [Route[ [From[jms:queue:queueA]] -&gt; [To[jms:queue:queueB], To[jms:queue:queueC]]]] routes: []</pre></div></div></div></div><div class="sect3"><h4 id="GuiceMavenPlugin-IntegrationintoMavenReports"><a class="anchor" href="#GuiceMavenPlugin-IntegrationintoMavenReports"></a>Integration into Maven Reports</h4><div class="paragraph"><p>If you add the guice-maven-plugin to your<code>&lt;reporting&gt;</code>section of your pom you will automatically get the<a href="visualisation.adoc">Visualisation</a>reporting generated for your project as part of the regular maven site generation.</p></div><div class="paragraph"><p>For example add the following into your pom:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project&gt;
  ...
  &lt;reporting&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
        &lt;artifactId&gt;guice-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/reporting&gt;
&lt;/project&gt;</code></pre></div></div><div class="paragraph"><p>Then when you run:</p></div><div class="literalblock"><div class="content"><pre>mvn site</pre></div></div><div class="paragraph"><p>Your context will be booted up via the<code>jndi.properties</code>files, the DOT file generated and a nice HTML report created.</p></div><div class="sect4"><h5 id="_graphviz_dot_required"><a class="anchor" href="#_graphviz_dot_required"></a>GraphViz DOT required</h5><div class="paragraph"><p>Note to get the nice HTML, PNG and SVG outputs from the DOT files you will need to install the<a href="http://graphviz.org">GraphViz</a>DOT executable and add it to your PATH so that the plugin can invoke DOT to generate the PNG/SVG files.</p></div><div class="paragraph"><p>For more details see the<a href="camel-dot-maven-goal.adoc">guice:dot</a>.</p></div></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>