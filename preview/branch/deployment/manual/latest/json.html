<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Untitled :: Apache Camel</title><link rel="canonical" href="https://camel.apache.org/manual/latest/json.html"><meta name="generator" content="Antora 2.0.0"><link rel="stylesheet" href="../../_/css/site.css"></head><body class="article"><header class="header"><nav class="navbar shadow border-bottom"><div class="navbar-brand"><a class="navbar-item nav-logo" href="https://camel.apache.org" title="Apache Camel"></a><button class="navbar-burger" data-target="topbar-nav"><span></span><span></span><span></span></button></div><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="/projects/camel-k/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="/docs/getting-started/">Getting started</a><a class="navbar-item" href="/manual/latest/">User manual</a><a class="navbar-item" href="/components/latest/">Component reference</a><a class="navbar-item" href="/camel-k/latest/">Camel K</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="/community/support/">Support</a><a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a><a class="navbar-item" href="/community/user-stories/">User stories</a><a class="navbar-item" href="/community/articles/">Articles</a><a class="navbar-item" href="/community/books/">Books</a><a class="navbar-item" href="/community/team/">Team</a><a class="navbar-item" href="/community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="/download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a><a class="navbar-item" href="https://www.apache.org/licenses/">License</a><a class="navbar-item" href="https://www.apache.org/security/">Security</a><a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div></nav></header><div class="main-wrapper"><div class="navigation-container" data-component="manual" data-version="latest"><aside class="navigation"><div class="panels"><div class="navigation-menu is-active" data-panel="menu"><nav class="nav-menu"><h3 class="title"><a href="index.html">User manual</a></h3><ul class="nav-list"><li class="nav-item" data-depth="0"><ul class="nav-list"><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="getting-started.html">Getting started</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><a class="nav-link" href="architecture.html">Architecture</a><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="async.html">Async</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="backlogdebugger.html">Backlog debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bam.html">Business Activity Monitoring</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="batch-consumer.html">Batch Consumer</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camel-core.html">Core</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="camelcontext.html">Context</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="endpoint.html">Endpoints</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="cep.html">Complex Event Processing</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="component.html">Component</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="debugger.html">Debugger</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="delay-interceptor.html">Delay interceptor</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dependency-injection.html">Dependency Injection</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="bean-integration.html">Bean Integration</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="error-handler.html">Error Handler</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange.html">Message Exchange</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="expression.html">Expressions</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="injector.html">Injector</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="intercept.html">Intercept</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="jmx.html">JMX</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="lifecycle.html">Camel Lifecycle</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="oncompletion.html">OnCompletion</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="predicate.html">Predicates</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="registry.html">Registry</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="route-builder.html">RouteBuilder</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="routes.html">Routes</a></li></ul></li><li class="nav-item" data-depth="1"><button class="nav-toggle"></button><span class="nav-text">Domain Specific Languages</span><ul class="nav-list"><li class="nav-item" data-depth="2"><a class="nav-link" href="dsl.html">Camel Domain Specific Language</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="java-dsl.html">Java DSL</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="spring.html">Spring support</a></li><li class="nav-item" data-depth="2"><a class="nav-link" href="groovy-dsl.html">Groovy DSL</a></li></ul></li><li class="nav-item" data-depth="1"><a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a></li></ul></li></ul></nav></div><div class="navigation-explore" data-panel="explore"><div class="context"><span class="title">User manual</span><span class="version">latest</span></div><ul class="components"><li class="component"><span class="title">Apache Camel K</span><ul class="versions"><li class="version is-latest"><a href="../../camel-k/latest/index.html">latest</a></li></ul></li><li class="component"><span class="title">Component reference</span><ul class="versions"><li class="version is-latest"><a href="../../components/latest/index.html">latest</a></li></ul></li><li class="component is-current"><span class="title">User manual</span><ul class="versions"><li class="version is-current is-latest"><a href="index.html">latest</a></li></ul></li></ul></div></div></aside></div><main class="main"><div class="toolbar" role="navigation"><button class="navigation-toggle"></button><a href="index.html" class="home-link"></a><nav class="crumbs" aria-label="breadcrumbs"></nav><div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/json.adoc">Edit this Page</a></div></div><article class="doc"><div class="sect2"><h3 id="JSON-JSON"><a class="anchor" href="#JSON-JSON"></a>JSON</h3><div class="paragraph"><p>JSON is a Data Format to marshal and unmarshal Java objects to and from<a href="http://www.json.org/">JSON</a>.</p></div><div class="paragraph"><p>For JSON to object marshalling, Camel provides integration with three popular JSON libraries:</p></div><div class="ulist"><ul><li><p>The<a href="http://xstream.codehaus.org/">XStream library</a>and<a href="http://jettison.codehaus.org/">Jettsion</a></p></li><li><p>The<a href="https://github.com/FasterXML/jackson">Jackson library</a></p></li><li><p><strong>Camel 2.10:</strong>The<a href="http://code.google.com/p/google-gson/">GSon library</a></p></li><li><p><strong>Camel 2.18:</strong>The<a href="http://johnzon.apache.org/">Johnzon library</a></p></li></ul></div><div class="paragraph"><p>Every library requires adding the special camel component (see "Dependency&#8230;&#8203;" paragraphs further down). By default Camel uses the XStream library.</p></div><div class="paragraph"><p><strong>Direct, bi-directional JSON &lt;&#8658; XML conversions</strong></p></div><div class="paragraph"><p>As of Camel 2.10, Camel supports direct, bi-directional JSON &lt;&#8658; XML conversions via the<a href="#xmljson-dataformat">camel-xmljson</a>data format, which is documented separately.</p></div><div class="sect3"><h4 id="JSON-UsingJSONdataformatwiththeXStreamlibrary"><a class="anchor" href="#JSON-UsingJSONdataformatwiththeXStreamlibrary"></a>Using JSON data format with the XStream library</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// lets turn Object messages into json then send to MQSeries
from("activemq:My.Queue").
  marshal().json().
  to("mqseries:Another.Queue");</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UsingJSONdataformatwiththeJacksonlibrary"><a class="anchor" href="#JSON-UsingJSONdataformatwiththeJacksonlibrary"></a>Using JSON data format with the Jackson library</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// lets turn Object messages into json then send to MQSeries
from("activemq:My.Queue").
  marshal().json(JsonLibrary.Jackson).
  to("mqseries:Another.Queue");</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UsingJSONdataformatwiththeGSONlibrary"><a class="anchor" href="#JSON-UsingJSONdataformatwiththeGSONlibrary"></a>Using JSON data format with the GSON library</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// lets turn Object messages into json then send to MQSeries
from("activemq:My.Queue").
  marshal().json(JsonLibrary.Gson).
  to("mqseries:Another.Queue");</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UsingJSONdataformatwiththeJohnzonlibrary"><a class="anchor" href="#JSON-UsingJSONdataformatwiththeJohnzonlibrary"></a>Using JSON data format with the Johnzon library</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// lets turn Object messages into json then send to MQSeries
from("activemq:My.Queue").
  marshal().json(JsonLibrary.Johnzon).
  to("mqseries:Another.Queue");</code></pre></div></div><div class="sect4"><h5 id="JSON-UsingJSONinSpringDSL"><a class="anchor" href="#JSON-UsingJSONinSpringDSL"></a>Using JSON in Spring DSL</h5><div class="paragraph"><p>When using Data Format in Spring DSL you need to declare the data formats first. This is done in the<strong>DataFormats</strong>XML tag.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">        &lt;dataFormats&gt;
            &lt;!-- here we define a Json data format with the id jack and that it should use the TestPojo as the class type when
                 doing unmarshal. The unmarshalTypeName is optional, if not provided Camel will use a Map as the type --&gt;
            &lt;json id="jack" library="Jackson" unmarshalTypeName="org.apache.camel.component.jackson.TestPojo"/&gt;
        &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>And then you can refer to this id in the route:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">       &lt;route&gt;
            &lt;from uri="direct:back"/&gt;
            &lt;unmarshal&gt;&lt;custom ref="jack"/&gt;&lt;/unmarshal&gt;
            &lt;to uri="mock:reverse"/&gt;
        &lt;/route&gt;</code></pre></div></div></div></div><div class="sect3"><h4 id="JSON-ExcludingPOJOfieldsfrommarshalling"><a class="anchor" href="#JSON-ExcludingPOJOfieldsfrommarshalling"></a>Excluding POJO fields from marshalling</h4><div class="paragraph"><p><strong>As of Camel 2.10</strong><br>When marshalling a POJO to JSON you might want to exclude certain fields from the JSON output. With Jackson you can use<a href="http://wiki.fasterxml.com/JacksonJsonViews">JSON views</a>to accomplish this. First create one or more marker classes.</p></div><div class="paragraph"><p>Use the marker classes with the<code>@JsonView</code>annotation to include/exclude certain fields. The annotation also works on getters.</p></div><div class="paragraph"><p>Finally use the Camel<code>JacksonDataFormat</code>to marshall the above POJO to JSON.</p></div><div class="paragraph"><p>Note that the height field is missing in the resulting JSON:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">{"age":30, "weight":70}</code></pre></div></div><div class="paragraph"><p>The GSON library supports a similar feature through the notion of<a href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/ExclusionStrategy.html">ExclusionStrategies</a>:</p></div><div class="paragraph"><p>The<code>GsonDataFormat</code>accepts an<code>ExclusionStrategy</code>in its constructor:</p></div><div class="paragraph"><p>The line above will exclude fields annotated with<code>@ExcludeAge</code>when marshalling to JSON.</p></div></div><div class="sect3"><h4 id="JSON-Configuringfieldnamingpolicy"><a class="anchor" href="#JSON-Configuringfieldnamingpolicy"></a>Configuring field naming policy</h4><div class="paragraph"><p><strong>Available as of Camel 2.11</strong></p></div><div class="paragraph"><p>The GSON library supports specifying policies and strategies for mapping from json to POJO fields. A common naming convention is to map json fields using lower case with underscores.</p></div><div class="paragraph"><p>We may have this JSON string</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">{
  "id" : 123,
  "first_name" : "Donald"
  "last_name" : "Duck"
}</code></pre></div></div><div class="paragraph"><p>Which we want to map to a POJO that has getter/setters as</p></div><div class="paragraph"><p><strong>PersonPojo.java</strong></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PersonPojo {

    private int id;
    private String firstName;
    private String lastName;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
}</code></pre></div></div><div class="paragraph"><p>Then we can configure the<code>org.apache.camel.component.gson.GsonDataFormat</code>in a Spring XML files as shown below. Notice we use<code>fieldNamingPolicy</code>property to set the field mapping. This property is an enum from GSon<code>com.google.gson.FieldNamingPolicy</code>which has a number of pre defined mappings. If you need full control you can use the property<code>FieldNamingStrategy</code>and implement a custom<code>com.google.gson.FieldNamingStrategy</code>where you can control the mapping.</p></div><div class="paragraph"><p><strong>Configuring GsonDataFromat in Spring XML file</strong></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;!-- define the gson data format, where we configure the data format using the properties --&gt;
    &lt;bean id="gson" class="org.apache.camel.component.gson.GsonDataFormat"&gt;
        &lt;!-- we want to unmarshal to person pojo --&gt;
        &lt;property name="unmarshalType" value="org.apache.camel.component.gson.PersonPojo"/&gt;
        &lt;!-- we want to map fields to use lower case and underscores --&gt;
        &lt;property name="fieldNamingPolicy" value="LOWER_CASE_WITH_UNDERSCORES"/&gt;
    &lt;/bean&gt;</code></pre></div></div><div class="paragraph"><p>And use it in Camel routes by referring to its bean id as shown:</p></div><div class="paragraph"><p><strong>Using gson from Camel Routes</strong></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">   &lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;

        &lt;route&gt;
            &lt;from uri="direct:inPojo"/&gt;
            &lt;marshal&gt;&lt;custom ref="gson"/&gt;&lt;/marshal&gt;
        &lt;/route&gt;

        &lt;route&gt;
            &lt;from uri="direct:backPojo"/&gt;
            &lt;unmarshal&gt;&lt;custom ref="gson"/&gt;&lt;/unmarshal&gt;
        &lt;/route&gt;

    &lt;/camelContext&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-IncludeExcludefieldsusingthejsonViewattributewithJacksonDataFormat"><a class="anchor" href="#JSON-IncludeExcludefieldsusingthejsonViewattributewithJacksonDataFormat"></a>Include/Exclude fields using the<code>jsonView</code>attribute with<code>JacksonDataFormat</code></h4><div class="paragraph"><p><strong>Available as of Camel 2.12</strong></p></div><div class="paragraph"><p>As an example of using this attribute you can instead of:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JacksonDataFormat ageViewFormat = new JacksonDataFormat(TestPojoView.class, Views.Age.class);
from("direct:inPojoAgeView").
  marshal(ageViewFormat);</code></pre></div></div><div class="paragraph"><p>Directly specify your<a href="http://wiki.fasterxml.com/JacksonJsonViews">JSON view</a>inside the Java DSL as:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:inPojoAgeView").
  marshal().json(TestPojoView.class, Views.Age.class);</code></pre></div></div><div class="paragraph"><p>And the same in XML DSL:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;from uri="direct:inPojoAgeView"/&gt;
  &lt;marshal&gt;
    &lt;json library="Jackson" unmarshalTypeName="org.apache.camel.component.jackson.TestPojoView" jsonView="org.apache.camel.component.jackson.Views$Age"/&gt;
  &lt;/marshal&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-SettingserializationincludeoptionforJacksonmarshal"><a class="anchor" href="#JSON-SettingserializationincludeoptionforJacksonmarshal"></a>Setting serialization include option for Jackson marshal</h4><div class="paragraph"><p><strong>Available as of Camel 2.13.3/2.14</strong></p></div><div class="paragraph"><p>If you want to marshal a pojo to JSON, and the pojo has some fields with null values. And you want to skip these null values, then you need to set either an annotation on the pojo,</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@JsonInclude(Include.NON_NULL)
public class MyPojo {
   ...
}</code></pre></div></div><div class="paragraph"><p>But this requires you to include that annotation in your pojo source code. You can also configure the Camel JsonDataFormat to set the include option, as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JacksonDataFormat format = new JacksonDataFormat();
format.setInclude("NON_NULL");</code></pre></div></div><div class="paragraph"><p>Or from XML DSL you configure this as</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" include="NOT_NULL"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UnmarshallingfromjsontoPOJOwithdynamicclassname"><a class="anchor" href="#JSON-UnmarshallingfromjsontoPOJOwithdynamicclassname"></a>Unmarshalling from json to POJO with dynamic class name</h4><div class="paragraph"><p><strong>Available as of Camel 2.14</strong></p></div><div class="paragraph"><p>If you use jackson to unmarshal json to POJO, then you can now specify a header in the message that indicate which class name to unmarshal to.<br>The header has key<code>CamelJacksonUnmarshalType</code> if that header is present in the message, then Jackson will use that as FQN for the POJO class to unmarshal the json payload as. Notice that behavior is enabled out of the box from Camel 2.14 onwards.</p></div><div class="paragraph"><p> For JMS end users there is the JMSType header from the JMS spec that indicates that also. To enable support for JMSType you would need to turn that on, on the jackson data format as shown:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JacksonDataFormat format = new JacksonDataFormat();
format.setAllowJmsType(true);</code></pre></div></div><div class="paragraph"><p>Or from XML DSL you configure this as</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" allowJmsType="true"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UnmarshallingfromjsontoListMaporListpojo"><a class="anchor" href="#JSON-UnmarshallingfromjsontoListMaporListpojo"></a>Unmarshalling from json to List&lt;Map&gt; or List&lt;pojo&gt;</h4><div class="paragraph"><p><strong>Available as of Camel 2.14</strong></p></div><div class="paragraph"><p>If you are using Jackson to unmarshal json to a list of map/pojo, you can now specify this by setting <code>useList="true"</code>or use the <code>org.apache.camel.component.jackson.ListJacksonDataFormat</code>. For example with Java you can do as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JacksonDataFormat format = new ListJacksonDataFormat();
// or
JacksonDataFormat format = new JacksonDataFormat();
format.useList();
// and you can specify the pojo class type also
format.setUnmarshalType(MyPojo.class);</code></pre></div></div><div class="paragraph"><p>And if you use XML DSL then you configure to use list using<code>useList</code>attribute as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" useList="true"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>And you can specify the pojo type also</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-UsingcustomJacksonObjectMapper"><a class="anchor" href="#JSON-UsingcustomJacksonObjectMapper"></a>Using custom Jackson ObjectMapper</h4><div class="paragraph"><p><strong>Available as of Camel 2.17</strong></p></div><div class="paragraph"><p>You can use custom Jackson ObjectMapper instance, can be configured as shown below.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" objectMapper="myMapper"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>Where myMapper is the id of the custom instance that Camel will lookup in the Registry</p></div></div><div class="sect3"><h4 id="JSON-UsingcustomJacksonmodules"><a class="anchor" href="#JSON-UsingcustomJacksonmodules"></a>Using custom Jackson modules</h4><div class="paragraph"><p><strong>Available as of Camel 2.15</strong></p></div><div class="paragraph"><p>You can use custom Jackson modules by specifying the class names of those using the moduleClassNames option as shown below.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo" moduleClassNames="com.foo.MyModule,com.foo.MyOtherModule"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>When using moduleClassNames then the custom jackson modules are not configured, by created using default constructor and used as-is. If a custom module needs any custom configuration, then an instance of the module can be created and configured, and then use modulesRefs to refer to the module as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    &lt;bean id="myJacksonModule" class="com.foo.MyModule"&gt;
      ... // configure the module as you want
    &lt;/bean&gt;

    &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo" moduleRefs="myJacksonModule"/&gt;
    &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p> Multiple modules can be specified separated by comma, such as moduleRefs="myJacksonModule,myOtherModule"</p></div></div><div class="sect3"><h4 id="JSON-EnablingordisablefeaturesusingJackson"><a class="anchor" href="#JSON-EnablingordisablefeaturesusingJackson"></a>Enabling or disable features using Jackson</h4><div class="paragraph"><p><strong>Available as of Camel 2.15</strong></p></div><div class="paragraph"><p>Jackson has a number of features you can enable or disable, which its ObjectMapper uses. For example to disable failing on unknown properties when marshalling, you can configure this using the disableFeatures:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> &lt;dataFormats&gt;
      &lt;json id="json" library="Jackson" unmarshalTypeName="com.foo.MyPojo" disableFeatures="FAIL_ON_UNKNOWN_PROPERTIES"/&gt;
 &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>You can disable multiple features by separating the values using comma. The values for the features must be the name of the enums from Jackson from the following enum classes</p></div><div class="ulist"><ul><li><p>com.fasterxml.jackson.databind.SerializationFeature</p></li><li><p>com.fasterxml.jackson.databind.DeserializationFeature</p></li><li><p>com.fasterxml.jackson.databind.MapperFeature</p></li></ul></div><div class="paragraph"><p>To enable a feature use the enableFeatures options instead.</p></div><div class="paragraph"><p>From Java code you can use the type safe methods from camel-jackson module:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">JacksonDataFormat df = new JacksonDataFormat(MyPojo.class);
df.disableFeature(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
df.disableFeature(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES);</code></pre></div></div></div><div class="sect3"><h4 id="JSON-ConvertingMapstoPOJOusingJackson"><a class="anchor" href="#JSON-ConvertingMapstoPOJOusingJackson"></a>Converting Maps to POJO using Jackson</h4><div class="paragraph"><p>Available since<strong>Camel 2.16</strong>. Jackson<code>ObjectMapper</code>can be used to convert maps to POJO objects. Jackson component comes with the data converter that can be used to convert<code>java.util.Map</code>instance to non-String, non-primitive and non-Number objects.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, Object&gt; invoiceData = new HashMap&lt;String, Object&gt;();
invoiceData.put("netValue", 500);
producerTemplate.sendBody("direct:mapToInvoice", invoiceData);
...
// Later in the processor
Invoice invoice = exchange.getIn().getBody(Invoice.class);</code></pre></div></div><div class="paragraph"><p>If there is a single<code>ObjectMapper</code>instance available in the Camel registry, it will used by the converter to perform the conversion. Otherwise the default mapper will be used.</p></div></div><div class="sect3"><h4 id="JSON-FormattedJSONmarshalling-pretty-printing"><a class="anchor" href="#JSON-FormattedJSONmarshalling-pretty-printing"></a>Formatted JSON marshalling (pretty-printing)</h4><div class="paragraph"><p><strong>Available as of Camel 2.16</strong></p></div><div class="paragraph"><p>Using the<code>prettyPrint</code>option one can output a well formatted JSON while marshalling:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> &lt;dataFormats&gt;
      &lt;json id="xstream" prettyPrint="true"/&gt;
      &lt;json id="jackson" prettyPrint="true" library="Jackson"/&gt;
      &lt;json id="gson" prettyPrint="true" library="Gson"/&gt;
 &lt;/dataFormats&gt;</code></pre></div></div><div class="paragraph"><p>And in Java DSL:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:inPretty").marshal().json(true);

from("direct:inPretty").marshal().json(JsonLibrary.Jackson, true);

from("direct:inPretty").marshal().json(JsonLibrary.Gson, true);</code></pre></div></div><div class="paragraph"><p>Please note that as of Camel 2.16 there’re 5 different overloaded<code>json()</code>DSL methods which support the<code>prettyPrint</code>option in combination with other settings for<code>JsonLibrary</code>,<code>unmarshalType</code>,<code>jsonView</code>etc.</p></div></div><div class="sect3"><h4 id="JSON-IntegratingJacksonwithCamelsTypeConverters"><a class="anchor" href="#JSON-IntegratingJacksonwithCamelsTypeConverters"></a>Integrating Jackson with Camel&#8217;s TypeConverters</h4><div id="JSON.1" class="paragraph"><p><strong>Available as of Camel 2.17</strong></p></div><div class="paragraph"><p>The <code>camel-jackson</code>module allows to integrate Jackson as a Type Converter in the Camel registry. This works in similar ways that <code>camel-jaxb</code> integrates with the type converter as well. However <code>camel-jackson</code>must be explicit enabled, which is done by setting some options on the <code>CamelContext</code>properties, as shown below:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// enable Jackson json type converter
getContext().getProperties().put("CamelJacksonEnableTypeConverter", "true");
// allow Jackson json to convert to pojo types also (by default jackson only converts to String and other simple types)
getContext().getProperties().put("CamelJacksonTypeConverterToPojo", "true");</code></pre></div></div><div class="paragraph"><p>The <code>camel-jackson</code>type converter integrates with JAXB which means you can annotate POJO class with JAXB annotations that Jackson can leverage.</p></div></div><div class="sect3"><h4 id="JSON-DependenciesforXStream"><a class="anchor" href="#JSON-DependenciesforXStream"></a>Dependencies for XStream</h4><div class="paragraph"><p>To use JSON in your camel routes you need to add the a dependency on<strong>camel-xstream</strong>which implements this data format.</p></div><div class="paragraph"><p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see the download page for the latest versions).</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-xstream&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-DependenciesforJackson"><a class="anchor" href="#JSON-DependenciesforJackson"></a>Dependencies for Jackson</h4><div class="paragraph"><p>To use JSON in your camel routes you need to add the a dependency on<strong>camel-jackson</strong>which implements this data format.</p></div><div class="paragraph"><p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see the download page for the latest versions).</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jackson&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-DependenciesforGSON"><a class="anchor" href="#JSON-DependenciesforGSON"></a>Dependencies for GSON</h4><div class="paragraph"><p>To use JSON in your camel routes you need to add the a dependency on<strong>camel-gson</strong>which implements this data format.</p></div><div class="paragraph"><p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see the download page for the latest versions).</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-gson&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre></div></div></div><div class="sect3"><h4 id="JSON-DependenciesforJohnzon"><a class="anchor" href="#JSON-DependenciesforJohnzon"></a>Dependencies for Johnzon</h4><div class="paragraph"><p>To use JSON in your camel routes you need to add the a dependency on<strong>camel-johnzon</strong>which implements this data format.</p></div><div class="paragraph"><p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see the download page for the latest versions).</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-johnzon&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre></div></div></div></div></article></main></div><footer class="footer"><p>This page was built using the Antora default UI.</p><p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p></footer><script src="../../_/js/site.js"></script><script src="../../_/js/vendor/highlight.js"></script><script>hljs.initHighlighting()</script></body></html>