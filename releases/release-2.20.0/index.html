<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"><meta name="application-name" content="Apache Camel"><link rel="manifest" href="../../site.webmanifest"><title>Release 2.20.0 - Apache Camel</title><link rel="canonical" href="../../releases/release-2.20.0/"><link rel="stylesheet" href="../../_/css/site-52b06e54db.css"></head><body class="article"><header class="header"><nav class="navbar"><div class="navbar-brand"><a class="nav-logo" href="../../" title="Apache Camel"><span>Apache Camel</span></a><div id="topbar-nav" class="navbar-menu"><div class="navbar-end"><a class="navbar-item" href="../../news/">News</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Projects</a><div class="navbar-dropdown"><a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Documentation</a><div class="navbar-dropdown"><a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a></div></div><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">Community</a><div class="navbar-dropdown"><a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> <a class="navbar-item" href="../../community/camel-extra/">Camel extra</a></div></div><a class="navbar-item" href="../../download/">Download</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link" href="#">About</a><div class="navbar-dropdown"><a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></div></div></div></div><div class="navbar-tools"><a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use href="../../_/img/brand-logos.svg#github"/></svg></a><a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use href="../../_/img/brand-logos.svg#gitter"/></svg></a><a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use href="../../_/img/brand-logos.svg#twitter"/></svg></a></div><button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span><span></span><span></span></button></div></nav></header><h1>Apache Camel 2.20.0 Release</h1><h2>New and Noteworthy</h2><p>Welcome to the 2.20.0 release which resolved over 550 issues including new features, improvements and bug fixes.</p><ul><li>Support for Java 9 as a technical preview. Official support for Java 9 will be forthcoming in the following releases. (source code builds and tests on a Java 9 JVM). </li><li>Many internal optimisations in the Camel routing engine, such as reducing thread contention when updating JMX statistics, reducing internal state objects to claim less memory, and reducing the number of allocated objects to reduce overhead on GC etc, and much more. </li><li>Camel Spring Boot now supports referring to bean&rsquo;s (lookup in Spring Boot) by their id names in the configuration files (application.properties|yaml file) when you configure any of the Camel starter components.</li><li>Camel Spring Boot now also supports using Spring (auto) configuration to configure CamelContext when using Spring XML files with <code>&lt;camelContext&gt;</code>. </li><li>Worked to make Apache Camel more ready and compatible with the upcoming Spring Boot 2 and Spring Framework 5. Officially support for these is expected in Camel 2.21 release.</li><li>The JMS component now includes JMS 2.0 functionality to use shared (durable and non-durable) topic.</li><li>The Camel Maven Plugin can now validate for duplicate route ids in your source code.</li><li>Splitted Twitter component into 4, now directmessage, seach, streaming and timeline has its own endpoint and scheme. See documentation for more details</li><li>Introduced <code>HeadersMapFactory</code> SPI which allows to plugin different implementations, or to use case sensitive maps that are faster than the default.</li><li>Allow Kafka consumer to break on first unhandled exception, sync the offset from last known good, and then re-connect after one timeout cycle, to restart consuming again. This avoids loosing the failed message, but retry it again on either this consumer, or another consume which was re-balanced by Kafka. This requires to be turned on with the new option breakOnFirstError which can be set on both component or endpoint level.</li><li>Starting and stoping the CamelContext when used with Spring framework (SpringCamelContext) was revised to ensure that the Camel context is started last - when all resources should be available, and stopped first</li><li>while all resources are still available</li><li>The SQL Stored Procedure now supports specifying custom types as FQN classnames and scale in numeric values.</li><li>Using Camel with Spring now supports calling Bean by their FQN name and let Spring instantiate the bean using auto-wired constructor&rsquo;s as opposed to only supporting a no-arg constructor. </li><li>Using Camel with Spring Boot can now easily filter Java RouteBuilder routes via ANT-path pattern style to either include or exclude class names, which can be configured using Spring configuration properties.</li><li>The Wire Tap EIP can now be configured to use static endpoint uri instead of being dynamic evaluated via the Simple language. </li><li>The Wire Tap EIP will now complete any inflight wire tapped exchanges while shutting down to give them time to complete graceful.</li><li>The JSonPath can now split and write each row as a string value (JSon format) instead of using a Map/POJO type with the new writeAsString option.</li><li>The POJO Consuming Consume annotation on POJO classes now support a predicate (using simple language) to filter the message. See the camel-example-spring-boot-pojo for more.</li><li>The internal JSon parser that is used by camel-catalog and runtime camel-catalog (from camel-core) now embeds a simple-json v2 parser which means it can parse any kind of json formatted document (before it was confined to its own dense format)</li><li>Infinispan, Ehcache and Hazelcast caches can automatically discover cache managers in spring-boot</li><li>Introduced an experimental <em>Health Checks SPI</em> that can be leveraged in in cloud environments to detect non healthy contexts.</li><li>Introduced an experimental _Cluster SPI_ for high availability contexts, out of the box Camel supports: atomix, consul, file, kubernetes and zookeeper as underlying clustering technologies through the respective components.</li><li>Introduced an experimental <em>Route Controller SPI</em> which is aimed to provide more fine-grained control of routes, out of the box Camel provides the following implementations:</li><li><em>SupervisingRouteController</em> which delays startup of the routes after the camel context is properly started and attempt to restart routes that have not been starter successfully</li><li><em>ClusteredRouteController</em> which leverages <em>Cluster SPI</em> to start routes only when the context is elected as leader</li></ul><p>Fixed these issues</p><ul><li>Fixed a infinitive recursion in Camel&rsquo;s link:error-handler.html[Error Handler] when an onException was routing to another route using direct endpoint and this route would throw a new exception that would circle back to the same onException or at a later point, which will cause an endless recursion.</li><li>Fixed a potential issue with masking password from URI using RAW(xxx) would reveal part of the password if the password contains a &amp; character.</li><li>The Restlet component is now internally using curly brackets for its uri patterns instead of regular parentheses so it works similar to the other REST component and as Restlet framework itself does</li><li>Fixed Hystrix EIP having wrong default for circuitBreakerForceClose when using camel-hystrix-starter with Spring Boot. The default should be false and not true</li><li>Fixed Hystrix EIP when failing and running fallback not signaling to Hystrix itself so it can keep state of the failure and react accordingly to run in half-open mode as well.</li><li>Fixed MDC logging loosing route id after calling a direct route from within a transacted route</li><li>Fixed a regression with Bean component and Simple language OGNL expressions causing ambiguous method call exception when calling method implemented by super class when method is defined by interface and abstract class</li><li>Fixed Rest DSL (server side) not returning response on all valid uri paths when clients call using a HTTP OPTIONS request</li><li>Fixed Rest producer not using HTTP method (verb such as PUT) from the endpoint uri when calling a remote REST service</li><li>Fixed Timer routes to shutdown more graceful and allow pending tasks to complete while they are in-flight.</li><li>Fixed configuring Rest DSL via application.properties|yaml in Spring Boot not working. </li><li>Fixed Simple Language to add support negative numbers(without single or double quotes) in predicates</li><li>Fixed configuring Rest DSL in Spring Boot application.properties / yaml for properties to data format, component, api, cors etc to use a map structure and make it work.</li><li>Fixed configuring Rest DSL using property placeholders in the path parameters such as the defaultValue.</li><li>Fixed an issue with parallel processing (in non-streaming mode) in some EIPs may cause CPU burning cycles while waiting for pending tasks to complete or timeout.</li><li>Fixed an issue with copying streams could block forever due IBM application server would mistakenly return 0 instead of -1 to indicate EOL for an empty stream. </li><li>Fixed an issue with making JMS and SJMS components work with ActiveMQ Artemis that would otherwise causes a ClassCastException</li><li>Fixed RabbitMQ component to better recover connection if exchange/queue has been deleted manually on the broker.</li><li>Fixed Websocket component wasn&rsquo;t working with returning static content</li></ul><p>Important changes to consider when upgrading</p><ul><li>Maven 3.3.3 or newer is required to build the project</li><li>camel-dropbox - upgraded to v2 api as v1 is EOL and no longer possible to use with dropbox. The v2 upgrade was not straightforward so there can be backward compatible issues, which is out of our hands.</li><li>camel-infinispan - the result is not more set in the CamelInfinispanOperationResult header but in the in body. To change this behavior you can set the header CamelInfinispanOperationResultHeader with the name of the header that should contains the result or with the resultHeader uri option</li><li>camel-infinispan - the uri option <em>command</em> has been deprecated and replaced by <em>operation</em> for consistency</li><li>camel-infinispan - the commands are now int the short form PUT, GET etc. old operation names like CamelInfinispanOperationPut, CamelInfinispanOperationGet etc have been deprecated.</li><li>camel-undertow - matchOnUriPrefix option is defaulted to be FALSE in order to make it consistent with other components like Camel HTTP components.</li><li>Splitted Twitter component into 4, now directmessage, seach, streaming and timeline has its own endpoint and scheme.</li><li>RuntimeEndpointRegistry is no longer in extended mode by default. To use that you need to set management statistics level to Extended explicit.</li><li>There is no RuntimeEndpointRegistry in use by default. You need to explicit configure a registry to be used, or turn it on via management agent, or set the statics level to extended mode.</li><li>Camel with Spring XML routes will no longer register endpoints in the Spring registry from Camel routes where <code>&lt;from&gt;</code> or <code>&lt;to&gt;</code> have endpoints assigned with an explicit id attribute. The option registerEndpointIdsFromRoute can be set to true on <code>&lt;camelContext&gt;</code> to be backwards compatible. However this registration is deprecated, instead you should use <code>&lt;endpoint&gt;</code> to register Camel endpoints with id&rsquo;s in Spring registry.</li><li>camel-spring-dm has been removed as it was not working properly anyway and was deprecated some releases ago. For XML DSL with OSGi use camel-blueprint instead.</li><li>Copying streams in IOHelper from came-core now regard EOL of data if the first read byte is zero to work around issues on some application servers like IBM WebSphere. This can be turned off by setting JVM system property &ldquo;camel.zeroByteEOLEnabled=false&rdquo;.</li><li>The camel-jms component now dependes by default on the JMS 2.0 API (geronimo-jms_2.0_spec) instead of JMS 1.1 API (geronimo-jms_1.1_spec). However camel-jms works at runtime with both JMS 1.1 or 2.0 specs so include the JMS spec JARs of your choice.</li><li>camel-kura upgraded to newer OSGi API version</li><li>camel-stomp uses the destination as-is, where as before it would replace all slash characters with colon. But according to the STOMP spec the destination should be used as-is, and is broker specific.</li><li>camel-ignite is updated from using Ignite version 1.9.x to 2.2.x</li></ul><h2>API breaking</h2><h2>Known issues</h2><h2>Getting the Binaries using Maven</h2><h3>Binary Distributions</h3><table class="tableblock frame-all grid-all stretch"><thead><tr><td>Description</td><td>Download Link</td><td>PGP Signature file of download</td></tr></thead><tbody><tr><td>Windows Distribution</td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0.zip">apache-camel-2.20.0.zip</a></td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0.zip.asc">apache-camel-2.20.0.zip.asc</a></td></tr><tr><td>Unix/Linux/Cygwin Distribution</td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0.tar.gz">apache-camel-2.20.0.tar.gz</a></td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0.tar.gz.asc">apache-camel-2.20.0.tar.gz.asc</a></td></tr></tbody></table><h4>Source Distributions</h4><table class="tableblock frame-all grid-all stretch"><thead><tr><td>Description</td><td>Download Link</td><td>PGP Signature file of download</td></tr></thead><tbody><tr><td>Source (zip)</td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0-src.zip">apache-camel-2.20.0-src.zip</a></td><td><a href="http://www.apache.org/dyn/closer.cgi/camel/apache-camel/2.20.0/apache-camel-2.20.0-src.zip.asc">apache-camel-2.20.0-src.zip.asc</a></td></tr></tbody></table><h3>Git tag checkout</h3><pre>
  git clone https://git-wip-us.apache.org/repos/asf/camel.git
  cd camel
  git checkout camel-2.20.0
</pre><h5>Getting the Binaries using Maven</h5>To use this release in your maven project, the proper dependency configuration that you should use in your Maven POM is:<pre><code>
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-core&lt;/artifactId&gt;
  &lt;version&gt;2.20.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h3>Changelog</h3>For a more detailed view of new features and bug fixes, see the:<br><a href="https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12311211&version=12340219">Release notes for 2.20.0</a><footer><div class="footer"><figure class="logo"><img class="logo" src="../../_/img/logo-d.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"></figure><dl><dt>Overview</dt><dd><a href="../../news/">News</a></dd><dd><a href="../../components/latest/">Components</a></dd><dd><a href="../../download/">Download</a></dd><dd><a href="../../docs/getting-started/">Getting started</a></dd><dd><a href="../../manual/latest/faq.html">FAQ</a></dd></dl><dl><dt>Community</dt><dd><a href="../../community/support/">Support</a></dd><dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd><dd><a href="../../community/user-stories/">User stories</a></dd><dd><a href="../../community/articles/">Articles</a></dd><dd><a href="../../community/books/">Books</a></dd><dd><a href="../../community/team/">Team</a></dd><dd><a href="../../community/camel-extra/">Camel extra</a></dd></dl><dl><dt>About</dt><dd><a href="../../acknowledgments/">Acknowledgments</a></dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd><dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd><dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd><dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd><dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd></dl><p>© 2004-2018 The <a href="https://apache.org">Apache Software Foundation</a>.<br>Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p></div></footer><script src="../../_/js/site-ae13c69512.js"></script><script src="../../_/js/vendor/highlight-0f2623cb32.js"></script><script src="../../_/js/vendor/svg4everybody-5abcb676ea.js"></script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"Apache Camel","url":"https:\/\/camel.apache.org\/","sameAs":["https://twitter.com/cameltweet"],"logo":"https:\/\/camel.apache.org\/_/img/logo-d.svg","description":"Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://camel.apache.org/","name":"Apache Camel"}},{"@type":"ListItem","position":2,"item":{"@id":"https://camel.apache.org/releases/","name":"releases"}},{"@type":"ListItem","position":3,"item":{"@id":"https://camel.apache.org/releases/release-2.20.0/","name":"release-2.20.0"}}]}</script></body></html>htmlEscape